{"version":3,"file":"cli.cjs","names":["node_fs_1","node_path_1","node_os_1","node_child_process_1","node_fs_1","node_path_1","node_fs_1","node_path_1","node_os_1","node_fs_1","node_path_1","node_fs_1","node_path_1","node_fs_1","node_path_1","styles","process","os","tty","node_fs_1","node_path_1","node_fs_1","node_path_1","node_fs_1","node_path_1","node_fs_1","node_path_1","path","fs","os"],"sources":["../../core/dist/types.js","../../core/dist/core.js","../../core/dist/frontmatter.js","../../core/dist/config.js","../../core/dist/state.js","../../core/dist/roadmap.js","../../core/dist/milestone.js","../../../node_modules/.pnpm/chalk@5.6.2/node_modules/chalk/source/vendor/ansi-styles/index.js","../../../node_modules/.pnpm/chalk@5.6.2/node_modules/chalk/source/vendor/supports-color/index.js","../../../node_modules/.pnpm/chalk@5.6.2/node_modules/chalk/source/utilities.js","../../../node_modules/.pnpm/chalk@5.6.2/node_modules/chalk/source/index.js","../../core/dist/commands.js","../../core/dist/verify.js","../../core/dist/phase.js","../../core/dist/template.js","../../core/dist/init.js","../../core/dist/index.js","../src/cli.ts"],"sourcesContent":["\"use strict\";\n/**\n * @maxsim/core — Shared type definitions\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PLANNING_CONFIG_DEFAULTS = void 0;\nexports.phaseNumber = phaseNumber;\nexports.phasePath = phasePath;\nexports.phaseSlug = phaseSlug;\nexports.ok = ok;\nexports.err = err;\nfunction phaseNumber(value) {\n    const match = value.match(/^\\d+[A-Z]?(\\.\\d+)?$/i);\n    if (!match) {\n        throw new Error(`Invalid phase number: ${value}`);\n    }\n    return value;\n}\nfunction phasePath(value) {\n    if (!value || typeof value !== 'string') {\n        throw new Error(`Invalid phase path: ${value}`);\n    }\n    return value;\n}\nfunction phaseSlug(value) {\n    if (!value || typeof value !== 'string') {\n        throw new Error(`Invalid phase slug: ${value}`);\n    }\n    return value;\n}\nfunction ok(data) {\n    return { success: true, data };\n}\nfunction err(error) {\n    return { success: false, error };\n}\nexports.PLANNING_CONFIG_DEFAULTS = {\n    model_profile: 'balanced',\n    commit_docs: true,\n    search_gitignored: false,\n    branching_strategy: 'none',\n    phase_branch_template: 'maxsim/phase-{phase}-{slug}',\n    milestone_branch_template: 'maxsim/{milestone}-{slug}',\n    workflow: {\n        research: true,\n        plan_check: true,\n        verifier: true,\n        nyquist_validation: false,\n    },\n    parallelization: true,\n    brave_search: false,\n};\n//# sourceMappingURL=types.js.map","\"use strict\";\n/**\n * Core — Shared utilities, constants, and internal helpers\n *\n * Ported from maxsim/bin/lib/core.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MODEL_PROFILES = void 0;\nexports.output = output;\nexports.error = error;\nexports.safeReadFile = safeReadFile;\nexports.loadConfig = loadConfig;\nexports.isGitIgnored = isGitIgnored;\nexports.execGit = execGit;\nexports.normalizePhaseName = normalizePhaseName;\nexports.comparePhaseNum = comparePhaseNum;\nexports.getPhasePattern = getPhasePattern;\nexports.findPhaseInternal = findPhaseInternal;\nexports.getArchivedPhaseDirs = getArchivedPhaseDirs;\nexports.getRoadmapPhaseInternal = getRoadmapPhaseInternal;\nexports.resolveModelInternal = resolveModelInternal;\nexports.pathExistsInternal = pathExistsInternal;\nexports.generateSlugInternal = generateSlugInternal;\nexports.getMilestoneInfo = getMilestoneInfo;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst node_os_1 = __importDefault(require(\"node:os\"));\nconst node_child_process_1 = require(\"node:child_process\");\n// ─── Model Profile Table ─────────────────────────────────────────────────────\nexports.MODEL_PROFILES = {\n    'maxsim-planner': { quality: 'opus', balanced: 'opus', budget: 'sonnet', tokenburner: 'opus' },\n    'maxsim-roadmapper': { quality: 'opus', balanced: 'sonnet', budget: 'sonnet', tokenburner: 'opus' },\n    'maxsim-executor': { quality: 'opus', balanced: 'sonnet', budget: 'sonnet', tokenburner: 'opus' },\n    'maxsim-phase-researcher': { quality: 'opus', balanced: 'sonnet', budget: 'haiku', tokenburner: 'opus' },\n    'maxsim-project-researcher': { quality: 'opus', balanced: 'sonnet', budget: 'haiku', tokenburner: 'opus' },\n    'maxsim-research-synthesizer': { quality: 'sonnet', balanced: 'sonnet', budget: 'haiku', tokenburner: 'opus' },\n    'maxsim-debugger': { quality: 'opus', balanced: 'sonnet', budget: 'sonnet', tokenburner: 'opus' },\n    'maxsim-codebase-mapper': { quality: 'sonnet', balanced: 'haiku', budget: 'haiku', tokenburner: 'opus' },\n    'maxsim-verifier': { quality: 'sonnet', balanced: 'sonnet', budget: 'haiku', tokenburner: 'opus' },\n    'maxsim-plan-checker': { quality: 'sonnet', balanced: 'sonnet', budget: 'haiku', tokenburner: 'opus' },\n    'maxsim-integration-checker': { quality: 'sonnet', balanced: 'sonnet', budget: 'haiku', tokenburner: 'opus' },\n};\n// ─── Output helpers ──────────────────────────────────────────────────────────\n// DEPRECATION: output() and error() call process.exit() and belong in the CLI\n// layer. They are kept here for backward compatibility during the port. Future\n// plans should move these to @maxsim/cli.\nfunction output(result, raw, rawValue) {\n    if (raw && rawValue !== undefined) {\n        process.stdout.write(String(rawValue));\n    }\n    else {\n        const json = JSON.stringify(result, null, 2);\n        if (json.length > 50000) {\n            const tmpPath = node_path_1.default.join(node_os_1.default.tmpdir(), `maxsim-${Date.now()}.json`);\n            node_fs_1.default.writeFileSync(tmpPath, json, 'utf-8');\n            process.stdout.write('@file:' + tmpPath);\n        }\n        else {\n            process.stdout.write(json);\n        }\n    }\n    process.exit(0);\n}\nfunction error(message) {\n    process.stderr.write('Error: ' + message + '\\n');\n    process.exit(1);\n}\n// ─── File & Config utilities ─────────────────────────────────────────────────\nfunction safeReadFile(filePath) {\n    try {\n        return node_fs_1.default.readFileSync(filePath, 'utf-8');\n    }\n    catch {\n        return null;\n    }\n}\nfunction loadConfig(cwd) {\n    const configPath = node_path_1.default.join(cwd, '.planning', 'config.json');\n    const defaults = {\n        model_profile: 'balanced',\n        commit_docs: true,\n        search_gitignored: false,\n        branching_strategy: 'none',\n        phase_branch_template: 'maxsim/phase-{phase}-{slug}',\n        milestone_branch_template: 'maxsim/{milestone}-{slug}',\n        research: true,\n        plan_checker: true,\n        verifier: true,\n        parallelization: true,\n        brave_search: false,\n    };\n    try {\n        const raw = node_fs_1.default.readFileSync(configPath, 'utf-8');\n        const parsed = JSON.parse(raw);\n        const get = (key, nested) => {\n            if (parsed[key] !== undefined)\n                return parsed[key];\n            if (nested) {\n                const section = parsed[nested.section];\n                if (section && typeof section === 'object' && section !== null && nested.field in section) {\n                    return section[nested.field];\n                }\n            }\n            return undefined;\n        };\n        const parallelization = (() => {\n            const val = get('parallelization');\n            if (typeof val === 'boolean')\n                return val;\n            if (typeof val === 'object' && val !== null && 'enabled' in val) {\n                return val.enabled;\n            }\n            return defaults.parallelization;\n        })();\n        return {\n            model_profile: get('model_profile') ?? defaults.model_profile,\n            commit_docs: get('commit_docs', { section: 'planning', field: 'commit_docs' }) ?? defaults.commit_docs,\n            search_gitignored: get('search_gitignored', { section: 'planning', field: 'search_gitignored' }) ?? defaults.search_gitignored,\n            branching_strategy: get('branching_strategy', { section: 'git', field: 'branching_strategy' }) ?? defaults.branching_strategy,\n            phase_branch_template: get('phase_branch_template', { section: 'git', field: 'phase_branch_template' }) ?? defaults.phase_branch_template,\n            milestone_branch_template: get('milestone_branch_template', { section: 'git', field: 'milestone_branch_template' }) ?? defaults.milestone_branch_template,\n            research: get('research', { section: 'workflow', field: 'research' }) ?? defaults.research,\n            plan_checker: get('plan_checker', { section: 'workflow', field: 'plan_check' }) ?? defaults.plan_checker,\n            verifier: get('verifier', { section: 'workflow', field: 'verifier' }) ?? defaults.verifier,\n            parallelization,\n            brave_search: get('brave_search') ?? defaults.brave_search,\n            model_overrides: parsed['model_overrides'],\n        };\n    }\n    catch {\n        return defaults;\n    }\n}\n// ─── Git utilities ───────────────────────────────────────────────────────────\nfunction isGitIgnored(cwd, targetPath) {\n    try {\n        (0, node_child_process_1.execSync)('git check-ignore -q -- ' + targetPath.replace(/[^a-zA-Z0-9._\\-/]/g, ''), {\n            cwd,\n            stdio: 'pipe',\n        });\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction execGit(cwd, args) {\n    try {\n        const escaped = args.map(a => {\n            if (/^[a-zA-Z0-9._\\-/=:@]+$/.test(a))\n                return a;\n            return \"'\" + a.replace(/'/g, \"'\\\\''\") + \"'\";\n        });\n        const stdout = (0, node_child_process_1.execSync)('git ' + escaped.join(' '), {\n            cwd,\n            stdio: 'pipe',\n            encoding: 'utf-8',\n        });\n        return { exitCode: 0, stdout: stdout.trim(), stderr: '' };\n    }\n    catch (thrown) {\n        const err = thrown;\n        return {\n            exitCode: err.status ?? 1,\n            stdout: (err.stdout ?? '').toString().trim(),\n            stderr: (err.stderr ?? '').toString().trim(),\n        };\n    }\n}\n// ─── Phase utilities ─────────────────────────────────────────────────────────\nfunction normalizePhaseName(phase) {\n    const match = phase.match(/^(\\d+)([A-Z])?(\\.\\d+)?/i);\n    if (!match)\n        return phase;\n    const padded = match[1].padStart(2, '0');\n    const letter = match[2] ? match[2].toUpperCase() : '';\n    const decimal = match[3] || '';\n    return padded + letter + decimal;\n}\nfunction comparePhaseNum(a, b) {\n    const pa = String(a).match(/^(\\d+)([A-Z])?(\\.\\d+)?/i);\n    const pb = String(b).match(/^(\\d+)([A-Z])?(\\.\\d+)?/i);\n    if (!pa || !pb)\n        return String(a).localeCompare(String(b));\n    const intDiff = parseInt(pa[1], 10) - parseInt(pb[1], 10);\n    if (intDiff !== 0)\n        return intDiff;\n    const la = (pa[2] || '').toUpperCase();\n    const lb = (pb[2] || '').toUpperCase();\n    if (la !== lb) {\n        if (!la)\n            return -1;\n        if (!lb)\n            return 1;\n        return la < lb ? -1 : 1;\n    }\n    const da = pa[3] ? parseFloat(pa[3]) : -1;\n    const db = pb[3] ? parseFloat(pb[3]) : -1;\n    return da - db;\n}\n// ─── Phase regex helper ──────────────────────────────────────────────────────\n/**\n * Returns the canonical regex for matching Phase heading lines in ROADMAP.md.\n *\n * General form (no escapedPhaseNum):\n *   Matches: ## Phase 03: Name Here\n *   Group 1: phase number string (e.g. \"03\", \"3A\", \"2.1\")\n *   Group 2: phase name string (e.g. \"Name Here\")\n *\n * Specific form (with escapedPhaseNum):\n *   Matches: ## Phase 03: Name Here\n *   Group 1: phase name string only\n *\n * @param escapedPhaseNum - regex-escaped phase number string to match a specific phase\n * @param flags - regex flags (default: 'gi')\n */\nfunction getPhasePattern(escapedPhaseNum, flags = 'gi') {\n    if (escapedPhaseNum) {\n        return new RegExp(`#{2,4}\\\\s*Phase\\\\s+${escapedPhaseNum}:\\\\s*([^\\\\n]+)`, flags);\n    }\n    return new RegExp(`#{2,4}\\\\s*Phase\\\\s+(\\\\d+[A-Z]?(?:\\\\.\\\\d+)?)\\\\s*:\\\\s*([^\\\\n]+)`, flags);\n}\nfunction searchPhaseInDir(baseDir, relBase, normalized) {\n    try {\n        const entries = node_fs_1.default.readdirSync(baseDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => comparePhaseNum(a, b));\n        const match = dirs.find(d => d.startsWith(normalized));\n        if (!match)\n            return null;\n        const dirMatch = match.match(/^(\\d+[A-Z]?(?:\\.\\d+)?)-?(.*)/i);\n        const phaseNumber = dirMatch ? dirMatch[1] : normalized;\n        const phaseName = dirMatch && dirMatch[2] ? dirMatch[2] : null;\n        const phaseDir = node_path_1.default.join(baseDir, match);\n        const phaseFiles = node_fs_1.default.readdirSync(phaseDir);\n        const plans = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md').sort();\n        const summaries = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md').sort();\n        const hasResearch = phaseFiles.some(f => f.endsWith('-RESEARCH.md') || f === 'RESEARCH.md');\n        const hasContext = phaseFiles.some(f => f.endsWith('-CONTEXT.md') || f === 'CONTEXT.md');\n        const hasVerification = phaseFiles.some(f => f.endsWith('-VERIFICATION.md') || f === 'VERIFICATION.md');\n        const completedPlanIds = new Set(summaries.map(s => s.replace('-SUMMARY.md', '').replace('SUMMARY.md', '')));\n        const incompletePlans = plans.filter(p => {\n            const planId = p.replace('-PLAN.md', '').replace('PLAN.md', '');\n            return !completedPlanIds.has(planId);\n        });\n        return {\n            found: true,\n            directory: node_path_1.default.join(relBase, match),\n            phase_number: phaseNumber,\n            phase_name: phaseName,\n            phase_slug: phaseName ? phaseName.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') : null,\n            plans,\n            summaries,\n            incomplete_plans: incompletePlans,\n            has_research: hasResearch,\n            has_context: hasContext,\n            has_verification: hasVerification,\n        };\n    }\n    catch {\n        return null;\n    }\n}\nfunction findPhaseInternal(cwd, phase) {\n    if (!phase)\n        return null;\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const normalized = normalizePhaseName(phase);\n    const current = searchPhaseInDir(phasesDir, node_path_1.default.join('.planning', 'phases'), normalized);\n    if (current)\n        return current;\n    const milestonesDir = node_path_1.default.join(cwd, '.planning', 'milestones');\n    if (!node_fs_1.default.existsSync(milestonesDir))\n        return null;\n    try {\n        const milestoneEntries = node_fs_1.default.readdirSync(milestonesDir, { withFileTypes: true });\n        const archiveDirs = milestoneEntries\n            .filter(e => e.isDirectory() && /^v[\\d.]+-phases$/.test(e.name))\n            .map(e => e.name)\n            .sort()\n            .reverse();\n        for (const archiveName of archiveDirs) {\n            const versionMatch = archiveName.match(/^(v[\\d.]+)-phases$/);\n            if (!versionMatch)\n                continue;\n            const version = versionMatch[1];\n            const archivePath = node_path_1.default.join(milestonesDir, archiveName);\n            const relBase = node_path_1.default.join('.planning', 'milestones', archiveName);\n            const result = searchPhaseInDir(archivePath, relBase, normalized);\n            if (result) {\n                result.archived = version;\n                return result;\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    return null;\n}\nfunction getArchivedPhaseDirs(cwd) {\n    const milestonesDir = node_path_1.default.join(cwd, '.planning', 'milestones');\n    const results = [];\n    if (!node_fs_1.default.existsSync(milestonesDir))\n        return results;\n    try {\n        const milestoneEntries = node_fs_1.default.readdirSync(milestonesDir, { withFileTypes: true });\n        const phaseDirs = milestoneEntries\n            .filter(e => e.isDirectory() && /^v[\\d.]+-phases$/.test(e.name))\n            .map(e => e.name)\n            .sort()\n            .reverse();\n        for (const archiveName of phaseDirs) {\n            const versionMatch = archiveName.match(/^(v[\\d.]+)-phases$/);\n            if (!versionMatch)\n                continue;\n            const version = versionMatch[1];\n            const archivePath = node_path_1.default.join(milestonesDir, archiveName);\n            const entries = node_fs_1.default.readdirSync(archivePath, { withFileTypes: true });\n            const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => comparePhaseNum(a, b));\n            for (const dir of dirs) {\n                results.push({\n                    name: dir,\n                    milestone: version,\n                    basePath: node_path_1.default.join('.planning', 'milestones', archiveName),\n                    fullPath: node_path_1.default.join(archivePath, dir),\n                });\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    return results;\n}\n// ─── Roadmap & model utilities ───────────────────────────────────────────────\nfunction getRoadmapPhaseInternal(cwd, phaseNum) {\n    if (!phaseNum)\n        return null;\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    if (!node_fs_1.default.existsSync(roadmapPath))\n        return null;\n    try {\n        const content = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n        const escapedPhase = phaseNum.toString().replace(/\\./g, '\\\\.');\n        const phasePattern = getPhasePattern(escapedPhase, 'i');\n        const headerMatch = content.match(phasePattern);\n        if (!headerMatch)\n            return null;\n        const phaseName = headerMatch[1].trim();\n        const headerIndex = headerMatch.index;\n        const restOfContent = content.slice(headerIndex);\n        const nextHeaderMatch = restOfContent.match(/\\n#{2,4}\\s+Phase\\s+\\d/i);\n        const sectionEnd = nextHeaderMatch ? headerIndex + nextHeaderMatch.index : content.length;\n        const section = content.slice(headerIndex, sectionEnd).trim();\n        const goalMatch = section.match(/\\*\\*Goal:\\*\\*\\s*([^\\n]+)/i);\n        const goal = goalMatch ? goalMatch[1].trim() : null;\n        return {\n            found: true,\n            phase_number: phaseNum.toString(),\n            phase_name: phaseName,\n            goal,\n            section,\n        };\n    }\n    catch {\n        return null;\n    }\n}\nfunction resolveModelInternal(cwd, agentType) {\n    const config = loadConfig(cwd);\n    const override = config.model_overrides?.[agentType];\n    if (override) {\n        return override === 'opus' ? 'inherit' : override;\n    }\n    const profile = config.model_profile || 'balanced';\n    const agentModels = exports.MODEL_PROFILES[agentType];\n    if (!agentModels)\n        return 'sonnet';\n    const resolved = agentModels[profile] || agentModels['balanced'] || 'sonnet';\n    return resolved === 'opus' ? 'inherit' : resolved;\n}\n// ─── Misc utilities ──────────────────────────────────────────────────────────\nfunction pathExistsInternal(cwd, targetPath) {\n    const fullPath = node_path_1.default.isAbsolute(targetPath) ? targetPath : node_path_1.default.join(cwd, targetPath);\n    try {\n        node_fs_1.default.statSync(fullPath);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction generateSlugInternal(text) {\n    if (!text)\n        return null;\n    return text.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '');\n}\nfunction getMilestoneInfo(cwd) {\n    try {\n        const roadmap = node_fs_1.default.readFileSync(node_path_1.default.join(cwd, '.planning', 'ROADMAP.md'), 'utf-8');\n        const versionMatch = roadmap.match(/v(\\d+\\.\\d+)/);\n        const nameMatch = roadmap.match(/## .*v\\d+\\.\\d+[:\\s]+([^\\n(]+)/);\n        return {\n            version: versionMatch ? versionMatch[0] : 'v1.0',\n            name: nameMatch ? nameMatch[1].trim() : 'milestone',\n        };\n    }\n    catch {\n        return { version: 'v1.0', name: 'milestone' };\n    }\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\n/**\n * Frontmatter — YAML frontmatter parsing, serialization, and CRUD commands\n *\n * Ported from maxsim/bin/lib/frontmatter.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FRONTMATTER_SCHEMAS = void 0;\nexports.extractFrontmatter = extractFrontmatter;\nexports.reconstructFrontmatter = reconstructFrontmatter;\nexports.spliceFrontmatter = spliceFrontmatter;\nexports.parseMustHavesBlock = parseMustHavesBlock;\nexports.cmdFrontmatterGet = cmdFrontmatterGet;\nexports.cmdFrontmatterSet = cmdFrontmatterSet;\nexports.cmdFrontmatterMerge = cmdFrontmatterMerge;\nexports.cmdFrontmatterValidate = cmdFrontmatterValidate;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst core_js_1 = require(\"./core.js\");\n/**\n * Extract YAML frontmatter from markdown content into a typed object.\n */\nfunction extractFrontmatter(content) {\n    const frontmatter = {};\n    const match = content.match(/^---\\n([\\s\\S]+?)\\n---/);\n    if (!match)\n        return frontmatter;\n    const yaml = match[1];\n    const lines = yaml.split('\\n');\n    const stack = [{ obj: frontmatter, key: null, indent: -1 }];\n    for (const line of lines) {\n        if (line.trim() === '')\n            continue;\n        const indentMatch = line.match(/^(\\s*)/);\n        const indent = indentMatch ? indentMatch[1].length : 0;\n        // Pop stack back to appropriate level\n        while (stack.length > 1 && indent <= stack[stack.length - 1].indent) {\n            stack.pop();\n        }\n        const current = stack[stack.length - 1];\n        // Check for key: value pattern\n        const keyMatch = line.match(/^(\\s*)([a-zA-Z0-9_-]+):\\s*(.*)/);\n        if (keyMatch) {\n            const key = keyMatch[2];\n            const value = keyMatch[3].trim();\n            if (value === '' || value === '[') {\n                // Key with no value or opening bracket\n                const newObj = value === '[' ? [] : {};\n                current.obj[key] = newObj;\n                current.key = null;\n                stack.push({ obj: newObj, key: null, indent });\n            }\n            else if (value.startsWith('[') && value.endsWith(']')) {\n                // Inline array: key: [a, b, c]\n                current.obj[key] = value\n                    .slice(1, -1)\n                    .split(',')\n                    .map(s => s.trim().replace(/^[\"']|[\"']$/g, ''))\n                    .filter(Boolean);\n                current.key = null;\n            }\n            else {\n                // Simple key: value\n                current.obj[key] = value.replace(/^[\"']|[\"']$/g, '');\n                current.key = null;\n            }\n        }\n        else if (line.trim().startsWith('- ')) {\n            // Array item\n            const itemValue = line.trim().slice(2).replace(/^[\"']|[\"']$/g, '');\n            if (typeof current.obj === 'object' &&\n                !Array.isArray(current.obj) &&\n                Object.keys(current.obj).length === 0) {\n                // Convert empty object to array\n                const parent = stack.length > 1 ? stack[stack.length - 2] : null;\n                if (parent && !Array.isArray(parent.obj)) {\n                    for (const k of Object.keys(parent.obj)) {\n                        if (parent.obj[k] === current.obj) {\n                            const arr = [itemValue];\n                            parent.obj[k] = arr;\n                            current.obj = arr;\n                            break;\n                        }\n                    }\n                }\n            }\n            else if (Array.isArray(current.obj)) {\n                current.obj.push(itemValue);\n            }\n        }\n    }\n    return frontmatter;\n}\n/**\n * Reconstruct YAML frontmatter string from an object.\n */\nfunction reconstructFrontmatter(obj) {\n    const lines = [];\n    for (const [key, value] of Object.entries(obj)) {\n        if (value === null || value === undefined)\n            continue;\n        if (Array.isArray(value)) {\n            formatArray(lines, key, value, 0);\n        }\n        else if (typeof value === 'object') {\n            lines.push(`${key}:`);\n            for (const [subkey, subval] of Object.entries(value)) {\n                if (subval === null || subval === undefined)\n                    continue;\n                if (Array.isArray(subval)) {\n                    formatArray(lines, subkey, subval, 2);\n                }\n                else if (typeof subval === 'object') {\n                    lines.push(`  ${subkey}:`);\n                    for (const [subsubkey, subsubval] of Object.entries(subval)) {\n                        if (subsubval === null || subsubval === undefined)\n                            continue;\n                        if (Array.isArray(subsubval)) {\n                            if (subsubval.length === 0) {\n                                lines.push(`    ${subsubkey}: []`);\n                            }\n                            else {\n                                lines.push(`    ${subsubkey}:`);\n                                for (const item of subsubval) {\n                                    lines.push(`      - ${item}`);\n                                }\n                            }\n                        }\n                        else {\n                            lines.push(`    ${subsubkey}: ${subsubval}`);\n                        }\n                    }\n                }\n                else {\n                    const sv = String(subval);\n                    lines.push(`  ${subkey}: ${sv.includes(':') || sv.includes('#') ? `\"${sv}\"` : sv}`);\n                }\n            }\n        }\n        else {\n            const sv = String(value);\n            if (sv.includes(':') || sv.includes('#') || sv.startsWith('[') || sv.startsWith('{')) {\n                lines.push(`${key}: \"${sv}\"`);\n            }\n            else {\n                lines.push(`${key}: ${sv}`);\n            }\n        }\n    }\n    return lines.join('\\n');\n}\nfunction formatArray(lines, key, value, indentLevel) {\n    const prefix = ' '.repeat(indentLevel);\n    if (value.length === 0) {\n        lines.push(`${prefix}${key}: []`);\n    }\n    else if (value.every(v => typeof v === 'string') &&\n        value.length <= 3 &&\n        value.join(', ').length < 60) {\n        lines.push(`${prefix}${key}: [${value.join(', ')}]`);\n    }\n    else {\n        lines.push(`${prefix}${key}:`);\n        for (const item of value) {\n            const itemStr = String(item);\n            lines.push(`${prefix}  - ${typeof item === 'string' && (itemStr.includes(':') || itemStr.includes('#')) ? `\"${itemStr}\"` : itemStr}`);\n        }\n    }\n}\n/**\n * Replace or insert frontmatter in markdown content.\n */\nfunction spliceFrontmatter(content, newObj) {\n    const yamlStr = reconstructFrontmatter(newObj);\n    const match = content.match(/^---\\n[\\s\\S]+?\\n---/);\n    if (match) {\n        return `---\\n${yamlStr}\\n---` + content.slice(match[0].length);\n    }\n    return `---\\n${yamlStr}\\n---\\n\\n` + content;\n}\n/**\n * Parse a specific block from must_haves in raw frontmatter YAML.\n */\nfunction parseMustHavesBlock(content, blockName) {\n    const fmMatch = content.match(/^---\\n([\\s\\S]+?)\\n---/);\n    if (!fmMatch)\n        return [];\n    const yaml = fmMatch[1];\n    const blockPattern = new RegExp(`^\\\\s{4}${blockName}:\\\\s*$`, 'm');\n    const blockStart = yaml.search(blockPattern);\n    if (blockStart === -1)\n        return [];\n    const afterBlock = yaml.slice(blockStart);\n    const blockLines = afterBlock.split('\\n').slice(1);\n    const items = [];\n    let current = null;\n    for (const line of blockLines) {\n        if (line.trim() === '')\n            continue;\n        const indent = line.match(/^(\\s*)/)[1].length;\n        if (indent <= 4 && line.trim() !== '')\n            break;\n        if (line.match(/^\\s{6}-\\s+/)) {\n            if (current !== null)\n                items.push(current);\n            current = {};\n            const simpleMatch = line.match(/^\\s{6}-\\s+\"?([^\"]+)\"?\\s*$/);\n            if (simpleMatch && !line.includes(':')) {\n                current = simpleMatch[1];\n            }\n            else {\n                const kvMatch = line.match(/^\\s{6}-\\s+(\\w+):\\s*\"?([^\"]*)\"?\\s*$/);\n                if (kvMatch) {\n                    current = { [kvMatch[1]]: kvMatch[2] };\n                }\n            }\n        }\n        else if (current !== null && typeof current === 'object') {\n            const kvMatch = line.match(/^\\s{8,}(\\w+):\\s*\"?([^\"]*)\"?\\s*$/);\n            if (kvMatch) {\n                const val = kvMatch[2];\n                current[kvMatch[1]] = /^\\d+$/.test(val) ? parseInt(val, 10) : val;\n            }\n            const arrMatch = line.match(/^\\s{10,}-\\s+\"?([^\"]+)\"?\\s*$/);\n            if (arrMatch) {\n                const keys = Object.keys(current);\n                const lastKey = keys[keys.length - 1];\n                if (lastKey && !Array.isArray(current[lastKey])) {\n                    current[lastKey] = current[lastKey] ? [String(current[lastKey])] : [];\n                }\n                if (lastKey)\n                    current[lastKey].push(arrMatch[1]);\n            }\n        }\n    }\n    if (current !== null)\n        items.push(current);\n    return items;\n}\n// ─── Frontmatter schema validation ──────────────────────────────────────────\nexports.FRONTMATTER_SCHEMAS = {\n    plan: {\n        required: ['phase', 'plan', 'type', 'wave', 'depends_on', 'files_modified', 'autonomous', 'must_haves'],\n    },\n    summary: {\n        required: ['phase', 'plan', 'subsystem', 'tags', 'duration', 'completed'],\n    },\n    verification: {\n        required: ['phase', 'verified', 'status', 'score'],\n    },\n};\n// ─── Frontmatter CRUD commands ──────────────────────────────────────────────\nfunction cmdFrontmatterGet(cwd, filePath, field, raw) {\n    if (!filePath) {\n        (0, core_js_1.error)('file path required');\n    }\n    const fullPath = node_path_1.default.isAbsolute(filePath) ? filePath : node_path_1.default.join(cwd, filePath);\n    const content = (0, core_js_1.safeReadFile)(fullPath);\n    if (!content) {\n        (0, core_js_1.output)({ error: 'File not found', path: filePath }, raw);\n        return;\n    }\n    const fm = extractFrontmatter(content);\n    if (field) {\n        const value = fm[field];\n        if (value === undefined) {\n            (0, core_js_1.output)({ error: 'Field not found', field }, raw);\n            return;\n        }\n        (0, core_js_1.output)({ [field]: value }, raw, JSON.stringify(value));\n    }\n    else {\n        (0, core_js_1.output)(fm, raw);\n    }\n}\nfunction cmdFrontmatterSet(cwd, filePath, field, value, raw) {\n    if (!filePath || !field || value === undefined) {\n        (0, core_js_1.error)('file, field, and value required');\n    }\n    const fullPath = node_path_1.default.isAbsolute(filePath) ? filePath : node_path_1.default.join(cwd, filePath);\n    if (!node_fs_1.default.existsSync(fullPath)) {\n        (0, core_js_1.output)({ error: 'File not found', path: filePath }, raw);\n        return;\n    }\n    const content = node_fs_1.default.readFileSync(fullPath, 'utf-8');\n    const fm = extractFrontmatter(content);\n    let parsedValue;\n    try {\n        parsedValue = JSON.parse(value);\n    }\n    catch {\n        parsedValue = value;\n    }\n    fm[field] = parsedValue;\n    const newContent = spliceFrontmatter(content, fm);\n    node_fs_1.default.writeFileSync(fullPath, newContent, 'utf-8');\n    (0, core_js_1.output)({ updated: true, field, value: parsedValue }, raw, 'true');\n}\nfunction cmdFrontmatterMerge(cwd, filePath, data, raw) {\n    if (!filePath || !data) {\n        (0, core_js_1.error)('file and data required');\n    }\n    const fullPath = node_path_1.default.isAbsolute(filePath) ? filePath : node_path_1.default.join(cwd, filePath);\n    if (!node_fs_1.default.existsSync(fullPath)) {\n        (0, core_js_1.output)({ error: 'File not found', path: filePath }, raw);\n        return;\n    }\n    const content = node_fs_1.default.readFileSync(fullPath, 'utf-8');\n    const fm = extractFrontmatter(content);\n    let mergeData;\n    try {\n        mergeData = JSON.parse(data);\n    }\n    catch {\n        (0, core_js_1.error)('Invalid JSON for --data');\n        return;\n    }\n    Object.assign(fm, mergeData);\n    const newContent = spliceFrontmatter(content, fm);\n    node_fs_1.default.writeFileSync(fullPath, newContent, 'utf-8');\n    (0, core_js_1.output)({ merged: true, fields: Object.keys(mergeData) }, raw, 'true');\n}\nfunction cmdFrontmatterValidate(cwd, filePath, schemaName, raw) {\n    if (!filePath || !schemaName) {\n        (0, core_js_1.error)('file and schema required');\n    }\n    const schema = exports.FRONTMATTER_SCHEMAS[schemaName];\n    if (!schema) {\n        (0, core_js_1.error)(`Unknown schema: ${schemaName}. Available: ${Object.keys(exports.FRONTMATTER_SCHEMAS).join(', ')}`);\n    }\n    const fullPath = node_path_1.default.isAbsolute(filePath) ? filePath : node_path_1.default.join(cwd, filePath);\n    const content = (0, core_js_1.safeReadFile)(fullPath);\n    if (!content) {\n        (0, core_js_1.output)({ error: 'File not found', path: filePath }, raw);\n        return;\n    }\n    const fm = extractFrontmatter(content);\n    const missing = schema.required.filter(f => fm[f] === undefined);\n    const present = schema.required.filter(f => fm[f] !== undefined);\n    const result = {\n        valid: missing.length === 0,\n        missing,\n        present,\n        schema: schemaName,\n    };\n    (0, core_js_1.output)(result, raw, missing.length === 0 ? 'valid' : 'invalid');\n}\n//# sourceMappingURL=frontmatter.js.map","\"use strict\";\n/**\n * Config — Planning config CRUD operations\n *\n * Ported from maxsim/bin/lib/config.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdConfigEnsureSection = cmdConfigEnsureSection;\nexports.cmdConfigSet = cmdConfigSet;\nexports.cmdConfigGet = cmdConfigGet;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst node_os_1 = __importDefault(require(\"node:os\"));\nconst core_js_1 = require(\"./core.js\");\nconst types_js_1 = require(\"./types.js\");\n// ─── Config CRUD commands ───────────────────────────────────────────────────\nfunction cmdConfigEnsureSection(cwd, raw) {\n    const configPath = node_path_1.default.join(cwd, '.planning', 'config.json');\n    const planningDir = node_path_1.default.join(cwd, '.planning');\n    try {\n        if (!node_fs_1.default.existsSync(planningDir)) {\n            node_fs_1.default.mkdirSync(planningDir, { recursive: true });\n        }\n    }\n    catch (err) {\n        (0, core_js_1.error)('Failed to create .planning directory: ' + err.message);\n    }\n    if (node_fs_1.default.existsSync(configPath)) {\n        const result = { created: false, reason: 'already_exists' };\n        (0, core_js_1.output)(result, raw, 'exists');\n        return;\n    }\n    // Detect Brave Search API key availability\n    const homedir = node_os_1.default.homedir();\n    const braveKeyFile = node_path_1.default.join(homedir, '.maxsim', 'brave_api_key');\n    const hasBraveSearch = !!(process.env.BRAVE_API_KEY || node_fs_1.default.existsSync(braveKeyFile));\n    // Load user-level defaults from ~/.maxsim/defaults.json if available\n    const globalDefaultsPath = node_path_1.default.join(homedir, '.maxsim', 'defaults.json');\n    let userDefaults = {};\n    try {\n        if (node_fs_1.default.existsSync(globalDefaultsPath)) {\n            userDefaults = JSON.parse(node_fs_1.default.readFileSync(globalDefaultsPath, 'utf-8'));\n        }\n    }\n    catch {\n        // Ignore malformed global defaults, fall back to hardcoded\n    }\n    const hardcoded = {\n        ...types_js_1.PLANNING_CONFIG_DEFAULTS,\n        brave_search: hasBraveSearch,\n    };\n    const defaults = {\n        ...hardcoded,\n        ...userDefaults,\n        workflow: {\n            ...hardcoded.workflow,\n            ...(userDefaults.workflow || {}),\n        },\n    };\n    try {\n        node_fs_1.default.writeFileSync(configPath, JSON.stringify(defaults, null, 2), 'utf-8');\n        const result = { created: true, path: '.planning/config.json' };\n        (0, core_js_1.output)(result, raw, 'created');\n    }\n    catch (err) {\n        (0, core_js_1.error)('Failed to create config.json: ' + err.message);\n    }\n}\nfunction cmdConfigSet(cwd, keyPath, value, raw) {\n    const configPath = node_path_1.default.join(cwd, '.planning', 'config.json');\n    if (!keyPath) {\n        (0, core_js_1.error)('Usage: config-set <key.path> <value>');\n    }\n    // Parse value (handle booleans and numbers)\n    let parsedValue = value;\n    if (value === 'true')\n        parsedValue = true;\n    else if (value === 'false')\n        parsedValue = false;\n    else if (value !== undefined && !isNaN(Number(value)) && value !== '')\n        parsedValue = Number(value);\n    // Load existing config or start with empty object\n    let config = {};\n    try {\n        if (node_fs_1.default.existsSync(configPath)) {\n            config = JSON.parse(node_fs_1.default.readFileSync(configPath, 'utf-8'));\n        }\n    }\n    catch (err) {\n        (0, core_js_1.error)('Failed to read config.json: ' + err.message);\n    }\n    // Set nested value using dot notation\n    const keys = keyPath.split('.');\n    let current = config;\n    for (let i = 0; i < keys.length - 1; i++) {\n        const key = keys[i];\n        if (current[key] === undefined || typeof current[key] !== 'object') {\n            current[key] = {};\n        }\n        current = current[key];\n    }\n    current[keys[keys.length - 1]] = parsedValue;\n    try {\n        node_fs_1.default.writeFileSync(configPath, JSON.stringify(config, null, 2), 'utf-8');\n        const result = { updated: true, key: keyPath, value: parsedValue };\n        (0, core_js_1.output)(result, raw, `${keyPath}=${parsedValue}`);\n    }\n    catch (err) {\n        (0, core_js_1.error)('Failed to write config.json: ' + err.message);\n    }\n}\nfunction cmdConfigGet(cwd, keyPath, raw) {\n    const configPath = node_path_1.default.join(cwd, '.planning', 'config.json');\n    if (!keyPath) {\n        (0, core_js_1.error)('Usage: config-get <key.path>');\n    }\n    let config = {};\n    try {\n        if (node_fs_1.default.existsSync(configPath)) {\n            config = JSON.parse(node_fs_1.default.readFileSync(configPath, 'utf-8'));\n        }\n        else {\n            (0, core_js_1.error)('No config.json found at ' + configPath);\n        }\n    }\n    catch (err) {\n        if (err.message.startsWith('No config.json'))\n            throw err;\n        (0, core_js_1.error)('Failed to read config.json: ' + err.message);\n    }\n    const keys = keyPath.split('.');\n    let current = config;\n    for (const key of keys) {\n        if (current === undefined || current === null || typeof current !== 'object') {\n            (0, core_js_1.error)(`Key not found: ${keyPath}`);\n        }\n        current = current[key];\n    }\n    if (current === undefined) {\n        (0, core_js_1.error)(`Key not found: ${keyPath}`);\n    }\n    (0, core_js_1.output)(current, raw, String(current));\n}\n//# sourceMappingURL=config.js.map","\"use strict\";\n/**\n * State — STATE.md operations and progression engine\n *\n * Ported from maxsim/bin/lib/state.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stateExtractField = stateExtractField;\nexports.stateReplaceField = stateReplaceField;\nexports.cmdStateLoad = cmdStateLoad;\nexports.cmdStateGet = cmdStateGet;\nexports.cmdStatePatch = cmdStatePatch;\nexports.cmdStateUpdate = cmdStateUpdate;\nexports.cmdStateAdvancePlan = cmdStateAdvancePlan;\nexports.cmdStateRecordMetric = cmdStateRecordMetric;\nexports.cmdStateUpdateProgress = cmdStateUpdateProgress;\nexports.cmdStateAddDecision = cmdStateAddDecision;\nexports.cmdStateAddBlocker = cmdStateAddBlocker;\nexports.cmdStateResolveBlocker = cmdStateResolveBlocker;\nexports.cmdStateRecordSession = cmdStateRecordSession;\nexports.cmdStateSnapshot = cmdStateSnapshot;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst core_js_1 = require(\"./core.js\");\n// ─── Internal helpers ────────────────────────────────────────────────────────\nfunction escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nfunction stateExtractField(content, fieldName) {\n    const pattern = new RegExp(`\\\\*\\\\*${fieldName}:\\\\*\\\\*\\\\s*(.+)`, 'i');\n    const match = content.match(pattern);\n    return match ? match[1].trim() : null;\n}\nfunction stateReplaceField(content, fieldName, newValue) {\n    const escaped = escapeRegex(fieldName);\n    const pattern = new RegExp(`(\\\\*\\\\*${escaped}:\\\\*\\\\*\\\\s*)(.*)`, 'i');\n    if (pattern.test(content)) {\n        return content.replace(pattern, (_match, prefix) => `${prefix}${newValue}`);\n    }\n    return null;\n}\nfunction readTextArgOrFile(cwd, value, filePath, label) {\n    if (!filePath)\n        return value;\n    const resolvedPath = node_path_1.default.isAbsolute(filePath) ? filePath : node_path_1.default.join(cwd, filePath);\n    try {\n        return node_fs_1.default.readFileSync(resolvedPath, 'utf-8').trimEnd();\n    }\n    catch {\n        throw new Error(`${label} file not found: ${filePath}`);\n    }\n}\n// ─── State commands ──────────────────────────────────────────────────────────\nfunction cmdStateLoad(cwd, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const planningDir = node_path_1.default.join(cwd, '.planning');\n    let stateRaw = '';\n    try {\n        stateRaw = node_fs_1.default.readFileSync(node_path_1.default.join(planningDir, 'STATE.md'), 'utf-8');\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const configExists = node_fs_1.default.existsSync(node_path_1.default.join(planningDir, 'config.json'));\n    const roadmapExists = node_fs_1.default.existsSync(node_path_1.default.join(planningDir, 'ROADMAP.md'));\n    const stateExists = stateRaw.length > 0;\n    const result = {\n        config,\n        state_raw: stateRaw,\n        state_exists: stateExists,\n        roadmap_exists: roadmapExists,\n        config_exists: configExists,\n    };\n    if (raw) {\n        const c = config;\n        const lines = [\n            `model_profile=${c.model_profile}`,\n            `commit_docs=${c.commit_docs}`,\n            `branching_strategy=${c.branching_strategy}`,\n            `phase_branch_template=${c.phase_branch_template}`,\n            `milestone_branch_template=${c.milestone_branch_template}`,\n            `parallelization=${c.parallelization}`,\n            `research=${c.research}`,\n            `plan_checker=${c.plan_checker}`,\n            `verifier=${c.verifier}`,\n            `config_exists=${configExists}`,\n            `roadmap_exists=${roadmapExists}`,\n            `state_exists=${stateExists}`,\n        ];\n        process.stdout.write(lines.join('\\n'));\n        process.exit(0);\n    }\n    (0, core_js_1.output)(result);\n}\nfunction cmdStateGet(cwd, section, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    try {\n        const content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n        if (!section) {\n            (0, core_js_1.output)({ content }, raw, content);\n            return;\n        }\n        const fieldEscaped = escapeRegex(section);\n        // Check for **field:** value\n        const fieldPattern = new RegExp(`\\\\*\\\\*${fieldEscaped}:\\\\*\\\\*\\\\s*(.*)`, 'i');\n        const fieldMatch = content.match(fieldPattern);\n        if (fieldMatch) {\n            (0, core_js_1.output)({ [section]: fieldMatch[1].trim() }, raw, fieldMatch[1].trim());\n            return;\n        }\n        // Check for ## Section\n        const sectionPattern = new RegExp(`##\\\\s*${fieldEscaped}\\\\s*\\n([\\\\s\\\\S]*?)(?=\\\\n##|$)`, 'i');\n        const sectionMatch = content.match(sectionPattern);\n        if (sectionMatch) {\n            (0, core_js_1.output)({ [section]: sectionMatch[1].trim() }, raw, sectionMatch[1].trim());\n            return;\n        }\n        (0, core_js_1.output)({ error: `Section or field \"${section}\" not found` }, raw, '');\n    }\n    catch {\n        (0, core_js_1.error)('STATE.md not found');\n    }\n}\nfunction cmdStatePatch(cwd, patches, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    try {\n        let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n        const results = { updated: [], failed: [] };\n        for (const [field, value] of Object.entries(patches)) {\n            const fieldEscaped = escapeRegex(field);\n            const pattern = new RegExp(`(\\\\*\\\\*${fieldEscaped}:\\\\*\\\\*\\\\s*)(.*)`, 'i');\n            if (pattern.test(content)) {\n                content = content.replace(pattern, (_match, prefix) => `${prefix}${value}`);\n                results.updated.push(field);\n            }\n            else {\n                results.failed.push(field);\n            }\n        }\n        if (results.updated.length > 0) {\n            node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        }\n        (0, core_js_1.output)(results, raw, results.updated.length > 0 ? 'true' : 'false');\n    }\n    catch {\n        (0, core_js_1.error)('STATE.md not found');\n    }\n}\nfunction cmdStateUpdate(cwd, field, value) {\n    if (!field || value === undefined) {\n        (0, core_js_1.error)('field and value required for state update');\n    }\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    try {\n        let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n        const fieldEscaped = escapeRegex(field);\n        const pattern = new RegExp(`(\\\\*\\\\*${fieldEscaped}:\\\\*\\\\*\\\\s*)(.*)`, 'i');\n        if (pattern.test(content)) {\n            content = content.replace(pattern, (_match, prefix) => `${prefix}${value}`);\n            node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n            (0, core_js_1.output)({ updated: true });\n        }\n        else {\n            (0, core_js_1.output)({ updated: false, reason: `Field \"${field}\" not found in STATE.md` });\n        }\n    }\n    catch {\n        (0, core_js_1.output)({ updated: false, reason: 'STATE.md not found' });\n    }\n}\n// ─── State Progression Engine ────────────────────────────────────────────────\nfunction cmdStateAdvancePlan(cwd, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const currentPlan = parseInt(stateExtractField(content, 'Current Plan') ?? '', 10);\n    const totalPlans = parseInt(stateExtractField(content, 'Total Plans in Phase') ?? '', 10);\n    const today = new Date().toISOString().split('T')[0];\n    if (isNaN(currentPlan) || isNaN(totalPlans)) {\n        (0, core_js_1.output)({ error: 'Cannot parse Current Plan or Total Plans in Phase from STATE.md' }, raw);\n        return;\n    }\n    if (currentPlan >= totalPlans) {\n        content = stateReplaceField(content, 'Status', 'Phase complete — ready for verification') || content;\n        content = stateReplaceField(content, 'Last Activity', today) || content;\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ advanced: false, reason: 'last_plan', current_plan: currentPlan, total_plans: totalPlans, status: 'ready_for_verification' }, raw, 'false');\n    }\n    else {\n        const newPlan = currentPlan + 1;\n        content = stateReplaceField(content, 'Current Plan', String(newPlan)) || content;\n        content = stateReplaceField(content, 'Status', 'Ready to execute') || content;\n        content = stateReplaceField(content, 'Last Activity', today) || content;\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ advanced: true, previous_plan: currentPlan, current_plan: newPlan, total_plans: totalPlans }, raw, 'true');\n    }\n}\nfunction cmdStateRecordMetric(cwd, options, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const { phase, plan, duration, tasks, files } = options;\n    if (!phase || !plan || !duration) {\n        (0, core_js_1.output)({ error: 'phase, plan, and duration required' }, raw);\n        return;\n    }\n    const metricsPattern = /(##\\s*Performance Metrics[\\s\\S]*?\\n\\|[^\\n]+\\n\\|[-|\\s]+\\n)([\\s\\S]*?)(?=\\n##|\\n$|$)/i;\n    const metricsMatch = content.match(metricsPattern);\n    if (metricsMatch) {\n        let tableBody = metricsMatch[2].trimEnd();\n        const newRow = `| Phase ${phase} P${plan} | ${duration} | ${tasks || '-'} tasks | ${files || '-'} files |`;\n        if (tableBody.trim() === '' || tableBody.includes('None yet')) {\n            tableBody = newRow;\n        }\n        else {\n            tableBody = tableBody + '\\n' + newRow;\n        }\n        content = content.replace(metricsPattern, (_match, header) => `${header}${tableBody}\\n`);\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ recorded: true, phase, plan, duration }, raw, 'true');\n    }\n    else {\n        (0, core_js_1.output)({ recorded: false, reason: 'Performance Metrics section not found in STATE.md' }, raw, 'false');\n    }\n}\nfunction cmdStateUpdateProgress(cwd, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    let totalPlans = 0;\n    let totalSummaries = 0;\n    if (node_fs_1.default.existsSync(phasesDir)) {\n        const phaseDirs = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true })\n            .filter(e => e.isDirectory()).map(e => e.name);\n        for (const dir of phaseDirs) {\n            const files = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, dir));\n            totalPlans += files.filter(f => f.match(/-PLAN\\.md$/i)).length;\n            totalSummaries += files.filter(f => f.match(/-SUMMARY\\.md$/i)).length;\n        }\n    }\n    const percent = totalPlans > 0 ? Math.min(100, Math.round(totalSummaries / totalPlans * 100)) : 0;\n    const barWidth = 10;\n    const filled = Math.round(percent / 100 * barWidth);\n    const bar = '\\u2588'.repeat(filled) + '\\u2591'.repeat(barWidth - filled);\n    const progressStr = `[${bar}] ${percent}%`;\n    const progressPattern = /(\\*\\*Progress:\\*\\*\\s*).*/i;\n    if (progressPattern.test(content)) {\n        content = content.replace(progressPattern, (_match, prefix) => `${prefix}${progressStr}`);\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ updated: true, percent, completed: totalSummaries, total: totalPlans, bar: progressStr }, raw, progressStr);\n    }\n    else {\n        (0, core_js_1.output)({ updated: false, reason: 'Progress field not found in STATE.md' }, raw, 'false');\n    }\n}\nfunction cmdStateAddDecision(cwd, options, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    const { phase, summary, summary_file, rationale, rationale_file } = options;\n    let summaryText;\n    let rationaleText = '';\n    try {\n        summaryText = readTextArgOrFile(cwd, summary, summary_file, 'summary');\n        rationaleText = readTextArgOrFile(cwd, rationale || '', rationale_file, 'rationale') || '';\n    }\n    catch (thrown) {\n        const e = thrown;\n        (0, core_js_1.output)({ added: false, reason: e.message }, raw, 'false');\n        return;\n    }\n    if (!summaryText) {\n        (0, core_js_1.output)({ error: 'summary required' }, raw);\n        return;\n    }\n    let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const entry = `- [Phase ${phase || '?'}]: ${summaryText}${rationaleText ? ` — ${rationaleText}` : ''}`;\n    const sectionPattern = /(###?\\s*(?:Decisions|Decisions Made|Accumulated.*Decisions)\\s*\\n)([\\s\\S]*?)(?=\\n###?|\\n##[^#]|$)/i;\n    const match = content.match(sectionPattern);\n    if (match) {\n        let sectionBody = match[2];\n        sectionBody = sectionBody.replace(/None yet\\.?\\s*\\n?/gi, '').replace(/No decisions yet\\.?\\s*\\n?/gi, '');\n        sectionBody = sectionBody.trimEnd() + '\\n' + entry + '\\n';\n        content = content.replace(sectionPattern, (_match, header) => `${header}${sectionBody}`);\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ added: true, decision: entry }, raw, 'true');\n    }\n    else {\n        (0, core_js_1.output)({ added: false, reason: 'Decisions section not found in STATE.md' }, raw, 'false');\n    }\n}\nfunction cmdStateAddBlocker(cwd, text, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    const blockerOptions = typeof text === 'object' && text !== null ? text : { text: text };\n    let blockerText;\n    try {\n        blockerText = readTextArgOrFile(cwd, blockerOptions.text, blockerOptions.text_file, 'blocker');\n    }\n    catch (thrown) {\n        const e = thrown;\n        (0, core_js_1.output)({ added: false, reason: e.message }, raw, 'false');\n        return;\n    }\n    if (!blockerText) {\n        (0, core_js_1.output)({ error: 'text required' }, raw);\n        return;\n    }\n    let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const entry = `- ${blockerText}`;\n    const sectionPattern = /(###?\\s*(?:Blockers|Blockers\\/Concerns|Concerns)\\s*\\n)([\\s\\S]*?)(?=\\n###?|\\n##[^#]|$)/i;\n    const match = content.match(sectionPattern);\n    if (match) {\n        let sectionBody = match[2];\n        sectionBody = sectionBody.replace(/None\\.?\\s*\\n?/gi, '').replace(/None yet\\.?\\s*\\n?/gi, '');\n        sectionBody = sectionBody.trimEnd() + '\\n' + entry + '\\n';\n        content = content.replace(sectionPattern, (_match, header) => `${header}${sectionBody}`);\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ added: true, blocker: blockerText }, raw, 'true');\n    }\n    else {\n        (0, core_js_1.output)({ added: false, reason: 'Blockers section not found in STATE.md' }, raw, 'false');\n    }\n}\nfunction cmdStateResolveBlocker(cwd, text, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    if (!text) {\n        (0, core_js_1.output)({ error: 'text required' }, raw);\n        return;\n    }\n    let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const sectionPattern = /(###?\\s*(?:Blockers|Blockers\\/Concerns|Concerns)\\s*\\n)([\\s\\S]*?)(?=\\n###?|\\n##[^#]|$)/i;\n    const match = content.match(sectionPattern);\n    if (match) {\n        const sectionBody = match[2];\n        const lines = sectionBody.split('\\n');\n        const filtered = lines.filter(line => {\n            if (!line.startsWith('- '))\n                return true;\n            return !line.toLowerCase().includes(text.toLowerCase());\n        });\n        let newBody = filtered.join('\\n');\n        if (!newBody.trim() || !newBody.includes('- ')) {\n            newBody = 'None\\n';\n        }\n        content = content.replace(sectionPattern, (_match, header) => `${header}${newBody}`);\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ resolved: true, blocker: text }, raw, 'true');\n    }\n    else {\n        (0, core_js_1.output)({ resolved: false, reason: 'Blockers section not found in STATE.md' }, raw, 'false');\n    }\n}\nfunction cmdStateRecordSession(cwd, options, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    let content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const now = new Date().toISOString();\n    const updated = [];\n    let result = stateReplaceField(content, 'Last session', now);\n    if (result) {\n        content = result;\n        updated.push('Last session');\n    }\n    result = stateReplaceField(content, 'Last Date', now);\n    if (result) {\n        content = result;\n        updated.push('Last Date');\n    }\n    if (options.stopped_at) {\n        result = stateReplaceField(content, 'Stopped At', options.stopped_at);\n        if (!result)\n            result = stateReplaceField(content, 'Stopped at', options.stopped_at);\n        if (result) {\n            content = result;\n            updated.push('Stopped At');\n        }\n    }\n    const resumeFile = options.resume_file || 'None';\n    result = stateReplaceField(content, 'Resume File', resumeFile);\n    if (!result)\n        result = stateReplaceField(content, 'Resume file', resumeFile);\n    if (result) {\n        content = result;\n        updated.push('Resume File');\n    }\n    if (updated.length > 0) {\n        node_fs_1.default.writeFileSync(statePath, content, 'utf-8');\n        (0, core_js_1.output)({ recorded: true, updated }, raw, 'true');\n    }\n    else {\n        (0, core_js_1.output)({ recorded: false, reason: 'No session fields found in STATE.md' }, raw, 'false');\n    }\n}\nfunction cmdStateSnapshot(cwd, raw) {\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (!node_fs_1.default.existsSync(statePath)) {\n        (0, core_js_1.output)({ error: 'STATE.md not found' }, raw);\n        return;\n    }\n    const content = node_fs_1.default.readFileSync(statePath, 'utf-8');\n    const extractField = (fieldName) => {\n        const pattern = new RegExp(`\\\\*\\\\*${fieldName}:\\\\*\\\\*\\\\s*(.+)`, 'i');\n        const match = content.match(pattern);\n        return match ? match[1].trim() : null;\n    };\n    const currentPhase = extractField('Current Phase');\n    const currentPhaseName = extractField('Current Phase Name');\n    const totalPhasesRaw = extractField('Total Phases');\n    const currentPlan = extractField('Current Plan');\n    const totalPlansRaw = extractField('Total Plans in Phase');\n    const status = extractField('Status');\n    const progressRaw = extractField('Progress');\n    const lastActivity = extractField('Last Activity');\n    const lastActivityDesc = extractField('Last Activity Description');\n    const pausedAt = extractField('Paused At');\n    const totalPhases = totalPhasesRaw ? parseInt(totalPhasesRaw, 10) : null;\n    const totalPlansInPhase = totalPlansRaw ? parseInt(totalPlansRaw, 10) : null;\n    const progressPercent = progressRaw ? parseInt(progressRaw.replace('%', ''), 10) : null;\n    const decisions = [];\n    const decisionsMatch = content.match(/##\\s*Decisions Made[\\s\\S]*?\\n\\|[^\\n]+\\n\\|[-|\\s]+\\n([\\s\\S]*?)(?=\\n##|\\n$|$)/i);\n    if (decisionsMatch) {\n        const tableBody = decisionsMatch[1];\n        const rows = tableBody.trim().split('\\n').filter(r => r.includes('|'));\n        for (const row of rows) {\n            const cells = row.split('|').map(c => c.trim()).filter(Boolean);\n            if (cells.length >= 3) {\n                decisions.push({\n                    phase: cells[0],\n                    summary: cells[1],\n                    rationale: cells[2],\n                });\n            }\n        }\n    }\n    const blockers = [];\n    const blockersMatch = content.match(/##\\s*Blockers\\s*\\n([\\s\\S]*?)(?=\\n##|$)/i);\n    if (blockersMatch) {\n        const blockersSection = blockersMatch[1];\n        const items = blockersSection.match(/^-\\s+(.+)$/gm) || [];\n        for (const item of items) {\n            blockers.push(item.replace(/^-\\s+/, '').trim());\n        }\n    }\n    const session = {\n        last_date: null,\n        stopped_at: null,\n        resume_file: null,\n    };\n    const sessionMatch = content.match(/##\\s*Session\\s*\\n([\\s\\S]*?)(?=\\n##|$)/i);\n    if (sessionMatch) {\n        const sessionSection = sessionMatch[1];\n        const lastDateMatch = sessionSection.match(/\\*\\*Last Date:\\*\\*\\s*(.+)/i);\n        const stoppedAtMatch = sessionSection.match(/\\*\\*Stopped At:\\*\\*\\s*(.+)/i);\n        const resumeFileMatch = sessionSection.match(/\\*\\*Resume File:\\*\\*\\s*(.+)/i);\n        if (lastDateMatch)\n            session.last_date = lastDateMatch[1].trim();\n        if (stoppedAtMatch)\n            session.stopped_at = stoppedAtMatch[1].trim();\n        if (resumeFileMatch)\n            session.resume_file = resumeFileMatch[1].trim();\n    }\n    const snapshot = {\n        current_phase: currentPhase,\n        current_phase_name: currentPhaseName,\n        total_phases: totalPhases,\n        current_plan: currentPlan,\n        total_plans_in_phase: totalPlansInPhase,\n        status,\n        progress_percent: progressPercent,\n        last_activity: lastActivity,\n        last_activity_desc: lastActivityDesc,\n        decisions,\n        blockers,\n        paused_at: pausedAt,\n        session,\n    };\n    (0, core_js_1.output)(snapshot, raw);\n}\n//# sourceMappingURL=state.js.map","\"use strict\";\n/**\n * Roadmap — Roadmap parsing and update operations\n *\n * Ported from maxsim/bin/lib/roadmap.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdRoadmapGetPhase = cmdRoadmapGetPhase;\nexports.cmdRoadmapAnalyze = cmdRoadmapAnalyze;\nexports.cmdRoadmapUpdatePlanProgress = cmdRoadmapUpdatePlanProgress;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst core_js_1 = require(\"./core.js\");\n// ─── Roadmap commands ────────────────────────────────────────────────────────\nfunction cmdRoadmapGetPhase(cwd, phaseNum, raw) {\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        (0, core_js_1.output)({ found: false, error: 'ROADMAP.md not found' }, raw, '');\n        return;\n    }\n    try {\n        const content = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n        const escapedPhase = phaseNum.replace(/\\./g, '\\\\.');\n        const phasePattern = (0, core_js_1.getPhasePattern)(escapedPhase, 'i');\n        const headerMatch = content.match(phasePattern);\n        if (!headerMatch) {\n            const checklistPattern = new RegExp(`-\\\\s*\\\\[[ x]\\\\]\\\\s*\\\\*\\\\*Phase\\\\s+${escapedPhase}:\\\\s*([^*]+)\\\\*\\\\*`, 'i');\n            const checklistMatch = content.match(checklistPattern);\n            if (checklistMatch) {\n                (0, core_js_1.output)({\n                    found: false,\n                    phase_number: phaseNum,\n                    phase_name: checklistMatch[1].trim(),\n                    error: 'malformed_roadmap',\n                    message: `Phase ${phaseNum} exists in summary list but missing \"### Phase ${phaseNum}:\" detail section. ROADMAP.md needs both formats.`\n                }, raw, '');\n                return;\n            }\n            (0, core_js_1.output)({ found: false, phase_number: phaseNum }, raw, '');\n            return;\n        }\n        const phaseName = headerMatch[1].trim();\n        const headerIndex = headerMatch.index;\n        const restOfContent = content.slice(headerIndex);\n        const nextHeaderMatch = restOfContent.match(/\\n#{2,4}\\s+Phase\\s+\\d/i);\n        const sectionEnd = nextHeaderMatch\n            ? headerIndex + nextHeaderMatch.index\n            : content.length;\n        const section = content.slice(headerIndex, sectionEnd).trim();\n        const goalMatch = section.match(/\\*\\*Goal:\\*\\*\\s*([^\\n]+)/i);\n        const goal = goalMatch ? goalMatch[1].trim() : null;\n        const criteriaMatch = section.match(/\\*\\*Success Criteria\\*\\*[^\\n]*:\\s*\\n((?:\\s*\\d+\\.\\s*[^\\n]+\\n?)+)/i);\n        const success_criteria = criteriaMatch\n            ? criteriaMatch[1].trim().split('\\n').map(line => line.replace(/^\\s*\\d+\\.\\s*/, '').trim()).filter(Boolean)\n            : [];\n        (0, core_js_1.output)({\n            found: true,\n            phase_number: phaseNum,\n            phase_name: phaseName,\n            goal,\n            success_criteria,\n            section,\n        }, raw, section);\n    }\n    catch (e) {\n        (0, core_js_1.error)('Failed to read ROADMAP.md: ' + e.message);\n    }\n}\nfunction cmdRoadmapAnalyze(cwd, raw) {\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        (0, core_js_1.output)({ error: 'ROADMAP.md not found', milestones: [], phases: [], current_phase: null }, raw);\n        return;\n    }\n    const content = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const phasePattern = (0, core_js_1.getPhasePattern)();\n    const phases = [];\n    let match;\n    while ((match = phasePattern.exec(content)) !== null) {\n        const phaseNum = match[1];\n        const phaseName = match[2].replace(/\\(INSERTED\\)/i, '').trim();\n        const sectionStart = match.index;\n        const restOfContent = content.slice(sectionStart);\n        const nextHeader = restOfContent.match(/\\n#{2,4}\\s+Phase\\s+\\d/i);\n        const sectionEnd = nextHeader ? sectionStart + nextHeader.index : content.length;\n        const section = content.slice(sectionStart, sectionEnd);\n        const goalMatch = section.match(/\\*\\*Goal:\\*\\*\\s*([^\\n]+)/i);\n        const goal = goalMatch ? goalMatch[1].trim() : null;\n        const dependsMatch = section.match(/\\*\\*Depends on:\\*\\*\\s*([^\\n]+)/i);\n        const depends_on = dependsMatch ? dependsMatch[1].trim() : null;\n        const normalized = (0, core_js_1.normalizePhaseName)(phaseNum);\n        let diskStatus = 'no_directory';\n        let planCount = 0;\n        let summaryCount = 0;\n        let hasContext = false;\n        let hasResearch = false;\n        try {\n            const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n            const dirs = entries.filter(e => e.isDirectory()).map(e => e.name);\n            const dirMatch = dirs.find(d => d.startsWith(normalized + '-') || d === normalized);\n            if (dirMatch) {\n                const phaseFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, dirMatch));\n                planCount = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md').length;\n                summaryCount = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md').length;\n                hasContext = phaseFiles.some(f => f.endsWith('-CONTEXT.md') || f === 'CONTEXT.md');\n                hasResearch = phaseFiles.some(f => f.endsWith('-RESEARCH.md') || f === 'RESEARCH.md');\n                if (summaryCount >= planCount && planCount > 0)\n                    diskStatus = 'complete';\n                else if (summaryCount > 0)\n                    diskStatus = 'partial';\n                else if (planCount > 0)\n                    diskStatus = 'planned';\n                else if (hasResearch)\n                    diskStatus = 'researched';\n                else if (hasContext)\n                    diskStatus = 'discussed';\n                else\n                    diskStatus = 'empty';\n            }\n        }\n        catch (e) {\n            /* optional op, ignore */\n            if (process.env.MAXSIM_DEBUG)\n                console.error(e);\n        }\n        const checkboxPattern = new RegExp(`-\\\\s*\\\\[(x| )\\\\]\\\\s*.*Phase\\\\s+${phaseNum.replace('.', '\\\\.')}`, 'i');\n        const checkboxMatch = content.match(checkboxPattern);\n        const roadmapComplete = checkboxMatch ? checkboxMatch[1] === 'x' : false;\n        phases.push({\n            number: phaseNum,\n            name: phaseName,\n            goal,\n            depends_on,\n            plan_count: planCount,\n            summary_count: summaryCount,\n            has_context: hasContext,\n            has_research: hasResearch,\n            disk_status: diskStatus,\n            roadmap_complete: roadmapComplete,\n        });\n    }\n    const milestones = [];\n    const milestonePattern = /##\\s*(.*v(\\d+\\.\\d+)[^(\\n]*)/gi;\n    let mMatch;\n    while ((mMatch = milestonePattern.exec(content)) !== null) {\n        milestones.push({\n            heading: mMatch[1].trim(),\n            version: 'v' + mMatch[2],\n        });\n    }\n    const currentPhase = phases.find(p => p.disk_status === 'planned' || p.disk_status === 'partial') || null;\n    const nextPhase = phases.find(p => p.disk_status === 'empty' || p.disk_status === 'no_directory' || p.disk_status === 'discussed' || p.disk_status === 'researched') || null;\n    const totalPlans = phases.reduce((sum, p) => sum + p.plan_count, 0);\n    const totalSummaries = phases.reduce((sum, p) => sum + p.summary_count, 0);\n    const completedPhases = phases.filter(p => p.disk_status === 'complete').length;\n    const checklistPattern = /-\\s*\\[[ x]\\]\\s*\\*\\*Phase\\s+(\\d+[A-Z]?(?:\\.\\d+)?)/gi;\n    const checklistPhases = new Set();\n    let checklistMatch;\n    while ((checklistMatch = checklistPattern.exec(content)) !== null) {\n        checklistPhases.add(checklistMatch[1]);\n    }\n    const detailPhases = new Set(phases.map(p => p.number));\n    const missingDetails = [...checklistPhases].filter(p => !detailPhases.has(p));\n    const result = {\n        milestones,\n        phases,\n        phase_count: phases.length,\n        completed_phases: completedPhases,\n        total_plans: totalPlans,\n        total_summaries: totalSummaries,\n        progress_percent: totalPlans > 0 ? Math.min(100, Math.round((totalSummaries / totalPlans) * 100)) : 0,\n        current_phase: currentPhase ? currentPhase.number : null,\n        next_phase: nextPhase ? nextPhase.number : null,\n        missing_phase_details: missingDetails.length > 0 ? missingDetails : null,\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdRoadmapUpdatePlanProgress(cwd, phaseNum, raw) {\n    if (!phaseNum) {\n        (0, core_js_1.error)('phase number required for roadmap update-plan-progress');\n    }\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    const phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, phaseNum);\n    if (!phaseInfo) {\n        (0, core_js_1.error)(`Phase ${phaseNum} not found`);\n    }\n    const planCount = phaseInfo.plans.length;\n    const summaryCount = phaseInfo.summaries.length;\n    if (planCount === 0) {\n        (0, core_js_1.output)({ updated: false, reason: 'No plans found', plan_count: 0, summary_count: 0 }, raw, 'no plans');\n        return;\n    }\n    const isComplete = summaryCount >= planCount;\n    const status = isComplete ? 'Complete' : summaryCount > 0 ? 'In Progress' : 'Planned';\n    const today = new Date().toISOString().split('T')[0];\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        (0, core_js_1.output)({ updated: false, reason: 'ROADMAP.md not found', plan_count: planCount, summary_count: summaryCount }, raw, 'no roadmap');\n        return;\n    }\n    let roadmapContent = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n    const phaseEscaped = phaseNum.replace('.', '\\\\.');\n    const tablePattern = new RegExp(`(\\\\|\\\\s*${phaseEscaped}\\\\.?\\\\s[^|]*\\\\|)[^|]*(\\\\|)\\\\s*[^|]*(\\\\|)\\\\s*[^|]*(\\\\|)`, 'i');\n    const dateField = isComplete ? ` ${today} ` : '  ';\n    roadmapContent = roadmapContent.replace(tablePattern, `$1 ${summaryCount}/${planCount} $2 ${status.padEnd(11)}$3${dateField}$4`);\n    const planCountPattern = new RegExp(`(#{2,4}\\\\s*Phase\\\\s+${phaseEscaped}[\\\\s\\\\S]*?\\\\*\\\\*Plans:\\\\*\\\\*\\\\s*)[^\\\\n]+`, 'i');\n    const planCountText = isComplete\n        ? `${summaryCount}/${planCount} plans complete`\n        : `${summaryCount}/${planCount} plans executed`;\n    roadmapContent = roadmapContent.replace(planCountPattern, `$1${planCountText}`);\n    if (isComplete) {\n        const checkboxPattern = new RegExp(`(-\\\\s*\\\\[)[ ](\\\\]\\\\s*.*Phase\\\\s+${phaseEscaped}[:\\\\s][^\\\\n]*)`, 'i');\n        roadmapContent = roadmapContent.replace(checkboxPattern, `$1x$2 (completed ${today})`);\n    }\n    node_fs_1.default.writeFileSync(roadmapPath, roadmapContent, 'utf-8');\n    (0, core_js_1.output)({\n        updated: true,\n        phase: phaseNum,\n        plan_count: planCount,\n        summary_count: summaryCount,\n        status,\n        complete: isComplete,\n    }, raw, `${summaryCount}/${planCount} ${status}`);\n}\n//# sourceMappingURL=roadmap.js.map","\"use strict\";\n/**\n * Milestone — Milestone and requirements lifecycle operations\n *\n * Ported from maxsim/bin/lib/milestone.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdRequirementsMarkComplete = cmdRequirementsMarkComplete;\nexports.cmdMilestoneComplete = cmdMilestoneComplete;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst core_js_1 = require(\"./core.js\");\nconst frontmatter_js_1 = require(\"./frontmatter.js\");\n// ─── Requirements commands ───────────────────────────────────────────────────\nfunction cmdRequirementsMarkComplete(cwd, reqIdsRaw, raw) {\n    if (!reqIdsRaw || reqIdsRaw.length === 0) {\n        (0, core_js_1.error)('requirement IDs required. Usage: requirements mark-complete REQ-01,REQ-02 or REQ-01 REQ-02');\n    }\n    const reqIds = reqIdsRaw\n        .join(' ')\n        .replace(/[\\[\\]]/g, '')\n        .split(/[,\\s]+/)\n        .map(r => r.trim())\n        .filter(Boolean);\n    if (reqIds.length === 0) {\n        (0, core_js_1.error)('no valid requirement IDs found');\n    }\n    const reqPath = node_path_1.default.join(cwd, '.planning', 'REQUIREMENTS.md');\n    if (!node_fs_1.default.existsSync(reqPath)) {\n        (0, core_js_1.output)({ updated: false, reason: 'REQUIREMENTS.md not found', ids: reqIds }, raw, 'no requirements file');\n        return;\n    }\n    let reqContent = node_fs_1.default.readFileSync(reqPath, 'utf-8');\n    const updated = [];\n    const notFound = [];\n    for (const reqId of reqIds) {\n        let found = false;\n        const checkboxPattern = new RegExp(`(-\\\\s*\\\\[)[ ](\\\\]\\\\s*\\\\*\\\\*${reqId}\\\\*\\\\*)`, 'gi');\n        if (checkboxPattern.test(reqContent)) {\n            reqContent = reqContent.replace(checkboxPattern, '$1x$2');\n            found = true;\n        }\n        const tablePattern = new RegExp(`(\\\\|\\\\s*${reqId}\\\\s*\\\\|[^|]+\\\\|)\\\\s*Pending\\\\s*(\\\\|)`, 'gi');\n        if (tablePattern.test(reqContent)) {\n            reqContent = reqContent.replace(new RegExp(`(\\\\|\\\\s*${reqId}\\\\s*\\\\|[^|]+\\\\|)\\\\s*Pending\\\\s*(\\\\|)`, 'gi'), '$1 Complete $2');\n            found = true;\n        }\n        if (found) {\n            updated.push(reqId);\n        }\n        else {\n            notFound.push(reqId);\n        }\n    }\n    if (updated.length > 0) {\n        node_fs_1.default.writeFileSync(reqPath, reqContent, 'utf-8');\n    }\n    const result = {\n        updated: updated.length > 0,\n        marked_complete: updated,\n        not_found: notFound,\n        total: reqIds.length,\n    };\n    (0, core_js_1.output)(result, raw, `${updated.length}/${reqIds.length} requirements marked complete`);\n}\n// ─── Milestone commands ──────────────────────────────────────────────────────\nfunction cmdMilestoneComplete(cwd, version, options, raw) {\n    if (!version) {\n        (0, core_js_1.error)('version required for milestone complete (e.g., v1.0)');\n    }\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    const reqPath = node_path_1.default.join(cwd, '.planning', 'REQUIREMENTS.md');\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    const milestonesPath = node_path_1.default.join(cwd, '.planning', 'MILESTONES.md');\n    const archiveDir = node_path_1.default.join(cwd, '.planning', 'milestones');\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const today = new Date().toISOString().split('T')[0];\n    const milestoneName = options.name || version;\n    node_fs_1.default.mkdirSync(archiveDir, { recursive: true });\n    let phaseCount = 0;\n    let totalPlans = 0;\n    let totalTasks = 0;\n    const accomplishments = [];\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort();\n        for (const dir of dirs) {\n            phaseCount++;\n            const phaseFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, dir));\n            const plans = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md');\n            const summaries = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n            totalPlans += plans.length;\n            for (const s of summaries) {\n                try {\n                    const content = node_fs_1.default.readFileSync(node_path_1.default.join(phasesDir, dir, s), 'utf-8');\n                    const fm = (0, frontmatter_js_1.extractFrontmatter)(content);\n                    if (fm['one-liner']) {\n                        accomplishments.push(String(fm['one-liner']));\n                    }\n                    const taskMatches = content.match(/##\\s*Task\\s*\\d+/gi) || [];\n                    totalTasks += taskMatches.length;\n                }\n                catch (e) {\n                    /* optional op, ignore */\n                    if (process.env.MAXSIM_DEBUG)\n                        console.error(e);\n                }\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    // Archive ROADMAP.md\n    if (node_fs_1.default.existsSync(roadmapPath)) {\n        const roadmapContent = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n        node_fs_1.default.writeFileSync(node_path_1.default.join(archiveDir, `${version}-ROADMAP.md`), roadmapContent, 'utf-8');\n    }\n    // Archive REQUIREMENTS.md\n    if (node_fs_1.default.existsSync(reqPath)) {\n        const reqContent = node_fs_1.default.readFileSync(reqPath, 'utf-8');\n        const archiveHeader = `# Requirements Archive: ${version} ${milestoneName}\\n\\n**Archived:** ${today}\\n**Status:** SHIPPED\\n\\nFor current requirements, see \\`.planning/REQUIREMENTS.md\\`.\\n\\n---\\n\\n`;\n        node_fs_1.default.writeFileSync(node_path_1.default.join(archiveDir, `${version}-REQUIREMENTS.md`), archiveHeader + reqContent, 'utf-8');\n    }\n    // Archive audit file if exists\n    const auditFile = node_path_1.default.join(cwd, '.planning', `${version}-MILESTONE-AUDIT.md`);\n    if (node_fs_1.default.existsSync(auditFile)) {\n        node_fs_1.default.renameSync(auditFile, node_path_1.default.join(archiveDir, `${version}-MILESTONE-AUDIT.md`));\n    }\n    // Create/append MILESTONES.md entry\n    const accomplishmentsList = accomplishments.map(a => `- ${a}`).join('\\n');\n    const milestoneEntry = `## ${version} ${milestoneName} (Shipped: ${today})\\n\\n**Phases completed:** ${phaseCount} phases, ${totalPlans} plans, ${totalTasks} tasks\\n\\n**Key accomplishments:**\\n${accomplishmentsList || '- (none recorded)'}\\n\\n---\\n\\n`;\n    if (node_fs_1.default.existsSync(milestonesPath)) {\n        const existing = node_fs_1.default.readFileSync(milestonesPath, 'utf-8');\n        node_fs_1.default.writeFileSync(milestonesPath, existing + '\\n' + milestoneEntry, 'utf-8');\n    }\n    else {\n        node_fs_1.default.writeFileSync(milestonesPath, `# Milestones\\n\\n${milestoneEntry}`, 'utf-8');\n    }\n    // Update STATE.md\n    if (node_fs_1.default.existsSync(statePath)) {\n        let stateContent = node_fs_1.default.readFileSync(statePath, 'utf-8');\n        stateContent = stateContent.replace(/(\\*\\*Status:\\*\\*\\s*).*/, `$1${version} milestone complete`);\n        stateContent = stateContent.replace(/(\\*\\*Last Activity:\\*\\*\\s*).*/, `$1${today}`);\n        stateContent = stateContent.replace(/(\\*\\*Last Activity Description:\\*\\*\\s*).*/, `$1${version} milestone completed and archived`);\n        node_fs_1.default.writeFileSync(statePath, stateContent, 'utf-8');\n    }\n    // Archive phase directories if requested\n    let phasesArchived = false;\n    if (options.archivePhases) {\n        try {\n            const phaseArchiveDir = node_path_1.default.join(archiveDir, `${version}-phases`);\n            node_fs_1.default.mkdirSync(phaseArchiveDir, { recursive: true });\n            const phaseEntries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n            const phaseDirNames = phaseEntries.filter(e => e.isDirectory()).map(e => e.name);\n            for (const dir of phaseDirNames) {\n                node_fs_1.default.renameSync(node_path_1.default.join(phasesDir, dir), node_path_1.default.join(phaseArchiveDir, dir));\n            }\n            phasesArchived = phaseDirNames.length > 0;\n        }\n        catch (e) {\n            /* optional op, ignore */\n            if (process.env.MAXSIM_DEBUG)\n                console.error(e);\n        }\n    }\n    const result = {\n        version,\n        name: milestoneName,\n        date: today,\n        phases: phaseCount,\n        plans: totalPlans,\n        tasks: totalTasks,\n        accomplishments,\n        archived: {\n            roadmap: node_fs_1.default.existsSync(node_path_1.default.join(archiveDir, `${version}-ROADMAP.md`)),\n            requirements: node_fs_1.default.existsSync(node_path_1.default.join(archiveDir, `${version}-REQUIREMENTS.md`)),\n            audit: node_fs_1.default.existsSync(node_path_1.default.join(archiveDir, `${version}-MILESTONE-AUDIT.md`)),\n            phases: phasesArchived,\n        },\n        milestones_updated: true,\n        state_updated: node_fs_1.default.existsSync(statePath),\n    };\n    (0, core_js_1.output)(result, raw);\n}\n//# sourceMappingURL=milestone.js.map","const ANSI_BACKGROUND_OFFSET = 10;\n\nconst wrapAnsi16 = (offset = 0) => code => `\\u001B[${code + offset}m`;\n\nconst wrapAnsi256 = (offset = 0) => code => `\\u001B[${38 + offset};5;${code}m`;\n\nconst wrapAnsi16m = (offset = 0) => (red, green, blue) => `\\u001B[${38 + offset};2;${red};${green};${blue}m`;\n\nconst styles = {\n\tmodifier: {\n\t\treset: [0, 0],\n\t\t// 21 isn't widely supported and 22 does the same thing\n\t\tbold: [1, 22],\n\t\tdim: [2, 22],\n\t\titalic: [3, 23],\n\t\tunderline: [4, 24],\n\t\toverline: [53, 55],\n\t\tinverse: [7, 27],\n\t\thidden: [8, 28],\n\t\tstrikethrough: [9, 29],\n\t},\n\tcolor: {\n\t\tblack: [30, 39],\n\t\tred: [31, 39],\n\t\tgreen: [32, 39],\n\t\tyellow: [33, 39],\n\t\tblue: [34, 39],\n\t\tmagenta: [35, 39],\n\t\tcyan: [36, 39],\n\t\twhite: [37, 39],\n\n\t\t// Bright color\n\t\tblackBright: [90, 39],\n\t\tgray: [90, 39], // Alias of `blackBright`\n\t\tgrey: [90, 39], // Alias of `blackBright`\n\t\tredBright: [91, 39],\n\t\tgreenBright: [92, 39],\n\t\tyellowBright: [93, 39],\n\t\tblueBright: [94, 39],\n\t\tmagentaBright: [95, 39],\n\t\tcyanBright: [96, 39],\n\t\twhiteBright: [97, 39],\n\t},\n\tbgColor: {\n\t\tbgBlack: [40, 49],\n\t\tbgRed: [41, 49],\n\t\tbgGreen: [42, 49],\n\t\tbgYellow: [43, 49],\n\t\tbgBlue: [44, 49],\n\t\tbgMagenta: [45, 49],\n\t\tbgCyan: [46, 49],\n\t\tbgWhite: [47, 49],\n\n\t\t// Bright color\n\t\tbgBlackBright: [100, 49],\n\t\tbgGray: [100, 49], // Alias of `bgBlackBright`\n\t\tbgGrey: [100, 49], // Alias of `bgBlackBright`\n\t\tbgRedBright: [101, 49],\n\t\tbgGreenBright: [102, 49],\n\t\tbgYellowBright: [103, 49],\n\t\tbgBlueBright: [104, 49],\n\t\tbgMagentaBright: [105, 49],\n\t\tbgCyanBright: [106, 49],\n\t\tbgWhiteBright: [107, 49],\n\t},\n};\n\nexport const modifierNames = Object.keys(styles.modifier);\nexport const foregroundColorNames = Object.keys(styles.color);\nexport const backgroundColorNames = Object.keys(styles.bgColor);\nexport const colorNames = [...foregroundColorNames, ...backgroundColorNames];\n\nfunction assembleStyles() {\n\tconst codes = new Map();\n\n\tfor (const [groupName, group] of Object.entries(styles)) {\n\t\tfor (const [styleName, style] of Object.entries(group)) {\n\t\t\tstyles[styleName] = {\n\t\t\t\topen: `\\u001B[${style[0]}m`,\n\t\t\t\tclose: `\\u001B[${style[1]}m`,\n\t\t\t};\n\n\t\t\tgroup[styleName] = styles[styleName];\n\n\t\t\tcodes.set(style[0], style[1]);\n\t\t}\n\n\t\tObject.defineProperty(styles, groupName, {\n\t\t\tvalue: group,\n\t\t\tenumerable: false,\n\t\t});\n\t}\n\n\tObject.defineProperty(styles, 'codes', {\n\t\tvalue: codes,\n\t\tenumerable: false,\n\t});\n\n\tstyles.color.close = '\\u001B[39m';\n\tstyles.bgColor.close = '\\u001B[49m';\n\n\tstyles.color.ansi = wrapAnsi16();\n\tstyles.color.ansi256 = wrapAnsi256();\n\tstyles.color.ansi16m = wrapAnsi16m();\n\tstyles.bgColor.ansi = wrapAnsi16(ANSI_BACKGROUND_OFFSET);\n\tstyles.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);\n\tstyles.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);\n\n\t// From https://github.com/Qix-/color-convert/blob/3f0e0d4e92e235796ccb17f6e85c72094a651f49/conversions.js\n\tObject.defineProperties(styles, {\n\t\trgbToAnsi256: {\n\t\t\tvalue(red, green, blue) {\n\t\t\t\t// We use the extended greyscale palette here, with the exception of\n\t\t\t\t// black and white. normal palette only has 4 greyscale shades.\n\t\t\t\tif (red === green && green === blue) {\n\t\t\t\t\tif (red < 8) {\n\t\t\t\t\t\treturn 16;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (red > 248) {\n\t\t\t\t\t\treturn 231;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Math.round(((red - 8) / 247) * 24) + 232;\n\t\t\t\t}\n\n\t\t\t\treturn 16\n\t\t\t\t\t+ (36 * Math.round(red / 255 * 5))\n\t\t\t\t\t+ (6 * Math.round(green / 255 * 5))\n\t\t\t\t\t+ Math.round(blue / 255 * 5);\n\t\t\t},\n\t\t\tenumerable: false,\n\t\t},\n\t\thexToRgb: {\n\t\t\tvalue(hex) {\n\t\t\t\tconst matches = /[a-f\\d]{6}|[a-f\\d]{3}/i.exec(hex.toString(16));\n\t\t\t\tif (!matches) {\n\t\t\t\t\treturn [0, 0, 0];\n\t\t\t\t}\n\n\t\t\t\tlet [colorString] = matches;\n\n\t\t\t\tif (colorString.length === 3) {\n\t\t\t\t\tcolorString = [...colorString].map(character => character + character).join('');\n\t\t\t\t}\n\n\t\t\t\tconst integer = Number.parseInt(colorString, 16);\n\n\t\t\t\treturn [\n\t\t\t\t\t/* eslint-disable no-bitwise */\n\t\t\t\t\t(integer >> 16) & 0xFF,\n\t\t\t\t\t(integer >> 8) & 0xFF,\n\t\t\t\t\tinteger & 0xFF,\n\t\t\t\t\t/* eslint-enable no-bitwise */\n\t\t\t\t];\n\t\t\t},\n\t\t\tenumerable: false,\n\t\t},\n\t\thexToAnsi256: {\n\t\t\tvalue: hex => styles.rgbToAnsi256(...styles.hexToRgb(hex)),\n\t\t\tenumerable: false,\n\t\t},\n\t\tansi256ToAnsi: {\n\t\t\tvalue(code) {\n\t\t\t\tif (code < 8) {\n\t\t\t\t\treturn 30 + code;\n\t\t\t\t}\n\n\t\t\t\tif (code < 16) {\n\t\t\t\t\treturn 90 + (code - 8);\n\t\t\t\t}\n\n\t\t\t\tlet red;\n\t\t\t\tlet green;\n\t\t\t\tlet blue;\n\n\t\t\t\tif (code >= 232) {\n\t\t\t\t\tred = (((code - 232) * 10) + 8) / 255;\n\t\t\t\t\tgreen = red;\n\t\t\t\t\tblue = red;\n\t\t\t\t} else {\n\t\t\t\t\tcode -= 16;\n\n\t\t\t\t\tconst remainder = code % 36;\n\n\t\t\t\t\tred = Math.floor(code / 36) / 5;\n\t\t\t\t\tgreen = Math.floor(remainder / 6) / 5;\n\t\t\t\t\tblue = (remainder % 6) / 5;\n\t\t\t\t}\n\n\t\t\t\tconst value = Math.max(red, green, blue) * 2;\n\n\t\t\t\tif (value === 0) {\n\t\t\t\t\treturn 30;\n\t\t\t\t}\n\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tlet result = 30 + ((Math.round(blue) << 2) | (Math.round(green) << 1) | Math.round(red));\n\n\t\t\t\tif (value === 2) {\n\t\t\t\t\tresult += 60;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tenumerable: false,\n\t\t},\n\t\trgbToAnsi: {\n\t\t\tvalue: (red, green, blue) => styles.ansi256ToAnsi(styles.rgbToAnsi256(red, green, blue)),\n\t\t\tenumerable: false,\n\t\t},\n\t\thexToAnsi: {\n\t\t\tvalue: hex => styles.ansi256ToAnsi(styles.hexToAnsi256(hex)),\n\t\t\tenumerable: false,\n\t\t},\n\t});\n\n\treturn styles;\n}\n\nconst ansiStyles = assembleStyles();\n\nexport default ansiStyles;\n","import process from 'node:process';\nimport os from 'node:os';\nimport tty from 'node:tty';\n\n// From: https://github.com/sindresorhus/has-flag/blob/main/index.js\n/// function hasFlag(flag, argv = globalThis.Deno?.args ?? process.argv) {\nfunction hasFlag(flag, argv = globalThis.Deno ? globalThis.Deno.args : process.argv) {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n}\n\nconst {env} = process;\n\nlet flagForceColor;\nif (\n\thasFlag('no-color')\n\t|| hasFlag('no-colors')\n\t|| hasFlag('color=false')\n\t|| hasFlag('color=never')\n) {\n\tflagForceColor = 0;\n} else if (\n\thasFlag('color')\n\t|| hasFlag('colors')\n\t|| hasFlag('color=true')\n\t|| hasFlag('color=always')\n) {\n\tflagForceColor = 1;\n}\n\nfunction envForceColor() {\n\tif ('FORCE_COLOR' in env) {\n\t\tif (env.FORCE_COLOR === 'true') {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (env.FORCE_COLOR === 'false') {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn env.FORCE_COLOR.length === 0 ? 1 : Math.min(Number.parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3,\n\t};\n}\n\nfunction _supportsColor(haveStream, {streamIsTTY, sniffFlags = true} = {}) {\n\tconst noFlagForceColor = envForceColor();\n\tif (noFlagForceColor !== undefined) {\n\t\tflagForceColor = noFlagForceColor;\n\t}\n\n\tconst forceColor = sniffFlags ? flagForceColor : noFlagForceColor;\n\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (sniffFlags) {\n\t\tif (hasFlag('color=16m')\n\t\t\t|| hasFlag('color=full')\n\t\t\t|| hasFlag('color=truecolor')) {\n\t\t\treturn 3;\n\t\t}\n\n\t\tif (hasFlag('color=256')) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\t// Check for Azure DevOps pipelines.\n\t// Has to be above the `!streamIsTTY` check.\n\tif ('TF_BUILD' in env && 'AGENT_NAME' in env) {\n\t\treturn 1;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10\n\t\t\t&& Number(osRelease[2]) >= 10_586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14_931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['GITHUB_ACTIONS', 'GITEA_ACTIONS', 'CIRCLECI'].some(key => key in env)) {\n\t\t\treturn 3;\n\t\t}\n\n\t\tif (['TRAVIS', 'APPVEYOR', 'GITLAB_CI', 'BUILDKITE', 'DRONE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif (env.TERM === 'xterm-kitty') {\n\t\treturn 3;\n\t}\n\n\tif (env.TERM === 'xterm-ghostty') {\n\t\treturn 3;\n\t}\n\n\tif (env.TERM === 'wezterm') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = Number.parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app': {\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\t}\n\n\t\t\tcase 'Apple_Terminal': {\n\t\t\t\treturn 2;\n\t\t\t}\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nexport function createSupportsColor(stream, options = {}) {\n\tconst level = _supportsColor(stream, {\n\t\tstreamIsTTY: stream && stream.isTTY,\n\t\t...options,\n\t});\n\n\treturn translateLevel(level);\n}\n\nconst supportsColor = {\n\tstdout: createSupportsColor({isTTY: tty.isatty(1)}),\n\tstderr: createSupportsColor({isTTY: tty.isatty(2)}),\n};\n\nexport default supportsColor;\n","// TODO: When targeting Node.js 16, use `String.prototype.replaceAll`.\nexport function stringReplaceAll(string, substring, replacer) {\n\tlet index = string.indexOf(substring);\n\tif (index === -1) {\n\t\treturn string;\n\t}\n\n\tconst substringLength = substring.length;\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\treturnValue += string.slice(endIndex, index) + substring + replacer;\n\t\tendIndex = index + substringLength;\n\t\tindex = string.indexOf(substring, endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.slice(endIndex);\n\treturn returnValue;\n}\n\nexport function stringEncaseCRLFWithFirstIndex(string, prefix, postfix, index) {\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\tconst gotCR = string[index - 1] === '\\r';\n\t\treturnValue += string.slice(endIndex, (gotCR ? index - 1 : index)) + prefix + (gotCR ? '\\r\\n' : '\\n') + postfix;\n\t\tendIndex = index + 1;\n\t\tindex = string.indexOf('\\n', endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.slice(endIndex);\n\treturn returnValue;\n}\n","import ansiStyles from '#ansi-styles';\nimport supportsColor from '#supports-color';\nimport { // eslint-disable-line import/order\n\tstringReplaceAll,\n\tstringEncaseCRLFWithFirstIndex,\n} from './utilities.js';\n\nconst {stdout: stdoutColor, stderr: stderrColor} = supportsColor;\n\nconst GENERATOR = Symbol('GENERATOR');\nconst STYLER = Symbol('STYLER');\nconst IS_EMPTY = Symbol('IS_EMPTY');\n\n// `supportsColor.level` → `ansiStyles.color[name]` mapping\nconst levelMapping = [\n\t'ansi',\n\t'ansi',\n\t'ansi256',\n\t'ansi16m',\n];\n\nconst styles = Object.create(null);\n\nconst applyOptions = (object, options = {}) => {\n\tif (options.level && !(Number.isInteger(options.level) && options.level >= 0 && options.level <= 3)) {\n\t\tthrow new Error('The `level` option should be an integer from 0 to 3');\n\t}\n\n\t// Detect level if not set manually\n\tconst colorLevel = stdoutColor ? stdoutColor.level : 0;\n\tobject.level = options.level === undefined ? colorLevel : options.level;\n};\n\nexport class Chalk {\n\tconstructor(options) {\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn chalkFactory(options);\n\t}\n}\n\nconst chalkFactory = options => {\n\tconst chalk = (...strings) => strings.join(' ');\n\tapplyOptions(chalk, options);\n\n\tObject.setPrototypeOf(chalk, createChalk.prototype);\n\n\treturn chalk;\n};\n\nfunction createChalk(options) {\n\treturn chalkFactory(options);\n}\n\nObject.setPrototypeOf(createChalk.prototype, Function.prototype);\n\nfor (const [styleName, style] of Object.entries(ansiStyles)) {\n\tstyles[styleName] = {\n\t\tget() {\n\t\t\tconst builder = createBuilder(this, createStyler(style.open, style.close, this[STYLER]), this[IS_EMPTY]);\n\t\t\tObject.defineProperty(this, styleName, {value: builder});\n\t\t\treturn builder;\n\t\t},\n\t};\n}\n\nstyles.visible = {\n\tget() {\n\t\tconst builder = createBuilder(this, this[STYLER], true);\n\t\tObject.defineProperty(this, 'visible', {value: builder});\n\t\treturn builder;\n\t},\n};\n\nconst getModelAnsi = (model, level, type, ...arguments_) => {\n\tif (model === 'rgb') {\n\t\tif (level === 'ansi16m') {\n\t\t\treturn ansiStyles[type].ansi16m(...arguments_);\n\t\t}\n\n\t\tif (level === 'ansi256') {\n\t\t\treturn ansiStyles[type].ansi256(ansiStyles.rgbToAnsi256(...arguments_));\n\t\t}\n\n\t\treturn ansiStyles[type].ansi(ansiStyles.rgbToAnsi(...arguments_));\n\t}\n\n\tif (model === 'hex') {\n\t\treturn getModelAnsi('rgb', level, type, ...ansiStyles.hexToRgb(...arguments_));\n\t}\n\n\treturn ansiStyles[type][model](...arguments_);\n};\n\nconst usedModels = ['rgb', 'hex', 'ansi256'];\n\nfor (const model of usedModels) {\n\tstyles[model] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(getModelAnsi(model, levelMapping[level], 'color', ...arguments_), ansiStyles.color.close, this[STYLER]);\n\t\t\t\treturn createBuilder(this, styler, this[IS_EMPTY]);\n\t\t\t};\n\t\t},\n\t};\n\n\tconst bgModel = 'bg' + model[0].toUpperCase() + model.slice(1);\n\tstyles[bgModel] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(getModelAnsi(model, levelMapping[level], 'bgColor', ...arguments_), ansiStyles.bgColor.close, this[STYLER]);\n\t\t\t\treturn createBuilder(this, styler, this[IS_EMPTY]);\n\t\t\t};\n\t\t},\n\t};\n}\n\nconst proto = Object.defineProperties(() => {}, {\n\t...styles,\n\tlevel: {\n\t\tenumerable: true,\n\t\tget() {\n\t\t\treturn this[GENERATOR].level;\n\t\t},\n\t\tset(level) {\n\t\t\tthis[GENERATOR].level = level;\n\t\t},\n\t},\n});\n\nconst createStyler = (open, close, parent) => {\n\tlet openAll;\n\tlet closeAll;\n\tif (parent === undefined) {\n\t\topenAll = open;\n\t\tcloseAll = close;\n\t} else {\n\t\topenAll = parent.openAll + open;\n\t\tcloseAll = close + parent.closeAll;\n\t}\n\n\treturn {\n\t\topen,\n\t\tclose,\n\t\topenAll,\n\t\tcloseAll,\n\t\tparent,\n\t};\n};\n\nconst createBuilder = (self, _styler, _isEmpty) => {\n\t// Single argument is hot path, implicit coercion is faster than anything\n\t// eslint-disable-next-line no-implicit-coercion\n\tconst builder = (...arguments_) => applyStyle(builder, (arguments_.length === 1) ? ('' + arguments_[0]) : arguments_.join(' '));\n\n\t// We alter the prototype because we must return a function, but there is\n\t// no way to create a function with a different prototype\n\tObject.setPrototypeOf(builder, proto);\n\n\tbuilder[GENERATOR] = self;\n\tbuilder[STYLER] = _styler;\n\tbuilder[IS_EMPTY] = _isEmpty;\n\n\treturn builder;\n};\n\nconst applyStyle = (self, string) => {\n\tif (self.level <= 0 || !string) {\n\t\treturn self[IS_EMPTY] ? '' : string;\n\t}\n\n\tlet styler = self[STYLER];\n\n\tif (styler === undefined) {\n\t\treturn string;\n\t}\n\n\tconst {openAll, closeAll} = styler;\n\tif (string.includes('\\u001B')) {\n\t\twhile (styler !== undefined) {\n\t\t\t// Replace any instances already present with a re-opening code\n\t\t\t// otherwise only the part of the string until said closing code\n\t\t\t// will be colored, and the rest will simply be 'plain'.\n\t\t\tstring = stringReplaceAll(string, styler.close, styler.open);\n\n\t\t\tstyler = styler.parent;\n\t\t}\n\t}\n\n\t// We can move both next actions out of loop, because remaining actions in loop won't have\n\t// any/visible effect on parts we add here. Close the styling before a linebreak and reopen\n\t// after next line to fix a bleed issue on macOS: https://github.com/chalk/chalk/pull/92\n\tconst lfIndex = string.indexOf('\\n');\n\tif (lfIndex !== -1) {\n\t\tstring = stringEncaseCRLFWithFirstIndex(string, closeAll, openAll, lfIndex);\n\t}\n\n\treturn openAll + string + closeAll;\n};\n\nObject.defineProperties(createChalk.prototype, styles);\n\nconst chalk = createChalk();\nexport const chalkStderr = createChalk({level: stderrColor ? stderrColor.level : 0});\n\nexport {\n\tmodifierNames,\n\tforegroundColorNames,\n\tbackgroundColorNames,\n\tcolorNames,\n\n\t// TODO: Remove these aliases in the next major version\n\tmodifierNames as modifiers,\n\tforegroundColorNames as foregroundColors,\n\tbackgroundColorNames as backgroundColors,\n\tcolorNames as colors,\n} from './vendor/ansi-styles/index.js';\n\nexport {\n\tstdoutColor as supportsColor,\n\tstderrColor as supportsColorStderr,\n};\n\nexport default chalk;\n","\"use strict\";\n/**\n * Commands — Standalone utility commands\n *\n * Ported from maxsim/bin/lib/commands.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdGenerateSlug = cmdGenerateSlug;\nexports.cmdCurrentTimestamp = cmdCurrentTimestamp;\nexports.cmdListTodos = cmdListTodos;\nexports.cmdVerifyPathExists = cmdVerifyPathExists;\nexports.cmdHistoryDigest = cmdHistoryDigest;\nexports.cmdResolveModel = cmdResolveModel;\nexports.cmdCommit = cmdCommit;\nexports.cmdSummaryExtract = cmdSummaryExtract;\nexports.cmdWebsearch = cmdWebsearch;\nexports.cmdProgressRender = cmdProgressRender;\nexports.cmdTodoComplete = cmdTodoComplete;\nexports.cmdScaffold = cmdScaffold;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst chalk_1 = __importDefault(require(\"chalk\"));\nconst core_js_1 = require(\"./core.js\");\nconst frontmatter_js_1 = require(\"./frontmatter.js\");\n// ─── Slug generation ────────────────────────────────────────────────────────\nfunction cmdGenerateSlug(text, raw) {\n    if (!text) {\n        (0, core_js_1.error)('text required for slug generation');\n    }\n    const slug = text\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-+|-+$/g, '');\n    const result = { slug };\n    (0, core_js_1.output)(result, raw, slug);\n}\n// ─── Timestamp ──────────────────────────────────────────────────────────────\nfunction cmdCurrentTimestamp(format, raw) {\n    const now = new Date();\n    let result;\n    switch (format) {\n        case 'date':\n            result = now.toISOString().split('T')[0];\n            break;\n        case 'filename':\n            result = now.toISOString().replace(/:/g, '-').replace(/\\..+/, '');\n            break;\n        case 'full':\n        default:\n            result = now.toISOString();\n            break;\n    }\n    (0, core_js_1.output)({ timestamp: result }, raw, result);\n}\n// ─── Todos ──────────────────────────────────────────────────────────────────\nfunction cmdListTodos(cwd, area, raw) {\n    const pendingDir = node_path_1.default.join(cwd, '.planning', 'todos', 'pending');\n    let count = 0;\n    const todos = [];\n    try {\n        const files = node_fs_1.default.readdirSync(pendingDir).filter(f => f.endsWith('.md'));\n        for (const file of files) {\n            try {\n                const content = node_fs_1.default.readFileSync(node_path_1.default.join(pendingDir, file), 'utf-8');\n                const createdMatch = content.match(/^created:\\s*(.+)$/m);\n                const titleMatch = content.match(/^title:\\s*(.+)$/m);\n                const areaMatch = content.match(/^area:\\s*(.+)$/m);\n                const todoArea = areaMatch ? areaMatch[1].trim() : 'general';\n                // Apply area filter if specified\n                if (area && todoArea !== area)\n                    continue;\n                count++;\n                todos.push({\n                    file,\n                    created: createdMatch ? createdMatch[1].trim() : 'unknown',\n                    title: titleMatch ? titleMatch[1].trim() : 'Untitled',\n                    area: todoArea,\n                    path: node_path_1.default.join('.planning', 'todos', 'pending', file),\n                });\n            }\n            catch (e) {\n                /* optional op, ignore */\n                if (process.env.MAXSIM_DEBUG)\n                    console.error(e);\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const result = { count, todos };\n    (0, core_js_1.output)(result, raw, count.toString());\n}\n// ─── Path verification ──────────────────────────────────────────────────────\nfunction cmdVerifyPathExists(cwd, targetPath, raw) {\n    if (!targetPath) {\n        (0, core_js_1.error)('path required for verification');\n    }\n    const fullPath = node_path_1.default.isAbsolute(targetPath) ? targetPath : node_path_1.default.join(cwd, targetPath);\n    try {\n        const stats = node_fs_1.default.statSync(fullPath);\n        const type = stats.isDirectory() ? 'directory' : stats.isFile() ? 'file' : 'other';\n        const result = { exists: true, type };\n        (0, core_js_1.output)(result, raw, 'true');\n    }\n    catch {\n        const result = { exists: false, type: null };\n        (0, core_js_1.output)(result, raw, 'false');\n    }\n}\n// ─── History digest ─────────────────────────────────────────────────────────\nfunction cmdHistoryDigest(cwd, raw) {\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const digest = { phases: {}, decisions: [], tech_stack: new Set() };\n    // Collect all phase directories: archived + current\n    const allPhaseDirs = [];\n    // Add archived phases first (oldest milestones first)\n    const archived = (0, core_js_1.getArchivedPhaseDirs)(cwd);\n    for (const a of archived) {\n        allPhaseDirs.push({ name: a.name, fullPath: a.fullPath, milestone: a.milestone });\n    }\n    // Add current phases\n    if (node_fs_1.default.existsSync(phasesDir)) {\n        try {\n            const currentDirs = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true })\n                .filter(e => e.isDirectory())\n                .map(e => e.name)\n                .sort();\n            for (const dir of currentDirs) {\n                allPhaseDirs.push({ name: dir, fullPath: node_path_1.default.join(phasesDir, dir), milestone: null });\n            }\n        }\n        catch (e) {\n            /* optional op, ignore */\n            if (process.env.MAXSIM_DEBUG)\n                console.error(e);\n        }\n    }\n    if (allPhaseDirs.length === 0) {\n        const emptyDigest = { phases: {}, decisions: [], tech_stack: [] };\n        (0, core_js_1.output)(emptyDigest, raw);\n        return;\n    }\n    try {\n        for (const { name: dir, fullPath: dirPath } of allPhaseDirs) {\n            const summaries = node_fs_1.default.readdirSync(dirPath).filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n            for (const summary of summaries) {\n                try {\n                    const content = node_fs_1.default.readFileSync(node_path_1.default.join(dirPath, summary), 'utf-8');\n                    const fm = (0, frontmatter_js_1.extractFrontmatter)(content);\n                    const phaseNum = fm.phase || dir.split('-')[0];\n                    if (!digest.phases[phaseNum]) {\n                        digest.phases[phaseNum] = {\n                            name: fm.name || dir.split('-').slice(1).join(' ') || 'Unknown',\n                            provides: new Set(),\n                            affects: new Set(),\n                            patterns: new Set(),\n                        };\n                    }\n                    // Merge provides\n                    const depGraph = fm['dependency-graph'];\n                    if (depGraph && depGraph.provides) {\n                        depGraph.provides.forEach(p => digest.phases[phaseNum].provides.add(p));\n                    }\n                    else if (fm.provides) {\n                        fm.provides.forEach(p => digest.phases[phaseNum].provides.add(p));\n                    }\n                    // Merge affects\n                    if (depGraph && depGraph.affects) {\n                        depGraph.affects.forEach(a => digest.phases[phaseNum].affects.add(a));\n                    }\n                    // Merge patterns\n                    if (fm['patterns-established']) {\n                        fm['patterns-established'].forEach(p => digest.phases[phaseNum].patterns.add(p));\n                    }\n                    // Merge decisions\n                    if (fm['key-decisions']) {\n                        fm['key-decisions'].forEach(d => {\n                            digest.decisions.push({ phase: phaseNum, decision: d });\n                        });\n                    }\n                    // Merge tech stack\n                    const techStack = fm['tech-stack'];\n                    if (techStack && techStack.added) {\n                        techStack.added.forEach(t => digest.tech_stack.add(typeof t === 'string' ? t : t.name));\n                    }\n                }\n                catch (e) {\n                    /* optional op, ignore */\n                    if (process.env.MAXSIM_DEBUG)\n                        console.error(e);\n                }\n            }\n        }\n        // Convert Sets to Arrays for JSON output\n        const outputDigest = {\n            phases: {},\n            decisions: digest.decisions,\n            tech_stack: [...digest.tech_stack],\n        };\n        for (const [p, data] of Object.entries(digest.phases)) {\n            outputDigest.phases[p] = {\n                name: data.name,\n                provides: [...data.provides],\n                affects: [...data.affects],\n                patterns: [...data.patterns],\n            };\n        }\n        (0, core_js_1.output)(outputDigest, raw);\n    }\n    catch (e) {\n        (0, core_js_1.error)('Failed to generate history digest: ' + e.message);\n    }\n}\n// ─── Model resolution ───────────────────────────────────────────────────────\nfunction cmdResolveModel(cwd, agentType, raw) {\n    if (!agentType) {\n        (0, core_js_1.error)('agent-type required');\n    }\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const profile = config.model_profile || 'balanced';\n    const agentModels = core_js_1.MODEL_PROFILES[agentType];\n    if (!agentModels) {\n        const result = { model: 'sonnet', profile, unknown_agent: true };\n        (0, core_js_1.output)(result, raw, 'sonnet');\n        return;\n    }\n    const resolved = agentModels[profile] || agentModels['balanced'] || 'sonnet';\n    const model = resolved === 'opus' ? 'inherit' : resolved;\n    const result = { model, profile };\n    (0, core_js_1.output)(result, raw, model);\n}\n// ─── Commit ─────────────────────────────────────────────────────────────────\nfunction cmdCommit(cwd, message, files, raw, amend) {\n    if (!message && !amend) {\n        (0, core_js_1.error)('commit message required');\n    }\n    const config = (0, core_js_1.loadConfig)(cwd);\n    // Check commit_docs config\n    if (!config.commit_docs) {\n        const result = { committed: false, hash: null, reason: 'skipped_commit_docs_false' };\n        (0, core_js_1.output)(result, raw, 'skipped');\n        return;\n    }\n    // Check if .planning is gitignored\n    if ((0, core_js_1.isGitIgnored)(cwd, '.planning')) {\n        const result = { committed: false, hash: null, reason: 'skipped_gitignored' };\n        (0, core_js_1.output)(result, raw, 'skipped');\n        return;\n    }\n    // Stage files\n    const filesToStage = files && files.length > 0 ? files : ['.planning/'];\n    for (const file of filesToStage) {\n        (0, core_js_1.execGit)(cwd, ['add', file]);\n    }\n    // Commit\n    const commitArgs = amend ? ['commit', '--amend', '--no-edit'] : ['commit', '-m', message];\n    const commitResult = (0, core_js_1.execGit)(cwd, commitArgs);\n    if (commitResult.exitCode !== 0) {\n        if (commitResult.stdout.includes('nothing to commit') || commitResult.stderr.includes('nothing to commit')) {\n            const result = { committed: false, hash: null, reason: 'nothing_to_commit' };\n            (0, core_js_1.output)(result, raw, 'nothing');\n            return;\n        }\n        const result = { committed: false, hash: null, reason: 'nothing_to_commit', error: commitResult.stderr };\n        (0, core_js_1.output)(result, raw, 'nothing');\n        return;\n    }\n    // Get short hash\n    const hashResult = (0, core_js_1.execGit)(cwd, ['rev-parse', '--short', 'HEAD']);\n    const hash = hashResult.exitCode === 0 ? hashResult.stdout : null;\n    const result = { committed: true, hash, reason: 'committed' };\n    (0, core_js_1.output)(result, raw, hash || 'committed');\n}\n// ─── Summary extract ────────────────────────────────────────────────────────\nfunction cmdSummaryExtract(cwd, summaryPath, fields, raw) {\n    if (!summaryPath) {\n        (0, core_js_1.error)('summary-path required for summary-extract');\n    }\n    const fullPath = node_path_1.default.join(cwd, summaryPath);\n    if (!node_fs_1.default.existsSync(fullPath)) {\n        (0, core_js_1.output)({ error: 'File not found', path: summaryPath }, raw);\n        return;\n    }\n    const content = node_fs_1.default.readFileSync(fullPath, 'utf-8');\n    const fm = (0, frontmatter_js_1.extractFrontmatter)(content);\n    // Parse key-decisions into structured format\n    const parseDecisions = (decisionsList) => {\n        if (!decisionsList || !Array.isArray(decisionsList))\n            return [];\n        return decisionsList.map((d) => {\n            const colonIdx = d.indexOf(':');\n            if (colonIdx > 0) {\n                return {\n                    summary: d.substring(0, colonIdx).trim(),\n                    rationale: d.substring(colonIdx + 1).trim(),\n                };\n            }\n            return { summary: d, rationale: null };\n        });\n    };\n    const techStack = fm['tech-stack'];\n    // Build full result\n    const fullResult = {\n        path: summaryPath,\n        one_liner: fm['one-liner'] || null,\n        key_files: fm['key-files'] || [],\n        tech_added: (techStack && techStack.added) || [],\n        patterns: fm['patterns-established'] || [],\n        decisions: parseDecisions(fm['key-decisions']),\n        requirements_completed: fm['requirements-completed'] || [],\n    };\n    // If fields specified, filter to only those fields\n    if (fields && fields.length > 0) {\n        const filtered = { path: summaryPath };\n        for (const field of fields) {\n            if (fullResult[field] !== undefined) {\n                filtered[field] = fullResult[field];\n            }\n        }\n        (0, core_js_1.output)(filtered, raw);\n        return;\n    }\n    (0, core_js_1.output)(fullResult, raw);\n}\n// ─── Web search ─────────────────────────────────────────────────────────────\nasync function cmdWebsearch(query, options, raw) {\n    const apiKey = process.env.BRAVE_API_KEY;\n    if (!apiKey) {\n        (0, core_js_1.output)({ available: false, reason: 'BRAVE_API_KEY not set' }, raw, '');\n        return;\n    }\n    if (!query) {\n        (0, core_js_1.output)({ available: false, error: 'Query required' }, raw, '');\n        return;\n    }\n    const params = new URLSearchParams({\n        q: query,\n        count: String(options.limit || 10),\n        country: 'us',\n        search_lang: 'en',\n        text_decorations: 'false',\n    });\n    if (options.freshness) {\n        params.set('freshness', options.freshness);\n    }\n    try {\n        const response = await fetch(`https://api.search.brave.com/res/v1/web/search?${params}`, {\n            headers: {\n                Accept: 'application/json',\n                'X-Subscription-Token': apiKey,\n            },\n        });\n        if (!response.ok) {\n            (0, core_js_1.output)({ available: false, error: `API error: ${response.status}` }, raw, '');\n            return;\n        }\n        const data = (await response.json());\n        const results = (data.web?.results || []).map(r => ({\n            title: r.title,\n            url: r.url,\n            description: r.description,\n            age: r.age || null,\n        }));\n        (0, core_js_1.output)({\n            available: true,\n            query,\n            count: results.length,\n            results,\n        }, raw, results.map(r => `${r.title}\\n${r.url}\\n${r.description}`).join('\\n\\n'));\n    }\n    catch (err) {\n        (0, core_js_1.output)({ available: false, error: err.message }, raw, '');\n    }\n}\n// ─── Progress render ────────────────────────────────────────────────────────\nfunction cmdProgressRender(cwd, format, raw) {\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const milestone = (0, core_js_1.getMilestoneInfo)(cwd);\n    const phases = [];\n    let totalPlans = 0;\n    let totalSummaries = 0;\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries\n            .filter(e => e.isDirectory())\n            .map(e => e.name)\n            .sort((a, b) => {\n            const aNum = parseFloat(a.match(/^(\\d+(?:\\.\\d+)?)/)?.[1] || '0');\n            const bNum = parseFloat(b.match(/^(\\d+(?:\\.\\d+)?)/)?.[1] || '0');\n            return aNum - bNum;\n        });\n        for (const dir of dirs) {\n            const dm = dir.match(/^(\\d+(?:\\.\\d+)?)-?(.*)/);\n            const phaseNum = dm ? dm[1] : dir;\n            const phaseName = dm && dm[2] ? dm[2].replace(/-/g, ' ') : '';\n            const phaseFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, dir));\n            const planCount = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md').length;\n            const summaryCount = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md').length;\n            totalPlans += planCount;\n            totalSummaries += summaryCount;\n            let status;\n            if (planCount === 0)\n                status = 'Pending';\n            else if (summaryCount >= planCount)\n                status = 'Complete';\n            else if (summaryCount > 0)\n                status = 'In Progress';\n            else\n                status = 'Planned';\n            phases.push({ number: phaseNum, name: phaseName, plans: planCount, summaries: summaryCount, status });\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const percent = totalPlans > 0 ? Math.min(100, Math.round((totalSummaries / totalPlans) * 100)) : 0;\n    if (format === 'table') {\n        const barWidth = 10;\n        const filled = Math.round((percent / 100) * barWidth);\n        const bar = '\\u2588'.repeat(filled) + '\\u2591'.repeat(barWidth - filled);\n        let out = `# ${milestone.version} ${milestone.name}\\n\\n`;\n        out += `**Progress:** [${bar}] ${totalSummaries}/${totalPlans} plans (${percent}%)\\n\\n`;\n        out += `| Phase | Name | Plans | Status |\\n`;\n        out += `|-------|------|-------|--------|\\n`;\n        for (const p of phases) {\n            out += `| ${p.number} | ${p.name} | ${p.summaries}/${p.plans} | ${p.status} |\\n`;\n        }\n        (0, core_js_1.output)({ rendered: out }, raw, out);\n    }\n    else if (format === 'bar') {\n        const barWidth = 20;\n        const filled = Math.round((percent / 100) * barWidth);\n        const bar = '\\u2588'.repeat(filled) + '\\u2591'.repeat(barWidth - filled);\n        const text = `[${bar}] ${totalSummaries}/${totalPlans} plans (${percent}%)`;\n        (0, core_js_1.output)({ bar: text, percent, completed: totalSummaries, total: totalPlans }, raw, text);\n    }\n    else if (format === 'phase-bars') {\n        const doneCount = phases.filter(p => p.status === 'Complete').length;\n        const inProgressCount = phases.filter(p => p.status === 'In Progress').length;\n        const totalCount = phases.length;\n        const header = chalk_1.default.bold(`Milestone: ${milestone.name} — ${doneCount}/${totalCount} phases complete (${percent}%)`);\n        const lines = [header, ''];\n        for (const p of phases) {\n            const pPercent = p.plans > 0 ? Math.min(100, Math.round((p.summaries / p.plans) * 100)) : 0;\n            const barWidth = 10;\n            const filled = Math.round((pPercent / 100) * barWidth);\n            const bar = '\\u2588'.repeat(filled) + '\\u2591'.repeat(barWidth - filled);\n            const phaseLabel = `Phase ${p.number.padStart(2, '0')}`;\n            const statusLabel = p.status === 'Complete'\n                ? 'DONE'\n                : p.status === 'In Progress'\n                    ? 'IN PROGRESS'\n                    : 'PLANNED';\n            let line = `${phaseLabel} [${bar}] ${String(pPercent).padStart(3, ' ')}% — ${statusLabel}`;\n            if (p.status === 'Complete')\n                line = chalk_1.default.green(line);\n            else if (p.status === 'In Progress')\n                line = chalk_1.default.yellow(line);\n            else\n                line = chalk_1.default.dim(line);\n            lines.push(line);\n        }\n        const rendered = lines.join('\\n');\n        (0, core_js_1.output)({ rendered, done: doneCount, in_progress: inProgressCount, total: totalCount, percent }, raw, rendered);\n    }\n    else {\n        (0, core_js_1.output)({\n            milestone_version: milestone.version,\n            milestone_name: milestone.name,\n            phases,\n            total_plans: totalPlans,\n            total_summaries: totalSummaries,\n            percent,\n        }, raw);\n    }\n}\n// ─── Todo complete ──────────────────────────────────────────────────────────\nfunction cmdTodoComplete(cwd, filename, raw) {\n    if (!filename) {\n        (0, core_js_1.error)('filename required for todo complete');\n    }\n    const pendingDir = node_path_1.default.join(cwd, '.planning', 'todos', 'pending');\n    const completedDir = node_path_1.default.join(cwd, '.planning', 'todos', 'completed');\n    const sourcePath = node_path_1.default.join(pendingDir, filename);\n    if (!node_fs_1.default.existsSync(sourcePath)) {\n        (0, core_js_1.error)(`Todo not found: ${filename}`);\n    }\n    // Ensure completed directory exists\n    node_fs_1.default.mkdirSync(completedDir, { recursive: true });\n    // Read, add completion timestamp, move\n    let content = node_fs_1.default.readFileSync(sourcePath, 'utf-8');\n    const today = new Date().toISOString().split('T')[0];\n    content = `completed: ${today}\\n` + content;\n    node_fs_1.default.writeFileSync(node_path_1.default.join(completedDir, filename), content, 'utf-8');\n    node_fs_1.default.unlinkSync(sourcePath);\n    (0, core_js_1.output)({ completed: true, file: filename, date: today }, raw, 'completed');\n}\n// ─── Scaffold ───────────────────────────────────────────────────────────────\nfunction cmdScaffold(cwd, type, options, raw) {\n    const { phase, name } = options;\n    const padded = phase ? (0, core_js_1.normalizePhaseName)(phase) : '00';\n    const today = new Date().toISOString().split('T')[0];\n    // Find phase directory\n    const phaseInfo = phase ? (0, core_js_1.findPhaseInternal)(cwd, phase) : null;\n    const phaseDir = phaseInfo ? node_path_1.default.join(cwd, phaseInfo.directory) : null;\n    if (phase && !phaseDir && type !== 'phase-dir') {\n        (0, core_js_1.error)(`Phase ${phase} directory not found`);\n    }\n    let filePath;\n    let content;\n    switch (type) {\n        case 'context': {\n            filePath = node_path_1.default.join(phaseDir, `${padded}-CONTEXT.md`);\n            content = `---\\nphase: \"${padded}\"\\nname: \"${name || phaseInfo?.phase_name || 'Unnamed'}\"\\ncreated: ${today}\\n---\\n\\n# Phase ${phase}: ${name || phaseInfo?.phase_name || 'Unnamed'} — Context\\n\\n## Decisions\\n\\n_Decisions will be captured during /maxsim:discuss-phase ${phase}_\\n\\n## Discretion Areas\\n\\n_Areas where the executor can use judgment_\\n\\n## Deferred Ideas\\n\\n_Ideas to consider later_\\n`;\n            break;\n        }\n        case 'uat': {\n            filePath = node_path_1.default.join(phaseDir, `${padded}-UAT.md`);\n            content = `---\\nphase: \"${padded}\"\\nname: \"${name || phaseInfo?.phase_name || 'Unnamed'}\"\\ncreated: ${today}\\nstatus: pending\\n---\\n\\n# Phase ${phase}: ${name || phaseInfo?.phase_name || 'Unnamed'} — User Acceptance Testing\\n\\n## Test Results\\n\\n| # | Test | Status | Notes |\\n|---|------|--------|-------|\\n\\n## Summary\\n\\n_Pending UAT_\\n`;\n            break;\n        }\n        case 'verification': {\n            filePath = node_path_1.default.join(phaseDir, `${padded}-VERIFICATION.md`);\n            content = `---\\nphase: \"${padded}\"\\nname: \"${name || phaseInfo?.phase_name || 'Unnamed'}\"\\ncreated: ${today}\\nstatus: pending\\n---\\n\\n# Phase ${phase}: ${name || phaseInfo?.phase_name || 'Unnamed'} — Verification\\n\\n## Goal-Backward Verification\\n\\n**Phase Goal:** [From ROADMAP.md]\\n\\n## Checks\\n\\n| # | Requirement | Status | Evidence |\\n|---|------------|--------|----------|\\n\\n## Result\\n\\n_Pending verification_\\n`;\n            break;\n        }\n        case 'phase-dir': {\n            if (!phase || !name) {\n                (0, core_js_1.error)('phase and name required for phase-dir scaffold');\n            }\n            const slug = (0, core_js_1.generateSlugInternal)(name);\n            const dirName = `${padded}-${slug}`;\n            const phasesParent = node_path_1.default.join(cwd, '.planning', 'phases');\n            node_fs_1.default.mkdirSync(phasesParent, { recursive: true });\n            const dirPath = node_path_1.default.join(phasesParent, dirName);\n            node_fs_1.default.mkdirSync(dirPath, { recursive: true });\n            (0, core_js_1.output)({ created: true, directory: `.planning/phases/${dirName}`, path: dirPath }, raw, dirPath);\n            return;\n        }\n        default:\n            (0, core_js_1.error)(`Unknown scaffold type: ${type}. Available: context, uat, verification, phase-dir`);\n            return; // unreachable but satisfies TS\n    }\n    if (node_fs_1.default.existsSync(filePath)) {\n        (0, core_js_1.output)({ created: false, reason: 'already_exists', path: filePath }, raw, 'exists');\n        return;\n    }\n    node_fs_1.default.writeFileSync(filePath, content, 'utf-8');\n    const relPath = node_path_1.default.relative(cwd, filePath);\n    (0, core_js_1.output)({ created: true, path: relPath }, raw, relPath);\n}\n//# sourceMappingURL=commands.js.map","\"use strict\";\n/**\n * Verify — Verification suite, consistency, and health validation\n *\n * Ported from maxsim/bin/lib/verify.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdVerifySummary = cmdVerifySummary;\nexports.cmdVerifyPlanStructure = cmdVerifyPlanStructure;\nexports.cmdVerifyPhaseCompleteness = cmdVerifyPhaseCompleteness;\nexports.cmdVerifyReferences = cmdVerifyReferences;\nexports.cmdVerifyCommits = cmdVerifyCommits;\nexports.cmdVerifyArtifacts = cmdVerifyArtifacts;\nexports.cmdVerifyKeyLinks = cmdVerifyKeyLinks;\nexports.cmdValidateConsistency = cmdValidateConsistency;\nexports.cmdValidateHealth = cmdValidateHealth;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst core_js_1 = require(\"./core.js\");\nconst frontmatter_js_1 = require(\"./frontmatter.js\");\n// ─── Verify Summary ──────────────────────────────────────────────────────────\nfunction cmdVerifySummary(cwd, summaryPath, checkFileCount, raw) {\n    if (!summaryPath) {\n        (0, core_js_1.error)('summary-path required');\n    }\n    const fullPath = node_path_1.default.join(cwd, summaryPath);\n    const checkCount = checkFileCount || 2;\n    if (!node_fs_1.default.existsSync(fullPath)) {\n        const result = {\n            passed: false,\n            checks: {\n                summary_exists: false,\n                files_created: { checked: 0, found: 0, missing: [] },\n                commits_exist: false,\n                self_check: 'not_found',\n            },\n            errors: ['SUMMARY.md not found'],\n        };\n        (0, core_js_1.output)(result, raw, 'failed');\n        return;\n    }\n    const content = node_fs_1.default.readFileSync(fullPath, 'utf-8');\n    const errors = [];\n    // Spot-check files mentioned in summary\n    const mentionedFiles = new Set();\n    const patterns = [\n        /`([^`]+\\.[a-zA-Z]+)`/g,\n        /(?:Created|Modified|Added|Updated|Edited):\\s*`?([^\\s`]+\\.[a-zA-Z]+)`?/gi,\n    ];\n    for (const pattern of patterns) {\n        let m;\n        while ((m = pattern.exec(content)) !== null) {\n            const filePath = m[1];\n            if (filePath && !filePath.startsWith('http') && filePath.includes('/')) {\n                mentionedFiles.add(filePath);\n            }\n        }\n    }\n    const filesToCheck = Array.from(mentionedFiles).slice(0, checkCount);\n    const missing = [];\n    for (const file of filesToCheck) {\n        if (!node_fs_1.default.existsSync(node_path_1.default.join(cwd, file))) {\n            missing.push(file);\n        }\n    }\n    // Check commits exist\n    const commitHashPattern = /\\b[0-9a-f]{7,40}\\b/g;\n    const hashes = content.match(commitHashPattern) || [];\n    let commitsExist = false;\n    if (hashes.length > 0) {\n        for (const hash of hashes.slice(0, 3)) {\n            const result = (0, core_js_1.execGit)(cwd, ['cat-file', '-t', hash]);\n            if (result.exitCode === 0 && result.stdout === 'commit') {\n                commitsExist = true;\n                break;\n            }\n        }\n    }\n    // Self-check section\n    let selfCheck = 'not_found';\n    const selfCheckPattern = /##\\s*(?:Self[- ]?Check|Verification|Quality Check)/i;\n    if (selfCheckPattern.test(content)) {\n        const passPattern = /(?:all\\s+)?(?:pass|✓|✅|complete|succeeded)/i;\n        const failPattern = /(?:fail|✗|❌|incomplete|blocked)/i;\n        const checkSection = content.slice(content.search(selfCheckPattern));\n        if (failPattern.test(checkSection)) {\n            selfCheck = 'failed';\n        }\n        else if (passPattern.test(checkSection)) {\n            selfCheck = 'passed';\n        }\n    }\n    if (missing.length > 0)\n        errors.push('Missing files: ' + missing.join(', '));\n    if (!commitsExist && hashes.length > 0)\n        errors.push('Referenced commit hashes not found in git history');\n    if (selfCheck === 'failed')\n        errors.push('Self-check section indicates failure');\n    const checks = {\n        summary_exists: true,\n        files_created: { checked: filesToCheck.length, found: filesToCheck.length - missing.length, missing },\n        commits_exist: commitsExist,\n        self_check: selfCheck,\n    };\n    const passed = missing.length === 0 && selfCheck !== 'failed';\n    const result = { passed, checks, errors };\n    (0, core_js_1.output)(result, raw, passed ? 'passed' : 'failed');\n}\n// ─── Verify Plan Structure ───────────────────────────────────────────────────\nfunction cmdVerifyPlanStructure(cwd, filePath, raw) {\n    if (!filePath) {\n        (0, core_js_1.error)('file path required');\n    }\n    const fullPath = node_path_1.default.isAbsolute(filePath) ? filePath : node_path_1.default.join(cwd, filePath);\n    const content = (0, core_js_1.safeReadFile)(fullPath);\n    if (!content) {\n        (0, core_js_1.output)({ error: 'File not found', path: filePath }, raw);\n        return;\n    }\n    const fm = (0, frontmatter_js_1.extractFrontmatter)(content);\n    const errors = [];\n    const warnings = [];\n    const required = ['phase', 'plan', 'type', 'wave', 'depends_on', 'files_modified', 'autonomous', 'must_haves'];\n    for (const field of required) {\n        if (fm[field] === undefined)\n            errors.push(`Missing required frontmatter field: ${field}`);\n    }\n    const taskPattern = /<task[^>]*>([\\s\\S]*?)<\\/task>/g;\n    const tasks = [];\n    let taskMatch;\n    while ((taskMatch = taskPattern.exec(content)) !== null) {\n        const taskContent = taskMatch[1];\n        const nameMatch = taskContent.match(/<name>([\\s\\S]*?)<\\/name>/);\n        const taskName = nameMatch ? nameMatch[1].trim() : 'unnamed';\n        const hasFiles = /<files>/.test(taskContent);\n        const hasAction = /<action>/.test(taskContent);\n        const hasVerify = /<verify>/.test(taskContent);\n        const hasDone = /<done>/.test(taskContent);\n        if (!nameMatch)\n            errors.push('Task missing <name> element');\n        if (!hasAction)\n            errors.push(`Task '${taskName}' missing <action>`);\n        if (!hasVerify)\n            warnings.push(`Task '${taskName}' missing <verify>`);\n        if (!hasDone)\n            warnings.push(`Task '${taskName}' missing <done>`);\n        if (!hasFiles)\n            warnings.push(`Task '${taskName}' missing <files>`);\n        tasks.push({ name: taskName, hasFiles, hasAction, hasVerify, hasDone });\n    }\n    if (tasks.length === 0)\n        warnings.push('No <task> elements found');\n    if (fm.wave && parseInt(String(fm.wave)) > 1 && (!fm.depends_on || (Array.isArray(fm.depends_on) && fm.depends_on.length === 0))) {\n        warnings.push('Wave > 1 but depends_on is empty');\n    }\n    const hasCheckpoints = /<task\\s+type=[\"']?checkpoint/.test(content);\n    if (hasCheckpoints && fm.autonomous !== 'false' && fm.autonomous !== false) {\n        errors.push('Has checkpoint tasks but autonomous is not false');\n    }\n    const result = {\n        valid: errors.length === 0,\n        errors,\n        warnings,\n        task_count: tasks.length,\n        tasks,\n        frontmatter_fields: Object.keys(fm),\n    };\n    (0, core_js_1.output)(result, raw, errors.length === 0 ? 'valid' : 'invalid');\n}\n// ─── Verify Phase Completeness ───────────────────────────────────────────────\nfunction cmdVerifyPhaseCompleteness(cwd, phase, raw) {\n    if (!phase) {\n        (0, core_js_1.error)('phase required');\n    }\n    const phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, phase);\n    if (!phaseInfo) {\n        (0, core_js_1.output)({ error: 'Phase not found', phase }, raw);\n        return;\n    }\n    const errors = [];\n    const warnings = [];\n    const phaseDir = node_path_1.default.join(cwd, phaseInfo.directory);\n    let files;\n    try {\n        files = node_fs_1.default.readdirSync(phaseDir);\n    }\n    catch {\n        (0, core_js_1.output)({ error: 'Cannot read phase directory' }, raw);\n        return;\n    }\n    const plans = files.filter(f => /-PLAN\\.md$/i.test(f));\n    const summaries = files.filter(f => /-SUMMARY\\.md$/i.test(f));\n    const planIds = new Set(plans.map(p => p.replace(/-PLAN\\.md$/i, '')));\n    const summaryIds = new Set(summaries.map(s => s.replace(/-SUMMARY\\.md$/i, '')));\n    const incompletePlans = [...planIds].filter(id => !summaryIds.has(id));\n    if (incompletePlans.length > 0) {\n        errors.push(`Plans without summaries: ${incompletePlans.join(', ')}`);\n    }\n    const orphanSummaries = [...summaryIds].filter(id => !planIds.has(id));\n    if (orphanSummaries.length > 0) {\n        warnings.push(`Summaries without plans: ${orphanSummaries.join(', ')}`);\n    }\n    const result = {\n        complete: errors.length === 0,\n        phase: phaseInfo.phase_number,\n        plan_count: plans.length,\n        summary_count: summaries.length,\n        incomplete_plans: incompletePlans,\n        orphan_summaries: orphanSummaries,\n        errors,\n        warnings,\n    };\n    (0, core_js_1.output)(result, raw, errors.length === 0 ? 'complete' : 'incomplete');\n}\n// ─── Verify References ───────────────────────────────────────────────────────\nfunction cmdVerifyReferences(cwd, filePath, raw) {\n    if (!filePath) {\n        (0, core_js_1.error)('file path required');\n    }\n    const fullPath = node_path_1.default.isAbsolute(filePath) ? filePath : node_path_1.default.join(cwd, filePath);\n    const content = (0, core_js_1.safeReadFile)(fullPath);\n    if (!content) {\n        (0, core_js_1.output)({ error: 'File not found', path: filePath }, raw);\n        return;\n    }\n    const found = [];\n    const missing = [];\n    const atRefs = content.match(/@([^\\s\\n,)]+\\/[^\\s\\n,)]+)/g) || [];\n    for (const ref of atRefs) {\n        const cleanRef = ref.slice(1);\n        const resolved = cleanRef.startsWith('~/')\n            ? node_path_1.default.join(process.env.HOME || '', cleanRef.slice(2))\n            : node_path_1.default.join(cwd, cleanRef);\n        if (node_fs_1.default.existsSync(resolved)) {\n            found.push(cleanRef);\n        }\n        else {\n            missing.push(cleanRef);\n        }\n    }\n    const backtickRefs = content.match(/`([^`]+\\/[^`]+\\.[a-zA-Z]{1,10})`/g) || [];\n    for (const ref of backtickRefs) {\n        const cleanRef = ref.slice(1, -1);\n        if (cleanRef.startsWith('http') || cleanRef.includes('${') || cleanRef.includes('{{'))\n            continue;\n        if (found.includes(cleanRef) || missing.includes(cleanRef))\n            continue;\n        const resolved = node_path_1.default.join(cwd, cleanRef);\n        if (node_fs_1.default.existsSync(resolved)) {\n            found.push(cleanRef);\n        }\n        else {\n            missing.push(cleanRef);\n        }\n    }\n    const result = {\n        valid: missing.length === 0,\n        found: found.length,\n        missing,\n        total: found.length + missing.length,\n    };\n    (0, core_js_1.output)(result, raw, missing.length === 0 ? 'valid' : 'invalid');\n}\n// ─── Verify Commits ──────────────────────────────────────────────────────────\nfunction cmdVerifyCommits(cwd, hashes, raw) {\n    if (!hashes || hashes.length === 0) {\n        (0, core_js_1.error)('At least one commit hash required');\n    }\n    const valid = [];\n    const invalid = [];\n    for (const hash of hashes) {\n        const result = (0, core_js_1.execGit)(cwd, ['cat-file', '-t', hash]);\n        if (result.exitCode === 0 && result.stdout.trim() === 'commit') {\n            valid.push(hash);\n        }\n        else {\n            invalid.push(hash);\n        }\n    }\n    const commitResult = {\n        all_valid: invalid.length === 0,\n        valid,\n        invalid,\n        total: hashes.length,\n    };\n    (0, core_js_1.output)(commitResult, raw, invalid.length === 0 ? 'valid' : 'invalid');\n}\nfunction cmdVerifyArtifacts(cwd, planFilePath, raw) {\n    if (!planFilePath) {\n        (0, core_js_1.error)('plan file path required');\n    }\n    const fullPath = node_path_1.default.isAbsolute(planFilePath) ? planFilePath : node_path_1.default.join(cwd, planFilePath);\n    const content = (0, core_js_1.safeReadFile)(fullPath);\n    if (!content) {\n        (0, core_js_1.output)({ error: 'File not found', path: planFilePath }, raw);\n        return;\n    }\n    const artifacts = (0, frontmatter_js_1.parseMustHavesBlock)(content, 'artifacts');\n    if (artifacts.length === 0) {\n        (0, core_js_1.output)({ error: 'No must_haves.artifacts found in frontmatter', path: planFilePath }, raw);\n        return;\n    }\n    const results = [];\n    for (const artifact of artifacts) {\n        if (typeof artifact === 'string')\n            continue;\n        const artObj = artifact;\n        const artPath = artObj.path;\n        if (!artPath)\n            continue;\n        const artFullPath = node_path_1.default.join(cwd, artPath);\n        const exists = node_fs_1.default.existsSync(artFullPath);\n        const check = { path: artPath, exists, issues: [], passed: false };\n        if (exists) {\n            const fileContent = (0, core_js_1.safeReadFile)(artFullPath) || '';\n            const lineCount = fileContent.split('\\n').length;\n            if (artObj.min_lines && lineCount < artObj.min_lines) {\n                check.issues.push(`Only ${lineCount} lines, need ${artObj.min_lines}`);\n            }\n            if (artObj.contains && !fileContent.includes(artObj.contains)) {\n                check.issues.push(`Missing pattern: ${artObj.contains}`);\n            }\n            if (artObj.exports) {\n                const exportList = Array.isArray(artObj.exports) ? artObj.exports : [artObj.exports];\n                for (const exp of exportList) {\n                    if (!fileContent.includes(exp))\n                        check.issues.push(`Missing export: ${exp}`);\n                }\n            }\n            check.passed = check.issues.length === 0;\n        }\n        else {\n            check.issues.push('File not found');\n        }\n        results.push(check);\n    }\n    const passed = results.filter(r => r.passed).length;\n    const artifactsResult = {\n        all_passed: passed === results.length,\n        passed,\n        total: results.length,\n        artifacts: results,\n    };\n    (0, core_js_1.output)(artifactsResult, raw, passed === results.length ? 'valid' : 'invalid');\n}\nfunction cmdVerifyKeyLinks(cwd, planFilePath, raw) {\n    if (!planFilePath) {\n        (0, core_js_1.error)('plan file path required');\n    }\n    const fullPath = node_path_1.default.isAbsolute(planFilePath) ? planFilePath : node_path_1.default.join(cwd, planFilePath);\n    const content = (0, core_js_1.safeReadFile)(fullPath);\n    if (!content) {\n        (0, core_js_1.output)({ error: 'File not found', path: planFilePath }, raw);\n        return;\n    }\n    const keyLinks = (0, frontmatter_js_1.parseMustHavesBlock)(content, 'key_links');\n    if (keyLinks.length === 0) {\n        (0, core_js_1.output)({ error: 'No must_haves.key_links found in frontmatter', path: planFilePath }, raw);\n        return;\n    }\n    const results = [];\n    for (const link of keyLinks) {\n        if (typeof link === 'string')\n            continue;\n        const linkObj = link;\n        const check = {\n            from: linkObj.from || '',\n            to: linkObj.to || '',\n            via: linkObj.via || '',\n            verified: false,\n            detail: '',\n        };\n        const sourceContent = (0, core_js_1.safeReadFile)(node_path_1.default.join(cwd, linkObj.from || ''));\n        if (!sourceContent) {\n            check.detail = 'Source file not found';\n        }\n        else if (linkObj.pattern) {\n            try {\n                const regex = new RegExp(linkObj.pattern);\n                if (regex.test(sourceContent)) {\n                    check.verified = true;\n                    check.detail = 'Pattern found in source';\n                }\n                else {\n                    const targetContent = (0, core_js_1.safeReadFile)(node_path_1.default.join(cwd, linkObj.to || ''));\n                    if (targetContent && regex.test(targetContent)) {\n                        check.verified = true;\n                        check.detail = 'Pattern found in target';\n                    }\n                    else {\n                        check.detail = `Pattern \"${linkObj.pattern}\" not found in source or target`;\n                    }\n                }\n            }\n            catch {\n                check.detail = `Invalid regex pattern: ${linkObj.pattern}`;\n            }\n        }\n        else {\n            if (sourceContent.includes(linkObj.to || '')) {\n                check.verified = true;\n                check.detail = 'Target referenced in source';\n            }\n            else {\n                check.detail = 'Target not referenced in source';\n            }\n        }\n        results.push(check);\n    }\n    const verified = results.filter(r => r.verified).length;\n    const linksResult = {\n        all_verified: verified === results.length,\n        verified,\n        total: results.length,\n        links: results,\n    };\n    (0, core_js_1.output)(linksResult, raw, verified === results.length ? 'valid' : 'invalid');\n}\n// ─── Validate Consistency ────────────────────────────────────────────────────\nfunction cmdValidateConsistency(cwd, raw) {\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const errors = [];\n    const warnings = [];\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        errors.push('ROADMAP.md not found');\n        (0, core_js_1.output)({ passed: false, errors, warnings }, raw, 'failed');\n        return;\n    }\n    const roadmapContent = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n    const roadmapPhases = new Set();\n    const phasePattern = (0, core_js_1.getPhasePattern)();\n    let m;\n    while ((m = phasePattern.exec(roadmapContent)) !== null) {\n        roadmapPhases.add(m[1]);\n    }\n    const diskPhases = new Set();\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name);\n        for (const dir of dirs) {\n            const dm = dir.match(/^(\\d+[A-Z]?(?:\\.\\d+)?)/i);\n            if (dm)\n                diskPhases.add(dm[1]);\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    for (const p of roadmapPhases) {\n        if (!diskPhases.has(p) && !diskPhases.has((0, core_js_1.normalizePhaseName)(p))) {\n            warnings.push(`Phase ${p} in ROADMAP.md but no directory on disk`);\n        }\n    }\n    for (const p of diskPhases) {\n        const unpadded = String(parseInt(p, 10));\n        if (!roadmapPhases.has(p) && !roadmapPhases.has(unpadded)) {\n            warnings.push(`Phase ${p} exists on disk but not in ROADMAP.md`);\n        }\n    }\n    const integerPhases = [...diskPhases]\n        .filter(p => !p.includes('.'))\n        .map(p => parseInt(p, 10))\n        .sort((a, b) => a - b);\n    for (let i = 1; i < integerPhases.length; i++) {\n        if (integerPhases[i] !== integerPhases[i - 1] + 1) {\n            warnings.push(`Gap in phase numbering: ${integerPhases[i - 1]} → ${integerPhases[i]}`);\n        }\n    }\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort();\n        for (const dir of dirs) {\n            const phaseFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, dir));\n            const plans = phaseFiles.filter(f => f.endsWith('-PLAN.md')).sort();\n            const planNums = plans.map(p => {\n                const pm = p.match(/-(\\d{2})-PLAN\\.md$/);\n                return pm ? parseInt(pm[1], 10) : null;\n            }).filter((n) => n !== null);\n            for (let i = 1; i < planNums.length; i++) {\n                if (planNums[i] !== planNums[i - 1] + 1) {\n                    warnings.push(`Gap in plan numbering in ${dir}: plan ${planNums[i - 1]} → ${planNums[i]}`);\n                }\n            }\n            const summaries = phaseFiles.filter(f => f.endsWith('-SUMMARY.md'));\n            const planIdsSet = new Set(plans.map(p => p.replace('-PLAN.md', '')));\n            const summaryIdsSet = new Set(summaries.map(s => s.replace('-SUMMARY.md', '')));\n            for (const sid of summaryIdsSet) {\n                if (!planIdsSet.has(sid)) {\n                    warnings.push(`Summary ${sid}-SUMMARY.md in ${dir} has no matching PLAN.md`);\n                }\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name);\n        for (const dir of dirs) {\n            const phaseFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, dir));\n            const plans = phaseFiles.filter(f => f.endsWith('-PLAN.md'));\n            for (const plan of plans) {\n                const content = node_fs_1.default.readFileSync(node_path_1.default.join(phasesDir, dir, plan), 'utf-8');\n                const fm = (0, frontmatter_js_1.extractFrontmatter)(content);\n                if (!fm.wave) {\n                    warnings.push(`${dir}/${plan}: missing 'wave' in frontmatter`);\n                }\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const passed = errors.length === 0;\n    const result = { passed, errors, warnings, warning_count: warnings.length };\n    (0, core_js_1.output)(result, raw, passed ? 'passed' : 'failed');\n}\n// ─── Validate Health ─────────────────────────────────────────────────────────\nfunction cmdValidateHealth(cwd, options, raw) {\n    const planningDir = node_path_1.default.join(cwd, '.planning');\n    const projectPath = node_path_1.default.join(planningDir, 'PROJECT.md');\n    const roadmapPath = node_path_1.default.join(planningDir, 'ROADMAP.md');\n    const statePath = node_path_1.default.join(planningDir, 'STATE.md');\n    const configPath = node_path_1.default.join(planningDir, 'config.json');\n    const phasesDir = node_path_1.default.join(planningDir, 'phases');\n    const errors = [];\n    const warnings = [];\n    const info = [];\n    const repairs = [];\n    const addIssue = (severity, code, message, fix, repairable = false) => {\n        const issue = { code, message, fix, repairable };\n        if (severity === 'error')\n            errors.push(issue);\n        else if (severity === 'warning')\n            warnings.push(issue);\n        else\n            info.push(issue);\n    };\n    // Check 1: .planning/ exists\n    if (!node_fs_1.default.existsSync(planningDir)) {\n        addIssue('error', 'E001', '.planning/ directory not found', 'Run /maxsim:new-project to initialize');\n        (0, core_js_1.output)({\n            status: 'broken',\n            errors,\n            warnings,\n            info,\n            repairable_count: 0,\n        }, raw);\n        return;\n    }\n    // Check 2: PROJECT.md\n    if (!node_fs_1.default.existsSync(projectPath)) {\n        addIssue('error', 'E002', 'PROJECT.md not found', 'Run /maxsim:new-project to create');\n    }\n    else {\n        const content = node_fs_1.default.readFileSync(projectPath, 'utf-8');\n        const requiredSections = ['## What This Is', '## Core Value', '## Requirements'];\n        for (const section of requiredSections) {\n            if (!content.includes(section)) {\n                addIssue('warning', 'W001', `PROJECT.md missing section: ${section}`, 'Add section manually');\n            }\n        }\n    }\n    // Check 3: ROADMAP.md\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        addIssue('error', 'E003', 'ROADMAP.md not found', 'Run /maxsim:new-milestone to create roadmap');\n    }\n    // Check 4: STATE.md\n    if (!node_fs_1.default.existsSync(statePath)) {\n        addIssue('error', 'E004', 'STATE.md not found', 'Run /maxsim:health --repair to regenerate', true);\n        repairs.push('regenerateState');\n    }\n    else {\n        const stateContent = node_fs_1.default.readFileSync(statePath, 'utf-8');\n        const phaseRefs = [...stateContent.matchAll(/[Pp]hase\\s+(\\d+(?:\\.\\d+)?)/g)].map(m => m[1]);\n        const diskPhases = new Set();\n        try {\n            const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n            for (const e of entries) {\n                if (e.isDirectory()) {\n                    const dm = e.name.match(/^(\\d+(?:\\.\\d+)?)/);\n                    if (dm)\n                        diskPhases.add(dm[1]);\n                }\n            }\n        }\n        catch (e) {\n            /* optional op, ignore */\n            if (process.env.MAXSIM_DEBUG)\n                console.error(e);\n        }\n        for (const ref of phaseRefs) {\n            const normalizedRef = String(parseInt(ref, 10)).padStart(2, '0');\n            if (!diskPhases.has(ref) && !diskPhases.has(normalizedRef) && !diskPhases.has(String(parseInt(ref, 10)))) {\n                if (diskPhases.size > 0) {\n                    addIssue('warning', 'W002', `STATE.md references phase ${ref}, but only phases ${[...diskPhases].sort().join(', ')} exist`, 'Run /maxsim:health --repair to regenerate STATE.md', true);\n                    if (!repairs.includes('regenerateState'))\n                        repairs.push('regenerateState');\n                }\n            }\n        }\n    }\n    // Check 5: config.json\n    if (!node_fs_1.default.existsSync(configPath)) {\n        addIssue('warning', 'W003', 'config.json not found', 'Run /maxsim:health --repair to create with defaults', true);\n        repairs.push('createConfig');\n    }\n    else {\n        try {\n            const rawContent = node_fs_1.default.readFileSync(configPath, 'utf-8');\n            const parsed = JSON.parse(rawContent);\n            const validProfiles = ['quality', 'balanced', 'budget', 'tokenburner'];\n            if (parsed.model_profile && !validProfiles.includes(parsed.model_profile)) {\n                addIssue('warning', 'W004', `config.json: invalid model_profile \"${parsed.model_profile}\"`, `Valid values: ${validProfiles.join(', ')}`);\n            }\n        }\n        catch (thrown) {\n            const parseErr = thrown;\n            addIssue('error', 'E005', `config.json: JSON parse error - ${parseErr.message}`, 'Run /maxsim:health --repair to reset to defaults', true);\n            repairs.push('resetConfig');\n        }\n    }\n    // Check 6: Phase directory naming\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        for (const e of entries) {\n            if (e.isDirectory() && !e.name.match(/^\\d{2}(?:\\.\\d+)?-[\\w-]+$/)) {\n                addIssue('warning', 'W005', `Phase directory \"${e.name}\" doesn't follow NN-name format`, 'Rename to match pattern (e.g., 01-setup)');\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    // Check 7: Orphaned plans\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        for (const e of entries) {\n            if (!e.isDirectory())\n                continue;\n            const phaseFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, e.name));\n            const plans = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md');\n            const summaries = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n            const summaryBases = new Set(summaries.map(s => s.replace('-SUMMARY.md', '').replace('SUMMARY.md', '')));\n            for (const plan of plans) {\n                const planBase = plan.replace('-PLAN.md', '').replace('PLAN.md', '');\n                if (!summaryBases.has(planBase)) {\n                    addIssue('info', 'I001', `${e.name}/${plan} has no SUMMARY.md`, 'May be in progress');\n                }\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    // Check 8: Roadmap consistency\n    if (node_fs_1.default.existsSync(roadmapPath)) {\n        const roadmapContent = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n        const roadmapPhases = new Set();\n        const phasePattern = (0, core_js_1.getPhasePattern)();\n        let m;\n        while ((m = phasePattern.exec(roadmapContent)) !== null) {\n            roadmapPhases.add(m[1]);\n        }\n        const diskPhases = new Set();\n        try {\n            const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n            for (const e of entries) {\n                if (e.isDirectory()) {\n                    const dm = e.name.match(/^(\\d+[A-Z]?(?:\\.\\d+)?)/i);\n                    if (dm)\n                        diskPhases.add(dm[1]);\n                }\n            }\n        }\n        catch (e) {\n            /* optional op, ignore */\n            if (process.env.MAXSIM_DEBUG)\n                console.error(e);\n        }\n        for (const p of roadmapPhases) {\n            const padded = String(parseInt(p, 10)).padStart(2, '0');\n            if (!diskPhases.has(p) && !diskPhases.has(padded)) {\n                addIssue('warning', 'W006', `Phase ${p} in ROADMAP.md but no directory on disk`, 'Create phase directory or remove from roadmap');\n            }\n        }\n        for (const p of diskPhases) {\n            const unpadded = String(parseInt(p, 10));\n            if (!roadmapPhases.has(p) && !roadmapPhases.has(unpadded)) {\n                addIssue('warning', 'W007', `Phase ${p} exists on disk but not in ROADMAP.md`, 'Add to roadmap or remove directory');\n            }\n        }\n    }\n    // Perform repairs if requested\n    const repairActions = [];\n    if (options.repair && repairs.length > 0) {\n        for (const repair of repairs) {\n            try {\n                switch (repair) {\n                    case 'createConfig':\n                    case 'resetConfig': {\n                        const defaults = {\n                            model_profile: 'balanced',\n                            commit_docs: true,\n                            search_gitignored: false,\n                            branching_strategy: 'none',\n                            research: true,\n                            plan_checker: true,\n                            verifier: true,\n                            parallelization: true,\n                        };\n                        node_fs_1.default.writeFileSync(configPath, JSON.stringify(defaults, null, 2), 'utf-8');\n                        repairActions.push({ action: repair, success: true, path: 'config.json' });\n                        break;\n                    }\n                    case 'regenerateState': {\n                        if (node_fs_1.default.existsSync(statePath)) {\n                            const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);\n                            const backupPath = `${statePath}.bak-${timestamp}`;\n                            node_fs_1.default.copyFileSync(statePath, backupPath);\n                            repairActions.push({ action: 'backupState', success: true, path: backupPath });\n                        }\n                        const milestone = (0, core_js_1.getMilestoneInfo)(cwd);\n                        let stateContent = `# Session State\\n\\n`;\n                        stateContent += `## Project Reference\\n\\n`;\n                        stateContent += `See: .planning/PROJECT.md\\n\\n`;\n                        stateContent += `## Position\\n\\n`;\n                        stateContent += `**Milestone:** ${milestone.version} ${milestone.name}\\n`;\n                        stateContent += `**Current phase:** (determining...)\\n`;\n                        stateContent += `**Status:** Resuming\\n\\n`;\n                        stateContent += `## Session Log\\n\\n`;\n                        stateContent += `- ${new Date().toISOString().split('T')[0]}: STATE.md regenerated by /maxsim:health --repair\\n`;\n                        node_fs_1.default.writeFileSync(statePath, stateContent, 'utf-8');\n                        repairActions.push({ action: repair, success: true, path: 'STATE.md' });\n                        break;\n                    }\n                }\n            }\n            catch (thrown) {\n                const repairErr = thrown;\n                repairActions.push({ action: repair, success: false, error: repairErr.message });\n            }\n        }\n    }\n    // Determine overall status\n    let status;\n    if (errors.length > 0) {\n        status = 'broken';\n    }\n    else if (warnings.length > 0) {\n        status = 'degraded';\n    }\n    else {\n        status = 'healthy';\n    }\n    const repairableCount = errors.filter(e => e.repairable).length +\n        warnings.filter(w => w.repairable).length;\n    const result = {\n        status,\n        errors,\n        warnings,\n        info,\n        repairable_count: repairableCount,\n        repairs_performed: repairActions.length > 0 ? repairActions : undefined,\n    };\n    (0, core_js_1.output)(result, raw);\n}\n//# sourceMappingURL=verify.js.map","\"use strict\";\n/**\n * Phase — Phase CRUD, query, and lifecycle operations\n *\n * Ported from maxsim/bin/lib/phase.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdPhasesList = cmdPhasesList;\nexports.cmdPhaseNextDecimal = cmdPhaseNextDecimal;\nexports.cmdFindPhase = cmdFindPhase;\nexports.cmdPhasePlanIndex = cmdPhasePlanIndex;\nexports.cmdPhaseAdd = cmdPhaseAdd;\nexports.cmdPhaseInsert = cmdPhaseInsert;\nexports.cmdPhaseRemove = cmdPhaseRemove;\nexports.cmdPhaseComplete = cmdPhaseComplete;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst core_js_1 = require(\"./core.js\");\nconst frontmatter_js_1 = require(\"./frontmatter.js\");\n// ─── Phase list ─────────────────────────────────────────────────────────────\nfunction cmdPhasesList(cwd, options, raw) {\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const { type, phase, includeArchived } = options;\n    if (!node_fs_1.default.existsSync(phasesDir)) {\n        if (type) {\n            (0, core_js_1.output)({ files: [], count: 0 }, raw, '');\n        }\n        else {\n            (0, core_js_1.output)({ directories: [], count: 0 }, raw, '');\n        }\n        return;\n    }\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        let dirs = entries.filter(e => e.isDirectory()).map(e => e.name);\n        if (includeArchived) {\n            const archived = (0, core_js_1.getArchivedPhaseDirs)(cwd);\n            for (const a of archived) {\n                dirs.push(`${a.name} [${a.milestone}]`);\n            }\n        }\n        dirs.sort((a, b) => (0, core_js_1.comparePhaseNum)(a, b));\n        if (phase) {\n            const normalized = (0, core_js_1.normalizePhaseName)(phase);\n            const match = dirs.find(d => d.startsWith(normalized));\n            if (!match) {\n                (0, core_js_1.output)({ files: [], count: 0, phase_dir: null, error: 'Phase not found' }, raw, '');\n                return;\n            }\n            dirs = [match];\n        }\n        if (type) {\n            const files = [];\n            for (const dir of dirs) {\n                const dirPath = node_path_1.default.join(phasesDir, dir);\n                const dirFiles = node_fs_1.default.readdirSync(dirPath);\n                let filtered;\n                if (type === 'plans') {\n                    filtered = dirFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md');\n                }\n                else if (type === 'summaries') {\n                    filtered = dirFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n                }\n                else {\n                    filtered = dirFiles;\n                }\n                files.push(...filtered.sort());\n            }\n            const result = {\n                files,\n                count: files.length,\n                phase_dir: phase ? dirs[0].replace(/^\\d+(?:\\.\\d+)?-?/, '') : null,\n            };\n            (0, core_js_1.output)(result, raw, files.join('\\n'));\n            return;\n        }\n        (0, core_js_1.output)({ directories: dirs, count: dirs.length }, raw, dirs.join('\\n'));\n    }\n    catch (e) {\n        (0, core_js_1.error)('Failed to list phases: ' + e.message);\n    }\n}\n// ─── Next decimal ───────────────────────────────────────────────────────────\nfunction cmdPhaseNextDecimal(cwd, basePhase, raw) {\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const normalized = (0, core_js_1.normalizePhaseName)(basePhase);\n    if (!node_fs_1.default.existsSync(phasesDir)) {\n        (0, core_js_1.output)({ found: false, base_phase: normalized, next: `${normalized}.1`, existing: [] }, raw, `${normalized}.1`);\n        return;\n    }\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name);\n        const baseExists = dirs.some(d => d.startsWith(normalized + '-') || d === normalized);\n        const decimalPattern = new RegExp(`^${normalized}\\\\.(\\\\d+)`);\n        const existingDecimals = [];\n        for (const dir of dirs) {\n            const match = dir.match(decimalPattern);\n            if (match) {\n                existingDecimals.push(`${normalized}.${match[1]}`);\n            }\n        }\n        existingDecimals.sort((a, b) => {\n            const aNum = parseFloat(a);\n            const bNum = parseFloat(b);\n            return aNum - bNum;\n        });\n        let nextDecimal;\n        if (existingDecimals.length === 0) {\n            nextDecimal = `${normalized}.1`;\n        }\n        else {\n            const lastDecimal = existingDecimals[existingDecimals.length - 1];\n            const lastNum = parseInt(lastDecimal.split('.')[1], 10);\n            nextDecimal = `${normalized}.${lastNum + 1}`;\n        }\n        (0, core_js_1.output)({ found: baseExists, base_phase: normalized, next: nextDecimal, existing: existingDecimals }, raw, nextDecimal);\n    }\n    catch (e) {\n        (0, core_js_1.error)('Failed to calculate next decimal phase: ' + e.message);\n    }\n}\n// ─── Find phase ─────────────────────────────────────────────────────────────\nfunction cmdFindPhase(cwd, phase, raw) {\n    if (!phase) {\n        (0, core_js_1.error)('phase identifier required');\n    }\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const normalized = (0, core_js_1.normalizePhaseName)(phase);\n    const notFound = { found: false, directory: null, phase_number: null, phase_name: null, plans: [], summaries: [] };\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => (0, core_js_1.comparePhaseNum)(a, b));\n        const match = dirs.find(d => d.startsWith(normalized));\n        if (!match) {\n            (0, core_js_1.output)(notFound, raw, '');\n            return;\n        }\n        const dirMatch = match.match(/^(\\d+[A-Z]?(?:\\.\\d+)?)-?(.*)/i);\n        const phaseNumber = dirMatch ? dirMatch[1] : normalized;\n        const phaseName = dirMatch && dirMatch[2] ? dirMatch[2] : null;\n        const phaseDir = node_path_1.default.join(phasesDir, match);\n        const phaseFiles = node_fs_1.default.readdirSync(phaseDir);\n        const plans = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md').sort();\n        const summaries = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md').sort();\n        const result = {\n            found: true,\n            directory: node_path_1.default.join('.planning', 'phases', match),\n            phase_number: phaseNumber,\n            phase_name: phaseName,\n            plans,\n            summaries,\n        };\n        (0, core_js_1.output)(result, raw, result.directory);\n    }\n    catch {\n        (0, core_js_1.output)(notFound, raw, '');\n    }\n}\n// ─── Phase plan index ───────────────────────────────────────────────────────\nfunction cmdPhasePlanIndex(cwd, phase, raw) {\n    if (!phase) {\n        (0, core_js_1.error)('phase required for phase-plan-index');\n    }\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const normalized = (0, core_js_1.normalizePhaseName)(phase);\n    let phaseDir = null;\n    let phaseDirName = null;\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => (0, core_js_1.comparePhaseNum)(a, b));\n        const match = dirs.find(d => d.startsWith(normalized));\n        if (match) {\n            phaseDir = node_path_1.default.join(phasesDir, match);\n            phaseDirName = match;\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    if (!phaseDir) {\n        (0, core_js_1.output)({ phase: normalized, error: 'Phase not found', plans: [], waves: {}, incomplete: [], has_checkpoints: false }, raw);\n        return;\n    }\n    const phaseFiles = node_fs_1.default.readdirSync(phaseDir);\n    const planFiles = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md').sort();\n    const summaryFiles = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n    const completedPlanIds = new Set(summaryFiles.map(s => s.replace('-SUMMARY.md', '').replace('SUMMARY.md', '')));\n    const plans = [];\n    const waves = {};\n    const incomplete = [];\n    let hasCheckpoints = false;\n    for (const planFile of planFiles) {\n        const planId = planFile.replace('-PLAN.md', '').replace('PLAN.md', '');\n        const planPath = node_path_1.default.join(phaseDir, planFile);\n        const content = node_fs_1.default.readFileSync(planPath, 'utf-8');\n        const fm = (0, frontmatter_js_1.extractFrontmatter)(content);\n        const taskMatches = content.match(/##\\s*Task\\s*\\d+/gi) || [];\n        const taskCount = taskMatches.length;\n        const wave = parseInt(fm.wave, 10) || 1;\n        let autonomous = true;\n        if (fm.autonomous !== undefined) {\n            autonomous = fm.autonomous === 'true' || fm.autonomous === true;\n        }\n        if (!autonomous) {\n            hasCheckpoints = true;\n        }\n        let filesModified = [];\n        if (fm['files-modified']) {\n            filesModified = Array.isArray(fm['files-modified']) ? fm['files-modified'] : [fm['files-modified']];\n        }\n        const hasSummary = completedPlanIds.has(planId);\n        if (!hasSummary) {\n            incomplete.push(planId);\n        }\n        const plan = {\n            id: planId,\n            wave,\n            autonomous,\n            objective: fm.objective || null,\n            files_modified: filesModified,\n            task_count: taskCount,\n            has_summary: hasSummary,\n        };\n        plans.push(plan);\n        const waveKey = String(wave);\n        if (!waves[waveKey]) {\n            waves[waveKey] = [];\n        }\n        waves[waveKey].push(planId);\n    }\n    (0, core_js_1.output)({ phase: normalized, plans, waves, incomplete, has_checkpoints: hasCheckpoints }, raw);\n}\n// ─── Phase add ──────────────────────────────────────────────────────────────\nfunction cmdPhaseAdd(cwd, description, raw) {\n    if (!description) {\n        (0, core_js_1.error)('description required for phase add');\n    }\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        (0, core_js_1.error)('ROADMAP.md not found');\n    }\n    const content = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n    const slug = (0, core_js_1.generateSlugInternal)(description);\n    const phasePattern = (0, core_js_1.getPhasePattern)();\n    let maxPhase = 0;\n    let m;\n    while ((m = phasePattern.exec(content)) !== null) {\n        const num = parseInt(m[1], 10);\n        if (num > maxPhase)\n            maxPhase = num;\n    }\n    const newPhaseNum = maxPhase + 1;\n    const paddedNum = String(newPhaseNum).padStart(2, '0');\n    const dirName = `${paddedNum}-${slug}`;\n    const dirPath = node_path_1.default.join(cwd, '.planning', 'phases', dirName);\n    node_fs_1.default.mkdirSync(dirPath, { recursive: true });\n    node_fs_1.default.writeFileSync(node_path_1.default.join(dirPath, '.gitkeep'), '');\n    const phaseEntry = `\\n### Phase ${newPhaseNum}: ${description}\\n\\n**Goal:** [To be planned]\\n**Requirements**: TBD\\n**Depends on:** Phase ${maxPhase}\\n**Plans:** 0 plans\\n\\nPlans:\\n- [ ] TBD (run /maxsim:plan-phase ${newPhaseNum} to break down)\\n`;\n    let updatedContent;\n    const lastSeparator = content.lastIndexOf('\\n---');\n    if (lastSeparator > 0) {\n        updatedContent = content.slice(0, lastSeparator) + phaseEntry + content.slice(lastSeparator);\n    }\n    else {\n        updatedContent = content + phaseEntry;\n    }\n    node_fs_1.default.writeFileSync(roadmapPath, updatedContent, 'utf-8');\n    (0, core_js_1.output)({ phase_number: newPhaseNum, padded: paddedNum, name: description, slug, directory: `.planning/phases/${dirName}` }, raw, paddedNum);\n}\n// ─── Phase insert ───────────────────────────────────────────────────────────\nfunction cmdPhaseInsert(cwd, afterPhase, description, raw) {\n    if (!afterPhase || !description) {\n        (0, core_js_1.error)('after-phase and description required for phase insert');\n    }\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        (0, core_js_1.error)('ROADMAP.md not found');\n    }\n    const content = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n    const slug = (0, core_js_1.generateSlugInternal)(description);\n    const normalizedAfter = (0, core_js_1.normalizePhaseName)(afterPhase);\n    const unpadded = normalizedAfter.replace(/^0+/, '');\n    const afterPhaseEscaped = unpadded.replace(/\\./g, '\\\\.');\n    const targetPattern = (0, core_js_1.getPhasePattern)(afterPhaseEscaped, 'i');\n    if (!targetPattern.test(content)) {\n        (0, core_js_1.error)(`Phase ${afterPhase} not found in ROADMAP.md`);\n    }\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const normalizedBase = (0, core_js_1.normalizePhaseName)(afterPhase);\n    const existingDecimals = [];\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name);\n        const decimalPattern = new RegExp(`^${normalizedBase}\\\\.(\\\\d+)`);\n        for (const dir of dirs) {\n            const dm = dir.match(decimalPattern);\n            if (dm)\n                existingDecimals.push(parseInt(dm[1], 10));\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const nextDecimal = existingDecimals.length === 0 ? 1 : Math.max(...existingDecimals) + 1;\n    const decimalPhase = `${normalizedBase}.${nextDecimal}`;\n    const dirName = `${decimalPhase}-${slug}`;\n    const dirPath = node_path_1.default.join(cwd, '.planning', 'phases', dirName);\n    node_fs_1.default.mkdirSync(dirPath, { recursive: true });\n    node_fs_1.default.writeFileSync(node_path_1.default.join(dirPath, '.gitkeep'), '');\n    const phaseEntry = `\\n### Phase ${decimalPhase}: ${description} (INSERTED)\\n\\n**Goal:** [Urgent work - to be planned]\\n**Requirements**: TBD\\n**Depends on:** Phase ${afterPhase}\\n**Plans:** 0 plans\\n\\nPlans:\\n- [ ] TBD (run /maxsim:plan-phase ${decimalPhase} to break down)\\n`;\n    const headerPattern = new RegExp(`(#{2,4}\\\\s*Phase\\\\s+0*${afterPhaseEscaped}:[^\\\\n]*\\\\n)`, 'i');\n    const headerMatch = content.match(headerPattern);\n    if (!headerMatch) {\n        (0, core_js_1.error)(`Could not find Phase ${afterPhase} header`);\n    }\n    const headerIdx = content.indexOf(headerMatch[0]);\n    const afterHeader = content.slice(headerIdx + headerMatch[0].length);\n    const nextPhaseMatch = afterHeader.match(/\\n#{2,4}\\s+Phase\\s+\\d/i);\n    let insertIdx;\n    if (nextPhaseMatch) {\n        insertIdx = headerIdx + headerMatch[0].length + nextPhaseMatch.index;\n    }\n    else {\n        insertIdx = content.length;\n    }\n    const updatedContent = content.slice(0, insertIdx) + phaseEntry + content.slice(insertIdx);\n    node_fs_1.default.writeFileSync(roadmapPath, updatedContent, 'utf-8');\n    (0, core_js_1.output)({ phase_number: decimalPhase, after_phase: afterPhase, name: description, slug, directory: `.planning/phases/${dirName}` }, raw, decimalPhase);\n}\n// ─── Phase remove ───────────────────────────────────────────────────────────\nfunction cmdPhaseRemove(cwd, targetPhase, options, raw) {\n    if (!targetPhase) {\n        (0, core_js_1.error)('phase number required for phase remove');\n    }\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const force = options.force || false;\n    if (!node_fs_1.default.existsSync(roadmapPath)) {\n        (0, core_js_1.error)('ROADMAP.md not found');\n    }\n    const normalized = (0, core_js_1.normalizePhaseName)(targetPhase);\n    const isDecimal = targetPhase.includes('.');\n    let targetDir = null;\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => (0, core_js_1.comparePhaseNum)(a, b));\n        targetDir = dirs.find(d => d.startsWith(normalized + '-') || d === normalized) || null;\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    if (targetDir && !force) {\n        const targetPath = node_path_1.default.join(phasesDir, targetDir);\n        const files = node_fs_1.default.readdirSync(targetPath);\n        const summaries = files.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n        if (summaries.length > 0) {\n            (0, core_js_1.error)(`Phase ${targetPhase} has ${summaries.length} executed plan(s). Use --force to remove anyway.`);\n        }\n    }\n    if (targetDir) {\n        node_fs_1.default.rmSync(node_path_1.default.join(phasesDir, targetDir), { recursive: true, force: true });\n    }\n    const renamedDirs = [];\n    const renamedFiles = [];\n    if (isDecimal) {\n        const baseParts = normalized.split('.');\n        const baseInt = baseParts[0];\n        const removedDecimal = parseInt(baseParts[1], 10);\n        try {\n            const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n            const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => (0, core_js_1.comparePhaseNum)(a, b));\n            const decPattern = new RegExp(`^${baseInt}\\\\.(\\\\d+)-(.+)$`);\n            const toRename = [];\n            for (const dir of dirs) {\n                const dm = dir.match(decPattern);\n                if (dm && parseInt(dm[1], 10) > removedDecimal) {\n                    toRename.push({ dir, oldDecimal: parseInt(dm[1], 10), slug: dm[2] });\n                }\n            }\n            toRename.sort((a, b) => b.oldDecimal - a.oldDecimal);\n            for (const item of toRename) {\n                const newDecimal = item.oldDecimal - 1;\n                const oldPhaseId = `${baseInt}.${item.oldDecimal}`;\n                const newPhaseId = `${baseInt}.${newDecimal}`;\n                const newDirName = `${baseInt}.${newDecimal}-${item.slug}`;\n                node_fs_1.default.renameSync(node_path_1.default.join(phasesDir, item.dir), node_path_1.default.join(phasesDir, newDirName));\n                renamedDirs.push({ from: item.dir, to: newDirName });\n                const dirFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, newDirName));\n                for (const f of dirFiles) {\n                    if (f.includes(oldPhaseId)) {\n                        const newFileName = f.replace(oldPhaseId, newPhaseId);\n                        node_fs_1.default.renameSync(node_path_1.default.join(phasesDir, newDirName, f), node_path_1.default.join(phasesDir, newDirName, newFileName));\n                        renamedFiles.push({ from: f, to: newFileName });\n                    }\n                }\n            }\n        }\n        catch (e) {\n            /* optional op, ignore */\n            if (process.env.MAXSIM_DEBUG)\n                console.error(e);\n        }\n    }\n    else {\n        const removedInt = parseInt(normalized, 10);\n        try {\n            const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n            const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => (0, core_js_1.comparePhaseNum)(a, b));\n            const toRename = [];\n            for (const dir of dirs) {\n                const dm = dir.match(/^(\\d+)([A-Z])?(?:\\.(\\d+))?-(.+)$/i);\n                if (!dm)\n                    continue;\n                const dirInt = parseInt(dm[1], 10);\n                if (dirInt > removedInt) {\n                    toRename.push({\n                        dir,\n                        oldInt: dirInt,\n                        letter: dm[2] ? dm[2].toUpperCase() : '',\n                        decimal: dm[3] ? parseInt(dm[3], 10) : null,\n                        slug: dm[4],\n                    });\n                }\n            }\n            toRename.sort((a, b) => {\n                if (a.oldInt !== b.oldInt)\n                    return b.oldInt - a.oldInt;\n                return (b.decimal || 0) - (a.decimal || 0);\n            });\n            for (const item of toRename) {\n                const newInt = item.oldInt - 1;\n                const newPadded = String(newInt).padStart(2, '0');\n                const oldPadded = String(item.oldInt).padStart(2, '0');\n                const letterSuffix = item.letter || '';\n                const decimalSuffix = item.decimal !== null ? `.${item.decimal}` : '';\n                const oldPrefix = `${oldPadded}${letterSuffix}${decimalSuffix}`;\n                const newPrefix = `${newPadded}${letterSuffix}${decimalSuffix}`;\n                const newDirName = `${newPrefix}-${item.slug}`;\n                node_fs_1.default.renameSync(node_path_1.default.join(phasesDir, item.dir), node_path_1.default.join(phasesDir, newDirName));\n                renamedDirs.push({ from: item.dir, to: newDirName });\n                const dirFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, newDirName));\n                for (const f of dirFiles) {\n                    if (f.startsWith(oldPrefix)) {\n                        const newFileName = newPrefix + f.slice(oldPrefix.length);\n                        node_fs_1.default.renameSync(node_path_1.default.join(phasesDir, newDirName, f), node_path_1.default.join(phasesDir, newDirName, newFileName));\n                        renamedFiles.push({ from: f, to: newFileName });\n                    }\n                }\n            }\n        }\n        catch (e) {\n            /* optional op, ignore */\n            if (process.env.MAXSIM_DEBUG)\n                console.error(e);\n        }\n    }\n    // Update ROADMAP.md\n    let roadmapContent = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n    const targetEscaped = targetPhase.replace(/\\./g, '\\\\.');\n    const sectionPattern = new RegExp(`\\\\n?#{2,4}\\\\s*Phase\\\\s+${targetEscaped}\\\\s*:[\\\\s\\\\S]*?(?=\\\\n#{2,4}\\\\s+Phase\\\\s+\\\\d|$)`, 'i');\n    roadmapContent = roadmapContent.replace(sectionPattern, '');\n    const checkboxPattern = new RegExp(`\\\\n?-\\\\s*\\\\[[ x]\\\\]\\\\s*.*Phase\\\\s+${targetEscaped}[:\\\\s][^\\\\n]*`, 'gi');\n    roadmapContent = roadmapContent.replace(checkboxPattern, '');\n    const tableRowPattern = new RegExp(`\\\\n?\\\\|\\\\s*${targetEscaped}\\\\.?\\\\s[^|]*\\\\|[^\\\\n]*`, 'gi');\n    roadmapContent = roadmapContent.replace(tableRowPattern, '');\n    if (!isDecimal) {\n        const removedInt = parseInt(normalized, 10);\n        const maxPhase = 99;\n        for (let oldNum = maxPhase; oldNum > removedInt; oldNum--) {\n            const newNum = oldNum - 1;\n            const oldStr = String(oldNum);\n            const newStr = String(newNum);\n            const oldPad = oldStr.padStart(2, '0');\n            const newPad = newStr.padStart(2, '0');\n            roadmapContent = roadmapContent.replace(new RegExp(`(#{2,4}\\\\s*Phase\\\\s+)${oldStr}(\\\\s*:)`, 'gi'), `$1${newStr}$2`);\n            roadmapContent = roadmapContent.replace(new RegExp(`(Phase\\\\s+)${oldStr}([:\\\\s])`, 'g'), `$1${newStr}$2`);\n            roadmapContent = roadmapContent.replace(new RegExp(`${oldPad}-(\\\\d{2})`, 'g'), `${newPad}-$1`);\n            roadmapContent = roadmapContent.replace(new RegExp(`(\\\\|\\\\s*)${oldStr}\\\\.\\\\s`, 'g'), `$1${newStr}. `);\n            roadmapContent = roadmapContent.replace(new RegExp(`(Depends on:\\\\*\\\\*\\\\s*Phase\\\\s+)${oldStr}\\\\b`, 'gi'), `$1${newStr}`);\n        }\n    }\n    node_fs_1.default.writeFileSync(roadmapPath, roadmapContent, 'utf-8');\n    // Update STATE.md phase count\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    if (node_fs_1.default.existsSync(statePath)) {\n        let stateContent = node_fs_1.default.readFileSync(statePath, 'utf-8');\n        const totalPattern = /(\\*\\*Total Phases:\\*\\*\\s*)(\\d+)/;\n        const totalMatch = stateContent.match(totalPattern);\n        if (totalMatch) {\n            const oldTotal = parseInt(totalMatch[2], 10);\n            stateContent = stateContent.replace(totalPattern, `$1${oldTotal - 1}`);\n        }\n        const ofPattern = /(\\bof\\s+)(\\d+)(\\s*(?:\\(|phases?))/i;\n        const ofMatch = stateContent.match(ofPattern);\n        if (ofMatch) {\n            const oldTotal = parseInt(ofMatch[2], 10);\n            stateContent = stateContent.replace(ofPattern, `$1${oldTotal - 1}$3`);\n        }\n        node_fs_1.default.writeFileSync(statePath, stateContent, 'utf-8');\n    }\n    (0, core_js_1.output)({\n        removed: targetPhase,\n        directory_deleted: targetDir || null,\n        renamed_directories: renamedDirs,\n        renamed_files: renamedFiles,\n        roadmap_updated: true,\n        state_updated: node_fs_1.default.existsSync(statePath),\n    }, raw);\n}\n// ─── Phase complete ─────────────────────────────────────────────────────────\nfunction cmdPhaseComplete(cwd, phaseNum, raw) {\n    if (!phaseNum) {\n        (0, core_js_1.error)('phase number required for phase complete');\n    }\n    const roadmapPath = node_path_1.default.join(cwd, '.planning', 'ROADMAP.md');\n    const statePath = node_path_1.default.join(cwd, '.planning', 'STATE.md');\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const normalized = (0, core_js_1.normalizePhaseName)(phaseNum);\n    const today = new Date().toISOString().split('T')[0];\n    const phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, phaseNum);\n    if (!phaseInfo) {\n        (0, core_js_1.error)(`Phase ${phaseNum} not found`);\n    }\n    const planCount = phaseInfo.plans.length;\n    const summaryCount = phaseInfo.summaries.length;\n    if (node_fs_1.default.existsSync(roadmapPath)) {\n        let roadmapContent = node_fs_1.default.readFileSync(roadmapPath, 'utf-8');\n        const checkboxPattern = new RegExp(`(-\\\\s*\\\\[)[ ](\\\\]\\\\s*.*Phase\\\\s+${phaseNum.replace('.', '\\\\.')}[:\\\\s][^\\\\n]*)`, 'i');\n        roadmapContent = roadmapContent.replace(checkboxPattern, `$1x$2 (completed ${today})`);\n        const phaseEscaped = phaseNum.replace('.', '\\\\.');\n        const tablePattern = new RegExp(`(\\\\|\\\\s*${phaseEscaped}\\\\.?\\\\s[^|]*\\\\|[^|]*\\\\|)\\\\s*[^|]*(\\\\|)\\\\s*[^|]*(\\\\|)`, 'i');\n        roadmapContent = roadmapContent.replace(tablePattern, `$1 Complete    $2 ${today} $3`);\n        const planCountPattern = new RegExp(`(#{2,4}\\\\s*Phase\\\\s+${phaseEscaped}[\\\\s\\\\S]*?\\\\*\\\\*Plans:\\\\*\\\\*\\\\s*)[^\\\\n]+`, 'i');\n        roadmapContent = roadmapContent.replace(planCountPattern, `$1${summaryCount}/${planCount} plans complete`);\n        node_fs_1.default.writeFileSync(roadmapPath, roadmapContent, 'utf-8');\n        // Update REQUIREMENTS.md\n        const reqPath = node_path_1.default.join(cwd, '.planning', 'REQUIREMENTS.md');\n        if (node_fs_1.default.existsSync(reqPath)) {\n            const reqMatch = roadmapContent.match(new RegExp(`Phase\\\\s+${phaseNum.replace('.', '\\\\.')}[\\\\s\\\\S]*?\\\\*\\\\*Requirements:\\\\*\\\\*\\\\s*([^\\\\n]+)`, 'i'));\n            if (reqMatch) {\n                const reqIds = reqMatch[1].replace(/[\\[\\]]/g, '').split(/[,\\s]+/).map(r => r.trim()).filter(Boolean);\n                let reqContent = node_fs_1.default.readFileSync(reqPath, 'utf-8');\n                for (const reqId of reqIds) {\n                    reqContent = reqContent.replace(new RegExp(`(-\\\\s*\\\\[)[ ](\\\\]\\\\s*\\\\*\\\\*${reqId}\\\\*\\\\*)`, 'gi'), '$1x$2');\n                    reqContent = reqContent.replace(new RegExp(`(\\\\|\\\\s*${reqId}\\\\s*\\\\|[^|]+\\\\|)\\\\s*Pending\\\\s*(\\\\|)`, 'gi'), '$1 Complete $2');\n                }\n                node_fs_1.default.writeFileSync(reqPath, reqContent, 'utf-8');\n            }\n        }\n    }\n    // Find next phase\n    let nextPhaseNum = null;\n    let nextPhaseName = null;\n    let isLastPhase = true;\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort((a, b) => (0, core_js_1.comparePhaseNum)(a, b));\n        for (const dir of dirs) {\n            const dm = dir.match(/^(\\d+[A-Z]?(?:\\.\\d+)?)-?(.*)/i);\n            if (dm) {\n                if ((0, core_js_1.comparePhaseNum)(dm[1], phaseNum) > 0) {\n                    nextPhaseNum = dm[1];\n                    nextPhaseName = dm[2] || null;\n                    isLastPhase = false;\n                    break;\n                }\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    // Update STATE.md\n    if (node_fs_1.default.existsSync(statePath)) {\n        let stateContent = node_fs_1.default.readFileSync(statePath, 'utf-8');\n        stateContent = stateContent.replace(/(\\*\\*Current Phase:\\*\\*\\s*).*/, `$1${nextPhaseNum || phaseNum}`);\n        if (nextPhaseName) {\n            stateContent = stateContent.replace(/(\\*\\*Current Phase Name:\\*\\*\\s*).*/, `$1${nextPhaseName.replace(/-/g, ' ')}`);\n        }\n        stateContent = stateContent.replace(/(\\*\\*Status:\\*\\*\\s*).*/, `$1${isLastPhase ? 'Milestone complete' : 'Ready to plan'}`);\n        stateContent = stateContent.replace(/(\\*\\*Current Plan:\\*\\*\\s*).*/, `$1Not started`);\n        stateContent = stateContent.replace(/(\\*\\*Last Activity:\\*\\*\\s*).*/, `$1${today}`);\n        stateContent = stateContent.replace(/(\\*\\*Last Activity Description:\\*\\*\\s*).*/, `$1Phase ${phaseNum} complete${nextPhaseNum ? `, transitioned to Phase ${nextPhaseNum}` : ''}`);\n        node_fs_1.default.writeFileSync(statePath, stateContent, 'utf-8');\n    }\n    (0, core_js_1.output)({\n        completed_phase: phaseNum,\n        phase_name: phaseInfo.phase_name,\n        plans_executed: `${summaryCount}/${planCount}`,\n        next_phase: nextPhaseNum,\n        next_phase_name: nextPhaseName,\n        is_last_phase: isLastPhase,\n        date: today,\n        roadmap_updated: node_fs_1.default.existsSync(roadmapPath),\n        state_updated: node_fs_1.default.existsSync(statePath),\n    }, raw);\n}\n//# sourceMappingURL=phase.js.map","\"use strict\";\n/**\n * Template — Template selection and fill operations\n *\n * Ported from maxsim/bin/lib/template.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdTemplateSelect = cmdTemplateSelect;\nexports.cmdTemplateFill = cmdTemplateFill;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst core_js_1 = require(\"./core.js\");\nconst frontmatter_js_1 = require(\"./frontmatter.js\");\n// ─── Template Select ─────────────────────────────────────────────────────────\nfunction cmdTemplateSelect(cwd, planPath, raw) {\n    if (!planPath) {\n        (0, core_js_1.error)('plan-path required');\n    }\n    try {\n        const fullPath = node_path_1.default.join(cwd, planPath);\n        const content = node_fs_1.default.readFileSync(fullPath, 'utf-8');\n        const taskMatch = content.match(/###\\s*Task\\s*\\d+/g) || [];\n        const taskCount = taskMatch.length;\n        const decisionMatch = content.match(/decision/gi) || [];\n        const hasDecisions = decisionMatch.length > 0;\n        const fileMentions = new Set();\n        const filePattern = /`([^`]+\\.[a-zA-Z]+)`/g;\n        let m;\n        while ((m = filePattern.exec(content)) !== null) {\n            if (m[1].includes('/') && !m[1].startsWith('http')) {\n                fileMentions.add(m[1]);\n            }\n        }\n        const fileCount = fileMentions.size;\n        let template = 'templates/summary-standard.md';\n        let type = 'standard';\n        if (taskCount <= 2 && fileCount <= 3 && !hasDecisions) {\n            template = 'templates/summary-minimal.md';\n            type = 'minimal';\n        }\n        else if (hasDecisions || fileCount > 6 || taskCount > 5) {\n            template = 'templates/summary-complex.md';\n            type = 'complex';\n        }\n        const result = { template, type, taskCount, fileCount, hasDecisions };\n        (0, core_js_1.output)(result, raw, template);\n    }\n    catch (thrown) {\n        const selectErr = thrown;\n        (0, core_js_1.output)({ template: 'templates/summary-standard.md', type: 'standard', error: selectErr.message }, raw, 'templates/summary-standard.md');\n    }\n}\n// ─── Template Fill ───────────────────────────────────────────────────────────\nfunction cmdTemplateFill(cwd, templateType, options, raw) {\n    if (!templateType) {\n        (0, core_js_1.error)('template type required: summary, plan, or verification');\n    }\n    if (!options.phase) {\n        (0, core_js_1.error)('--phase required');\n    }\n    const phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, options.phase);\n    if (!phaseInfo) {\n        (0, core_js_1.output)({ error: 'Phase not found', phase: options.phase }, raw);\n        return;\n    }\n    const padded = (0, core_js_1.normalizePhaseName)(options.phase);\n    const today = new Date().toISOString().split('T')[0];\n    const phaseName = options.name || phaseInfo.phase_name || 'Unnamed';\n    const phaseSlug = phaseInfo.phase_slug || (0, core_js_1.generateSlugInternal)(phaseName);\n    const phaseId = `${padded}-${phaseSlug}`;\n    const planNum = (options.plan || '01').padStart(2, '0');\n    const fields = options.fields || {};\n    let frontmatter;\n    let body;\n    let fileName;\n    switch (templateType) {\n        case 'summary': {\n            frontmatter = {\n                phase: phaseId,\n                plan: planNum,\n                subsystem: '[primary category]',\n                tags: [],\n                provides: [],\n                affects: [],\n                'tech-stack': { added: [], patterns: [] },\n                'key-files': { created: [], modified: [] },\n                'key-decisions': [],\n                'patterns-established': [],\n                duration: '[X]min',\n                completed: today,\n                ...fields,\n            };\n            body = [\n                `# Phase ${options.phase}: ${phaseName} Summary`,\n                '',\n                '**[Substantive one-liner describing outcome]**',\n                '',\n                '## Performance',\n                '- **Duration:** [time]',\n                '- **Tasks:** [count completed]',\n                '- **Files modified:** [count]',\n                '',\n                '## Accomplishments',\n                '- [Key outcome 1]',\n                '- [Key outcome 2]',\n                '',\n                '## Task Commits',\n                '1. **Task 1: [task name]** - `hash`',\n                '',\n                '## Files Created/Modified',\n                '- `path/to/file.ts` - What it does',\n                '',\n                '## Decisions & Deviations',\n                '[Key decisions or \"None - followed plan as specified\"]',\n                '',\n                '## Next Phase Readiness',\n                '[What\\'s ready for next phase]',\n            ].join('\\n');\n            fileName = `${padded}-${planNum}-SUMMARY.md`;\n            break;\n        }\n        case 'plan': {\n            const planType = options.type || 'execute';\n            const wave = parseInt(options.wave || '1') || 1;\n            frontmatter = {\n                phase: phaseId,\n                plan: planNum,\n                type: planType,\n                wave,\n                depends_on: [],\n                files_modified: [],\n                autonomous: true,\n                user_setup: [],\n                must_haves: { truths: [], artifacts: [], key_links: [] },\n                ...fields,\n            };\n            body = [\n                `# Phase ${options.phase} Plan ${planNum}: [Title]`,\n                '',\n                '## Objective',\n                '- **What:** [What this plan builds]',\n                '- **Why:** [Why it matters for the phase goal]',\n                '- **Output:** [Concrete deliverable]',\n                '',\n                '## Context',\n                '@.planning/PROJECT.md',\n                '@.planning/ROADMAP.md',\n                '@.planning/STATE.md',\n                '',\n                '## Tasks',\n                '',\n                '<task type=\"code\">',\n                '  <name>[Task name]</name>',\n                '  <files>[file paths]</files>',\n                '  <action>[What to do]</action>',\n                '  <verify>[How to verify]</verify>',\n                '  <done>[Definition of done]</done>',\n                '</task>',\n                '',\n                '## Verification',\n                '[How to verify this plan achieved its objective]',\n                '',\n                '## Success Criteria',\n                '- [ ] [Criterion 1]',\n                '- [ ] [Criterion 2]',\n            ].join('\\n');\n            fileName = `${padded}-${planNum}-PLAN.md`;\n            break;\n        }\n        case 'verification': {\n            frontmatter = {\n                phase: phaseId,\n                verified: new Date().toISOString(),\n                status: 'pending',\n                score: '0/0 must-haves verified',\n                ...fields,\n            };\n            body = [\n                `# Phase ${options.phase}: ${phaseName} — Verification`,\n                '',\n                '## Observable Truths',\n                '| # | Truth | Status | Evidence |',\n                '|---|-------|--------|----------|',\n                '| 1 | [Truth] | pending | |',\n                '',\n                '## Required Artifacts',\n                '| Artifact | Expected | Status | Details |',\n                '|----------|----------|--------|---------|',\n                '| [path] | [what] | pending | |',\n                '',\n                '## Key Link Verification',\n                '| From | To | Via | Status | Details |',\n                '|------|----|----|--------|---------|',\n                '| [source] | [target] | [connection] | pending | |',\n                '',\n                '## Requirements Coverage',\n                '| Requirement | Status | Blocking Issue |',\n                '|-------------|--------|----------------|',\n                '| [req] | pending | |',\n                '',\n                '## Result',\n                '[Pending verification]',\n            ].join('\\n');\n            fileName = `${padded}-VERIFICATION.md`;\n            break;\n        }\n        default:\n            (0, core_js_1.error)(`Unknown template type: ${templateType}. Available: summary, plan, verification`);\n            return;\n    }\n    const fullContent = `---\\n${(0, frontmatter_js_1.reconstructFrontmatter)(frontmatter)}\\n---\\n\\n${body}\\n`;\n    const outPath = node_path_1.default.join(cwd, phaseInfo.directory, fileName);\n    if (node_fs_1.default.existsSync(outPath)) {\n        (0, core_js_1.output)({ error: 'File already exists', path: node_path_1.default.relative(cwd, outPath) }, raw);\n        return;\n    }\n    node_fs_1.default.writeFileSync(outPath, fullContent, 'utf-8');\n    const relPath = node_path_1.default.relative(cwd, outPath);\n    const result = { created: true, path: relPath, template: templateType };\n    (0, core_js_1.output)(result, raw, relPath);\n}\n//# sourceMappingURL=template.js.map","\"use strict\";\n/**\n * Init — Compound init commands for workflow bootstrapping\n *\n * Ported from maxsim/bin/lib/init.cjs\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdInitExecutePhase = cmdInitExecutePhase;\nexports.cmdInitPlanPhase = cmdInitPlanPhase;\nexports.cmdInitNewProject = cmdInitNewProject;\nexports.cmdInitNewMilestone = cmdInitNewMilestone;\nexports.cmdInitQuick = cmdInitQuick;\nexports.cmdInitResume = cmdInitResume;\nexports.cmdInitVerifyWork = cmdInitVerifyWork;\nexports.cmdInitPhaseOp = cmdInitPhaseOp;\nexports.cmdInitTodos = cmdInitTodos;\nexports.cmdInitMilestoneOp = cmdInitMilestoneOp;\nexports.cmdInitMapCodebase = cmdInitMapCodebase;\nexports.cmdInitProgress = cmdInitProgress;\nconst node_fs_1 = __importDefault(require(\"node:fs\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst node_os_1 = __importDefault(require(\"node:os\"));\nconst node_child_process_1 = require(\"node:child_process\");\nconst core_js_1 = require(\"./core.js\");\n// ─── Helper: extract requirement IDs from roadmap phase section ─────────────\nfunction extractReqIds(cwd, phase) {\n    const roadmapPhase = (0, core_js_1.getRoadmapPhaseInternal)(cwd, phase);\n    const reqMatch = roadmapPhase?.section?.match(/^\\*\\*Requirements\\*\\*:[^\\S\\n]*([^\\n]*)$/m);\n    const reqExtracted = reqMatch\n        ? reqMatch[1].replace(/[\\[\\]]/g, '').split(',').map((s) => s.trim()).filter(Boolean).join(', ')\n        : null;\n    return (reqExtracted && reqExtracted !== 'TBD') ? reqExtracted : null;\n}\nfunction scanPhaseArtifacts(cwd, phaseDirectory) {\n    const result = {};\n    const phaseDirFull = node_path_1.default.join(cwd, phaseDirectory);\n    try {\n        const files = node_fs_1.default.readdirSync(phaseDirFull);\n        const contextFile = files.find(f => f.endsWith('-CONTEXT.md') || f === 'CONTEXT.md');\n        if (contextFile) {\n            result.context_path = node_path_1.default.join(phaseDirectory, contextFile);\n        }\n        const researchFile = files.find(f => f.endsWith('-RESEARCH.md') || f === 'RESEARCH.md');\n        if (researchFile) {\n            result.research_path = node_path_1.default.join(phaseDirectory, researchFile);\n        }\n        const verificationFile = files.find(f => f.endsWith('-VERIFICATION.md') || f === 'VERIFICATION.md');\n        if (verificationFile) {\n            result.verification_path = node_path_1.default.join(phaseDirectory, verificationFile);\n        }\n        const uatFile = files.find(f => f.endsWith('-UAT.md') || f === 'UAT.md');\n        if (uatFile) {\n            result.uat_path = node_path_1.default.join(phaseDirectory, uatFile);\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    return result;\n}\n// ─── Init commands ──────────────────────────────────────────────────────────\nfunction cmdInitExecutePhase(cwd, phase, raw) {\n    if (!phase) {\n        (0, core_js_1.error)('phase required for init execute-phase');\n    }\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, phase);\n    const milestone = (0, core_js_1.getMilestoneInfo)(cwd);\n    const phase_req_ids = extractReqIds(cwd, phase);\n    const result = {\n        executor_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-executor'),\n        verifier_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-verifier'),\n        commit_docs: config.commit_docs,\n        parallelization: config.parallelization,\n        branching_strategy: config.branching_strategy,\n        phase_branch_template: config.phase_branch_template,\n        milestone_branch_template: config.milestone_branch_template,\n        verifier_enabled: config.verifier,\n        phase_found: !!phaseInfo,\n        phase_dir: phaseInfo?.directory ?? null,\n        phase_number: phaseInfo?.phase_number ?? null,\n        phase_name: phaseInfo?.phase_name ?? null,\n        phase_slug: phaseInfo?.phase_slug ?? null,\n        phase_req_ids,\n        plans: phaseInfo?.plans ?? [],\n        summaries: phaseInfo?.summaries ?? [],\n        incomplete_plans: phaseInfo?.incomplete_plans ?? [],\n        plan_count: phaseInfo?.plans?.length ?? 0,\n        incomplete_count: phaseInfo?.incomplete_plans?.length ?? 0,\n        branch_name: config.branching_strategy === 'phase' && phaseInfo\n            ? config.phase_branch_template\n                .replace('{phase}', phaseInfo.phase_number)\n                .replace('{slug}', phaseInfo.phase_slug || 'phase')\n            : config.branching_strategy === 'milestone'\n                ? config.milestone_branch_template\n                    .replace('{milestone}', milestone.version)\n                    .replace('{slug}', (0, core_js_1.generateSlugInternal)(milestone.name) || 'milestone')\n                : null,\n        milestone_version: milestone.version,\n        milestone_name: milestone.name,\n        milestone_slug: (0, core_js_1.generateSlugInternal)(milestone.name),\n        state_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/STATE.md'),\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        config_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/config.json'),\n        state_path: '.planning/STATE.md',\n        roadmap_path: '.planning/ROADMAP.md',\n        config_path: '.planning/config.json',\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitPlanPhase(cwd, phase, raw) {\n    if (!phase) {\n        (0, core_js_1.error)('phase required for init plan-phase');\n    }\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, phase);\n    const phase_req_ids = extractReqIds(cwd, phase);\n    const result = {\n        researcher_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-phase-researcher'),\n        planner_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-planner'),\n        checker_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-plan-checker'),\n        research_enabled: config.research,\n        plan_checker_enabled: config.plan_checker,\n        nyquist_validation_enabled: false, // config doesn't have nyquist_validation directly\n        commit_docs: config.commit_docs,\n        phase_found: !!phaseInfo,\n        phase_dir: phaseInfo?.directory ?? null,\n        phase_number: phaseInfo?.phase_number ?? null,\n        phase_name: phaseInfo?.phase_name ?? null,\n        phase_slug: phaseInfo?.phase_slug ?? null,\n        padded_phase: phaseInfo?.phase_number?.padStart(2, '0') ?? null,\n        phase_req_ids,\n        has_research: phaseInfo?.has_research ?? false,\n        has_context: phaseInfo?.has_context ?? false,\n        has_plans: (phaseInfo?.plans?.length ?? 0) > 0,\n        plan_count: phaseInfo?.plans?.length ?? 0,\n        planning_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning'),\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        state_path: '.planning/STATE.md',\n        roadmap_path: '.planning/ROADMAP.md',\n        requirements_path: '.planning/REQUIREMENTS.md',\n    };\n    if (phaseInfo?.directory) {\n        const artifacts = scanPhaseArtifacts(cwd, phaseInfo.directory);\n        if (artifacts.context_path)\n            result.context_path = artifacts.context_path;\n        if (artifacts.research_path)\n            result.research_path = artifacts.research_path;\n        if (artifacts.verification_path)\n            result.verification_path = artifacts.verification_path;\n        if (artifacts.uat_path)\n            result.uat_path = artifacts.uat_path;\n    }\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitNewProject(cwd, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const homedir = node_os_1.default.homedir();\n    const braveKeyFile = node_path_1.default.join(homedir, '.maxsim', 'brave_api_key');\n    const hasBraveSearch = !!(process.env.BRAVE_API_KEY || node_fs_1.default.existsSync(braveKeyFile));\n    let hasCode = false;\n    let hasPackageFile = false;\n    try {\n        const files = (0, node_child_process_1.execSync)('find . -maxdepth 3 \\\\( -name \"*.ts\" -o -name \"*.js\" -o -name \"*.py\" -o -name \"*.go\" -o -name \"*.rs\" -o -name \"*.swift\" -o -name \"*.java\" \\\\) 2>/dev/null | grep -v node_modules | grep -v .git | head -5', {\n            cwd,\n            encoding: 'utf-8',\n            stdio: ['pipe', 'pipe', 'pipe'],\n        });\n        hasCode = files.trim().length > 0;\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    hasPackageFile = (0, core_js_1.pathExistsInternal)(cwd, 'package.json') ||\n        (0, core_js_1.pathExistsInternal)(cwd, 'requirements.txt') ||\n        (0, core_js_1.pathExistsInternal)(cwd, 'Cargo.toml') ||\n        (0, core_js_1.pathExistsInternal)(cwd, 'go.mod') ||\n        (0, core_js_1.pathExistsInternal)(cwd, 'Package.swift');\n    const result = {\n        researcher_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-project-researcher'),\n        synthesizer_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-research-synthesizer'),\n        roadmapper_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-roadmapper'),\n        commit_docs: config.commit_docs,\n        project_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/PROJECT.md'),\n        has_codebase_map: (0, core_js_1.pathExistsInternal)(cwd, '.planning/codebase'),\n        planning_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning'),\n        has_existing_code: hasCode,\n        has_package_file: hasPackageFile,\n        is_brownfield: hasCode || hasPackageFile,\n        needs_codebase_map: (hasCode || hasPackageFile) && !(0, core_js_1.pathExistsInternal)(cwd, '.planning/codebase'),\n        has_git: (0, core_js_1.pathExistsInternal)(cwd, '.git'),\n        brave_search_available: hasBraveSearch,\n        project_path: '.planning/PROJECT.md',\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitNewMilestone(cwd, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const milestone = (0, core_js_1.getMilestoneInfo)(cwd);\n    const result = {\n        researcher_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-project-researcher'),\n        synthesizer_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-research-synthesizer'),\n        roadmapper_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-roadmapper'),\n        commit_docs: config.commit_docs,\n        research_enabled: config.research,\n        current_milestone: milestone.version,\n        current_milestone_name: milestone.name,\n        project_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/PROJECT.md'),\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        state_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/STATE.md'),\n        project_path: '.planning/PROJECT.md',\n        roadmap_path: '.planning/ROADMAP.md',\n        state_path: '.planning/STATE.md',\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitQuick(cwd, description, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const now = new Date();\n    const slug = description ? (0, core_js_1.generateSlugInternal)(description)?.substring(0, 40) ?? null : null;\n    const quickDir = node_path_1.default.join(cwd, '.planning', 'quick');\n    let nextNum = 1;\n    try {\n        const existing = node_fs_1.default.readdirSync(quickDir)\n            .filter(f => /^\\d+-/.test(f))\n            .map(f => parseInt(f.split('-')[0], 10))\n            .filter(n => !isNaN(n));\n        if (existing.length > 0) {\n            nextNum = Math.max(...existing) + 1;\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const result = {\n        planner_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-planner'),\n        executor_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-executor'),\n        checker_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-plan-checker'),\n        verifier_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-verifier'),\n        commit_docs: config.commit_docs,\n        next_num: nextNum,\n        slug,\n        description: description ?? null,\n        date: now.toISOString().split('T')[0],\n        timestamp: now.toISOString(),\n        quick_dir: '.planning/quick',\n        task_dir: slug ? `.planning/quick/${nextNum}-${slug}` : null,\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        planning_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning'),\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitResume(cwd, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    let interruptedAgentId = null;\n    try {\n        interruptedAgentId = node_fs_1.default.readFileSync(node_path_1.default.join(cwd, '.planning', 'current-agent-id.txt'), 'utf-8').trim();\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const result = {\n        state_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/STATE.md'),\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        project_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/PROJECT.md'),\n        planning_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning'),\n        state_path: '.planning/STATE.md',\n        roadmap_path: '.planning/ROADMAP.md',\n        project_path: '.planning/PROJECT.md',\n        has_interrupted_agent: !!interruptedAgentId,\n        interrupted_agent_id: interruptedAgentId,\n        commit_docs: config.commit_docs,\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitVerifyWork(cwd, phase, raw) {\n    if (!phase) {\n        (0, core_js_1.error)('phase required for init verify-work');\n    }\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, phase);\n    const result = {\n        planner_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-planner'),\n        checker_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-plan-checker'),\n        commit_docs: config.commit_docs,\n        phase_found: !!phaseInfo,\n        phase_dir: phaseInfo?.directory ?? null,\n        phase_number: phaseInfo?.phase_number ?? null,\n        phase_name: phaseInfo?.phase_name ?? null,\n        has_verification: phaseInfo?.has_verification ?? false,\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitPhaseOp(cwd, phase, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    let phaseInfo = (0, core_js_1.findPhaseInternal)(cwd, phase ?? '');\n    if (!phaseInfo) {\n        const roadmapPhase = (0, core_js_1.getRoadmapPhaseInternal)(cwd, phase ?? '');\n        if (roadmapPhase?.found) {\n            const phaseName = roadmapPhase.phase_name;\n            phaseInfo = {\n                found: true,\n                directory: '', // no directory yet\n                phase_number: roadmapPhase.phase_number,\n                phase_name: phaseName,\n                phase_slug: phaseName ? phaseName.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') : null,\n                plans: [],\n                summaries: [],\n                incomplete_plans: [],\n                has_research: false,\n                has_context: false,\n                has_verification: false,\n            };\n        }\n    }\n    const result = {\n        commit_docs: config.commit_docs,\n        brave_search: config.brave_search,\n        phase_found: !!phaseInfo,\n        phase_dir: phaseInfo?.directory || null,\n        phase_number: phaseInfo?.phase_number ?? null,\n        phase_name: phaseInfo?.phase_name ?? null,\n        phase_slug: phaseInfo?.phase_slug ?? null,\n        padded_phase: phaseInfo?.phase_number?.padStart(2, '0') ?? null,\n        has_research: phaseInfo?.has_research ?? false,\n        has_context: phaseInfo?.has_context ?? false,\n        has_plans: (phaseInfo?.plans?.length ?? 0) > 0,\n        has_verification: phaseInfo?.has_verification ?? false,\n        plan_count: phaseInfo?.plans?.length ?? 0,\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        planning_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning'),\n        state_path: '.planning/STATE.md',\n        roadmap_path: '.planning/ROADMAP.md',\n        requirements_path: '.planning/REQUIREMENTS.md',\n    };\n    if (phaseInfo?.directory) {\n        const artifacts = scanPhaseArtifacts(cwd, phaseInfo.directory);\n        if (artifacts.context_path)\n            result.context_path = artifacts.context_path;\n        if (artifacts.research_path)\n            result.research_path = artifacts.research_path;\n        if (artifacts.verification_path)\n            result.verification_path = artifacts.verification_path;\n        if (artifacts.uat_path)\n            result.uat_path = artifacts.uat_path;\n    }\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitTodos(cwd, area, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const now = new Date();\n    const pendingDir = node_path_1.default.join(cwd, '.planning', 'todos', 'pending');\n    let count = 0;\n    const todos = [];\n    try {\n        const files = node_fs_1.default.readdirSync(pendingDir).filter(f => f.endsWith('.md'));\n        for (const file of files) {\n            try {\n                const content = node_fs_1.default.readFileSync(node_path_1.default.join(pendingDir, file), 'utf-8');\n                const createdMatch = content.match(/^created:\\s*(.+)$/m);\n                const titleMatch = content.match(/^title:\\s*(.+)$/m);\n                const areaMatch = content.match(/^area:\\s*(.+)$/m);\n                const todoArea = areaMatch ? areaMatch[1].trim() : 'general';\n                if (area && todoArea !== area)\n                    continue;\n                count++;\n                todos.push({\n                    file,\n                    created: createdMatch ? createdMatch[1].trim() : 'unknown',\n                    title: titleMatch ? titleMatch[1].trim() : 'Untitled',\n                    area: todoArea,\n                    path: node_path_1.default.join('.planning', 'todos', 'pending', file),\n                });\n            }\n            catch (e) {\n                /* optional op, ignore */\n                if (process.env.MAXSIM_DEBUG)\n                    console.error(e);\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const result = {\n        commit_docs: config.commit_docs,\n        date: now.toISOString().split('T')[0],\n        timestamp: now.toISOString(),\n        todo_count: count,\n        todos,\n        area_filter: area ?? null,\n        pending_dir: '.planning/todos/pending',\n        completed_dir: '.planning/todos/completed',\n        planning_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning'),\n        todos_dir_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/todos'),\n        pending_dir_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/todos/pending'),\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitMilestoneOp(cwd, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const milestone = (0, core_js_1.getMilestoneInfo)(cwd);\n    let phaseCount = 0;\n    let completedPhases = 0;\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name);\n        phaseCount = dirs.length;\n        for (const dir of dirs) {\n            try {\n                const phaseFiles = node_fs_1.default.readdirSync(node_path_1.default.join(phasesDir, dir));\n                const hasSummary = phaseFiles.some(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n                if (hasSummary)\n                    completedPhases++;\n            }\n            catch (e) {\n                /* optional op, ignore */\n                if (process.env.MAXSIM_DEBUG)\n                    console.error(e);\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const archiveDir = node_path_1.default.join(cwd, '.planning', 'archive');\n    let archivedMilestones = [];\n    try {\n        archivedMilestones = node_fs_1.default.readdirSync(archiveDir, { withFileTypes: true })\n            .filter(e => e.isDirectory())\n            .map(e => e.name);\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const result = {\n        commit_docs: config.commit_docs,\n        milestone_version: milestone.version,\n        milestone_name: milestone.name,\n        milestone_slug: (0, core_js_1.generateSlugInternal)(milestone.name),\n        phase_count: phaseCount,\n        completed_phases: completedPhases,\n        all_phases_complete: phaseCount > 0 && phaseCount === completedPhases,\n        archived_milestones: archivedMilestones,\n        archive_count: archivedMilestones.length,\n        project_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/PROJECT.md'),\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        state_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/STATE.md'),\n        archive_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/archive'),\n        phases_dir_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/phases'),\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitMapCodebase(cwd, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const codebaseDir = node_path_1.default.join(cwd, '.planning', 'codebase');\n    let existingMaps = [];\n    try {\n        existingMaps = node_fs_1.default.readdirSync(codebaseDir).filter(f => f.endsWith('.md'));\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const result = {\n        mapper_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-codebase-mapper'),\n        commit_docs: config.commit_docs,\n        search_gitignored: config.search_gitignored,\n        parallelization: config.parallelization,\n        codebase_dir: '.planning/codebase',\n        existing_maps: existingMaps,\n        has_maps: existingMaps.length > 0,\n        planning_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning'),\n        codebase_dir_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/codebase'),\n    };\n    (0, core_js_1.output)(result, raw);\n}\nfunction cmdInitProgress(cwd, raw) {\n    const config = (0, core_js_1.loadConfig)(cwd);\n    const milestone = (0, core_js_1.getMilestoneInfo)(cwd);\n    const phasesDir = node_path_1.default.join(cwd, '.planning', 'phases');\n    const phases = [];\n    let currentPhase = null;\n    let nextPhase = null;\n    try {\n        const entries = node_fs_1.default.readdirSync(phasesDir, { withFileTypes: true });\n        const dirs = entries.filter(e => e.isDirectory()).map(e => e.name).sort();\n        for (const dir of dirs) {\n            const match = dir.match(/^(\\d+(?:\\.\\d+)?)-?(.*)/);\n            const phaseNumber = match ? match[1] : dir;\n            const phaseName = match && match[2] ? match[2] : null;\n            const phasePath = node_path_1.default.join(phasesDir, dir);\n            const phaseFiles = node_fs_1.default.readdirSync(phasePath);\n            const plans = phaseFiles.filter(f => f.endsWith('-PLAN.md') || f === 'PLAN.md');\n            const summaries = phaseFiles.filter(f => f.endsWith('-SUMMARY.md') || f === 'SUMMARY.md');\n            const hasResearch = phaseFiles.some(f => f.endsWith('-RESEARCH.md') || f === 'RESEARCH.md');\n            const status = summaries.length >= plans.length && plans.length > 0 ? 'complete' :\n                plans.length > 0 ? 'in_progress' :\n                    hasResearch ? 'researched' : 'pending';\n            const phaseInfo = {\n                number: phaseNumber,\n                name: phaseName,\n                directory: node_path_1.default.join('.planning', 'phases', dir),\n                status,\n                plan_count: plans.length,\n                summary_count: summaries.length,\n                has_research: hasResearch,\n            };\n            phases.push(phaseInfo);\n            if (!currentPhase && (status === 'in_progress' || status === 'researched')) {\n                currentPhase = phaseInfo;\n            }\n            if (!nextPhase && status === 'pending') {\n                nextPhase = phaseInfo;\n            }\n        }\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    let pausedAt = null;\n    try {\n        const state = node_fs_1.default.readFileSync(node_path_1.default.join(cwd, '.planning', 'STATE.md'), 'utf-8');\n        const pauseMatch = state.match(/\\*\\*Paused At:\\*\\*\\s*(.+)/);\n        if (pauseMatch)\n            pausedAt = pauseMatch[1].trim();\n    }\n    catch (e) {\n        /* optional op, ignore */\n        if (process.env.MAXSIM_DEBUG)\n            console.error(e);\n    }\n    const result = {\n        executor_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-executor'),\n        planner_model: (0, core_js_1.resolveModelInternal)(cwd, 'maxsim-planner'),\n        commit_docs: config.commit_docs,\n        milestone_version: milestone.version,\n        milestone_name: milestone.name,\n        phases,\n        phase_count: phases.length,\n        completed_count: phases.filter(p => p.status === 'complete').length,\n        in_progress_count: phases.filter(p => p.status === 'in_progress').length,\n        current_phase: currentPhase,\n        next_phase: nextPhase,\n        paused_at: pausedAt,\n        has_work_in_progress: !!currentPhase,\n        project_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/PROJECT.md'),\n        roadmap_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/ROADMAP.md'),\n        state_exists: (0, core_js_1.pathExistsInternal)(cwd, '.planning/STATE.md'),\n        state_path: '.planning/STATE.md',\n        roadmap_path: '.planning/ROADMAP.md',\n        project_path: '.planning/PROJECT.md',\n        config_path: '.planning/config.json',\n    };\n    (0, core_js_1.output)(result, raw);\n}\n//# sourceMappingURL=init.js.map","\"use strict\";\n/**\n * @maxsim/core — Shared utilities, constants, and type definitions\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cmdRoadmapGetPhase = exports.cmdStateSnapshot = exports.cmdStateRecordSession = exports.cmdStateResolveBlocker = exports.cmdStateAddBlocker = exports.cmdStateAddDecision = exports.cmdStateUpdateProgress = exports.cmdStateRecordMetric = exports.cmdStateAdvancePlan = exports.cmdStateUpdate = exports.cmdStatePatch = exports.cmdStateGet = exports.cmdStateLoad = exports.stateReplaceField = exports.stateExtractField = exports.cmdConfigGet = exports.cmdConfigSet = exports.cmdConfigEnsureSection = exports.cmdFrontmatterValidate = exports.cmdFrontmatterMerge = exports.cmdFrontmatterSet = exports.cmdFrontmatterGet = exports.FRONTMATTER_SCHEMAS = exports.parseMustHavesBlock = exports.spliceFrontmatter = exports.reconstructFrontmatter = exports.extractFrontmatter = exports.getMilestoneInfo = exports.generateSlugInternal = exports.pathExistsInternal = exports.resolveModelInternal = exports.getRoadmapPhaseInternal = exports.getArchivedPhaseDirs = exports.findPhaseInternal = exports.getPhasePattern = exports.comparePhaseNum = exports.normalizePhaseName = exports.execGit = exports.isGitIgnored = exports.loadConfig = exports.safeReadFile = exports.error = exports.output = exports.MODEL_PROFILES = exports.PLANNING_CONFIG_DEFAULTS = exports.err = exports.ok = exports.phaseSlug = exports.phasePath = exports.phaseNumber = void 0;\nexports.cmdInitProgress = exports.cmdInitMapCodebase = exports.cmdInitMilestoneOp = exports.cmdInitTodos = exports.cmdInitPhaseOp = exports.cmdInitVerifyWork = exports.cmdInitResume = exports.cmdInitQuick = exports.cmdInitNewMilestone = exports.cmdInitNewProject = exports.cmdInitPlanPhase = exports.cmdInitExecutePhase = exports.cmdTemplateFill = exports.cmdTemplateSelect = exports.cmdPhaseComplete = exports.cmdPhaseRemove = exports.cmdPhaseInsert = exports.cmdPhaseAdd = exports.cmdPhasePlanIndex = exports.cmdFindPhase = exports.cmdPhaseNextDecimal = exports.cmdPhasesList = exports.cmdValidateHealth = exports.cmdValidateConsistency = exports.cmdVerifyKeyLinks = exports.cmdVerifyArtifacts = exports.cmdVerifyCommits = exports.cmdVerifyReferences = exports.cmdVerifyPhaseCompleteness = exports.cmdVerifyPlanStructure = exports.cmdVerifySummary = exports.cmdScaffold = exports.cmdTodoComplete = exports.cmdProgressRender = exports.cmdWebsearch = exports.cmdSummaryExtract = exports.cmdCommit = exports.cmdResolveModel = exports.cmdHistoryDigest = exports.cmdVerifyPathExists = exports.cmdListTodos = exports.cmdCurrentTimestamp = exports.cmdGenerateSlug = exports.cmdMilestoneComplete = exports.cmdRequirementsMarkComplete = exports.cmdRoadmapUpdatePlanProgress = exports.cmdRoadmapAnalyze = void 0;\n// Runtime value exports from types\nvar types_js_1 = require(\"./types.js\");\nObject.defineProperty(exports, \"phaseNumber\", { enumerable: true, get: function () { return types_js_1.phaseNumber; } });\nObject.defineProperty(exports, \"phasePath\", { enumerable: true, get: function () { return types_js_1.phasePath; } });\nObject.defineProperty(exports, \"phaseSlug\", { enumerable: true, get: function () { return types_js_1.phaseSlug; } });\nObject.defineProperty(exports, \"ok\", { enumerable: true, get: function () { return types_js_1.ok; } });\nObject.defineProperty(exports, \"err\", { enumerable: true, get: function () { return types_js_1.err; } });\nObject.defineProperty(exports, \"PLANNING_CONFIG_DEFAULTS\", { enumerable: true, get: function () { return types_js_1.PLANNING_CONFIG_DEFAULTS; } });\n// Runtime exports from core\nvar core_js_1 = require(\"./core.js\");\nObject.defineProperty(exports, \"MODEL_PROFILES\", { enumerable: true, get: function () { return core_js_1.MODEL_PROFILES; } });\nObject.defineProperty(exports, \"output\", { enumerable: true, get: function () { return core_js_1.output; } });\nObject.defineProperty(exports, \"error\", { enumerable: true, get: function () { return core_js_1.error; } });\nObject.defineProperty(exports, \"safeReadFile\", { enumerable: true, get: function () { return core_js_1.safeReadFile; } });\nObject.defineProperty(exports, \"loadConfig\", { enumerable: true, get: function () { return core_js_1.loadConfig; } });\nObject.defineProperty(exports, \"isGitIgnored\", { enumerable: true, get: function () { return core_js_1.isGitIgnored; } });\nObject.defineProperty(exports, \"execGit\", { enumerable: true, get: function () { return core_js_1.execGit; } });\nObject.defineProperty(exports, \"normalizePhaseName\", { enumerable: true, get: function () { return core_js_1.normalizePhaseName; } });\nObject.defineProperty(exports, \"comparePhaseNum\", { enumerable: true, get: function () { return core_js_1.comparePhaseNum; } });\nObject.defineProperty(exports, \"getPhasePattern\", { enumerable: true, get: function () { return core_js_1.getPhasePattern; } });\nObject.defineProperty(exports, \"findPhaseInternal\", { enumerable: true, get: function () { return core_js_1.findPhaseInternal; } });\nObject.defineProperty(exports, \"getArchivedPhaseDirs\", { enumerable: true, get: function () { return core_js_1.getArchivedPhaseDirs; } });\nObject.defineProperty(exports, \"getRoadmapPhaseInternal\", { enumerable: true, get: function () { return core_js_1.getRoadmapPhaseInternal; } });\nObject.defineProperty(exports, \"resolveModelInternal\", { enumerable: true, get: function () { return core_js_1.resolveModelInternal; } });\nObject.defineProperty(exports, \"pathExistsInternal\", { enumerable: true, get: function () { return core_js_1.pathExistsInternal; } });\nObject.defineProperty(exports, \"generateSlugInternal\", { enumerable: true, get: function () { return core_js_1.generateSlugInternal; } });\nObject.defineProperty(exports, \"getMilestoneInfo\", { enumerable: true, get: function () { return core_js_1.getMilestoneInfo; } });\n// Frontmatter exports\nvar frontmatter_js_1 = require(\"./frontmatter.js\");\nObject.defineProperty(exports, \"extractFrontmatter\", { enumerable: true, get: function () { return frontmatter_js_1.extractFrontmatter; } });\nObject.defineProperty(exports, \"reconstructFrontmatter\", { enumerable: true, get: function () { return frontmatter_js_1.reconstructFrontmatter; } });\nObject.defineProperty(exports, \"spliceFrontmatter\", { enumerable: true, get: function () { return frontmatter_js_1.spliceFrontmatter; } });\nObject.defineProperty(exports, \"parseMustHavesBlock\", { enumerable: true, get: function () { return frontmatter_js_1.parseMustHavesBlock; } });\nObject.defineProperty(exports, \"FRONTMATTER_SCHEMAS\", { enumerable: true, get: function () { return frontmatter_js_1.FRONTMATTER_SCHEMAS; } });\nObject.defineProperty(exports, \"cmdFrontmatterGet\", { enumerable: true, get: function () { return frontmatter_js_1.cmdFrontmatterGet; } });\nObject.defineProperty(exports, \"cmdFrontmatterSet\", { enumerable: true, get: function () { return frontmatter_js_1.cmdFrontmatterSet; } });\nObject.defineProperty(exports, \"cmdFrontmatterMerge\", { enumerable: true, get: function () { return frontmatter_js_1.cmdFrontmatterMerge; } });\nObject.defineProperty(exports, \"cmdFrontmatterValidate\", { enumerable: true, get: function () { return frontmatter_js_1.cmdFrontmatterValidate; } });\n// Config exports\nvar config_js_1 = require(\"./config.js\");\nObject.defineProperty(exports, \"cmdConfigEnsureSection\", { enumerable: true, get: function () { return config_js_1.cmdConfigEnsureSection; } });\nObject.defineProperty(exports, \"cmdConfigSet\", { enumerable: true, get: function () { return config_js_1.cmdConfigSet; } });\nObject.defineProperty(exports, \"cmdConfigGet\", { enumerable: true, get: function () { return config_js_1.cmdConfigGet; } });\n// State exports\nvar state_js_1 = require(\"./state.js\");\nObject.defineProperty(exports, \"stateExtractField\", { enumerable: true, get: function () { return state_js_1.stateExtractField; } });\nObject.defineProperty(exports, \"stateReplaceField\", { enumerable: true, get: function () { return state_js_1.stateReplaceField; } });\nObject.defineProperty(exports, \"cmdStateLoad\", { enumerable: true, get: function () { return state_js_1.cmdStateLoad; } });\nObject.defineProperty(exports, \"cmdStateGet\", { enumerable: true, get: function () { return state_js_1.cmdStateGet; } });\nObject.defineProperty(exports, \"cmdStatePatch\", { enumerable: true, get: function () { return state_js_1.cmdStatePatch; } });\nObject.defineProperty(exports, \"cmdStateUpdate\", { enumerable: true, get: function () { return state_js_1.cmdStateUpdate; } });\nObject.defineProperty(exports, \"cmdStateAdvancePlan\", { enumerable: true, get: function () { return state_js_1.cmdStateAdvancePlan; } });\nObject.defineProperty(exports, \"cmdStateRecordMetric\", { enumerable: true, get: function () { return state_js_1.cmdStateRecordMetric; } });\nObject.defineProperty(exports, \"cmdStateUpdateProgress\", { enumerable: true, get: function () { return state_js_1.cmdStateUpdateProgress; } });\nObject.defineProperty(exports, \"cmdStateAddDecision\", { enumerable: true, get: function () { return state_js_1.cmdStateAddDecision; } });\nObject.defineProperty(exports, \"cmdStateAddBlocker\", { enumerable: true, get: function () { return state_js_1.cmdStateAddBlocker; } });\nObject.defineProperty(exports, \"cmdStateResolveBlocker\", { enumerable: true, get: function () { return state_js_1.cmdStateResolveBlocker; } });\nObject.defineProperty(exports, \"cmdStateRecordSession\", { enumerable: true, get: function () { return state_js_1.cmdStateRecordSession; } });\nObject.defineProperty(exports, \"cmdStateSnapshot\", { enumerable: true, get: function () { return state_js_1.cmdStateSnapshot; } });\n// Roadmap exports\nvar roadmap_js_1 = require(\"./roadmap.js\");\nObject.defineProperty(exports, \"cmdRoadmapGetPhase\", { enumerable: true, get: function () { return roadmap_js_1.cmdRoadmapGetPhase; } });\nObject.defineProperty(exports, \"cmdRoadmapAnalyze\", { enumerable: true, get: function () { return roadmap_js_1.cmdRoadmapAnalyze; } });\nObject.defineProperty(exports, \"cmdRoadmapUpdatePlanProgress\", { enumerable: true, get: function () { return roadmap_js_1.cmdRoadmapUpdatePlanProgress; } });\n// Milestone exports\nvar milestone_js_1 = require(\"./milestone.js\");\nObject.defineProperty(exports, \"cmdRequirementsMarkComplete\", { enumerable: true, get: function () { return milestone_js_1.cmdRequirementsMarkComplete; } });\nObject.defineProperty(exports, \"cmdMilestoneComplete\", { enumerable: true, get: function () { return milestone_js_1.cmdMilestoneComplete; } });\n// Commands exports\nvar commands_js_1 = require(\"./commands.js\");\nObject.defineProperty(exports, \"cmdGenerateSlug\", { enumerable: true, get: function () { return commands_js_1.cmdGenerateSlug; } });\nObject.defineProperty(exports, \"cmdCurrentTimestamp\", { enumerable: true, get: function () { return commands_js_1.cmdCurrentTimestamp; } });\nObject.defineProperty(exports, \"cmdListTodos\", { enumerable: true, get: function () { return commands_js_1.cmdListTodos; } });\nObject.defineProperty(exports, \"cmdVerifyPathExists\", { enumerable: true, get: function () { return commands_js_1.cmdVerifyPathExists; } });\nObject.defineProperty(exports, \"cmdHistoryDigest\", { enumerable: true, get: function () { return commands_js_1.cmdHistoryDigest; } });\nObject.defineProperty(exports, \"cmdResolveModel\", { enumerable: true, get: function () { return commands_js_1.cmdResolveModel; } });\nObject.defineProperty(exports, \"cmdCommit\", { enumerable: true, get: function () { return commands_js_1.cmdCommit; } });\nObject.defineProperty(exports, \"cmdSummaryExtract\", { enumerable: true, get: function () { return commands_js_1.cmdSummaryExtract; } });\nObject.defineProperty(exports, \"cmdWebsearch\", { enumerable: true, get: function () { return commands_js_1.cmdWebsearch; } });\nObject.defineProperty(exports, \"cmdProgressRender\", { enumerable: true, get: function () { return commands_js_1.cmdProgressRender; } });\nObject.defineProperty(exports, \"cmdTodoComplete\", { enumerable: true, get: function () { return commands_js_1.cmdTodoComplete; } });\nObject.defineProperty(exports, \"cmdScaffold\", { enumerable: true, get: function () { return commands_js_1.cmdScaffold; } });\nvar verify_js_1 = require(\"./verify.js\");\nObject.defineProperty(exports, \"cmdVerifySummary\", { enumerable: true, get: function () { return verify_js_1.cmdVerifySummary; } });\nObject.defineProperty(exports, \"cmdVerifyPlanStructure\", { enumerable: true, get: function () { return verify_js_1.cmdVerifyPlanStructure; } });\nObject.defineProperty(exports, \"cmdVerifyPhaseCompleteness\", { enumerable: true, get: function () { return verify_js_1.cmdVerifyPhaseCompleteness; } });\nObject.defineProperty(exports, \"cmdVerifyReferences\", { enumerable: true, get: function () { return verify_js_1.cmdVerifyReferences; } });\nObject.defineProperty(exports, \"cmdVerifyCommits\", { enumerable: true, get: function () { return verify_js_1.cmdVerifyCommits; } });\nObject.defineProperty(exports, \"cmdVerifyArtifacts\", { enumerable: true, get: function () { return verify_js_1.cmdVerifyArtifacts; } });\nObject.defineProperty(exports, \"cmdVerifyKeyLinks\", { enumerable: true, get: function () { return verify_js_1.cmdVerifyKeyLinks; } });\nObject.defineProperty(exports, \"cmdValidateConsistency\", { enumerable: true, get: function () { return verify_js_1.cmdValidateConsistency; } });\nObject.defineProperty(exports, \"cmdValidateHealth\", { enumerable: true, get: function () { return verify_js_1.cmdValidateHealth; } });\n// Phase exports\nvar phase_js_1 = require(\"./phase.js\");\nObject.defineProperty(exports, \"cmdPhasesList\", { enumerable: true, get: function () { return phase_js_1.cmdPhasesList; } });\nObject.defineProperty(exports, \"cmdPhaseNextDecimal\", { enumerable: true, get: function () { return phase_js_1.cmdPhaseNextDecimal; } });\nObject.defineProperty(exports, \"cmdFindPhase\", { enumerable: true, get: function () { return phase_js_1.cmdFindPhase; } });\nObject.defineProperty(exports, \"cmdPhasePlanIndex\", { enumerable: true, get: function () { return phase_js_1.cmdPhasePlanIndex; } });\nObject.defineProperty(exports, \"cmdPhaseAdd\", { enumerable: true, get: function () { return phase_js_1.cmdPhaseAdd; } });\nObject.defineProperty(exports, \"cmdPhaseInsert\", { enumerable: true, get: function () { return phase_js_1.cmdPhaseInsert; } });\nObject.defineProperty(exports, \"cmdPhaseRemove\", { enumerable: true, get: function () { return phase_js_1.cmdPhaseRemove; } });\nObject.defineProperty(exports, \"cmdPhaseComplete\", { enumerable: true, get: function () { return phase_js_1.cmdPhaseComplete; } });\nvar template_js_1 = require(\"./template.js\");\nObject.defineProperty(exports, \"cmdTemplateSelect\", { enumerable: true, get: function () { return template_js_1.cmdTemplateSelect; } });\nObject.defineProperty(exports, \"cmdTemplateFill\", { enumerable: true, get: function () { return template_js_1.cmdTemplateFill; } });\nvar init_js_1 = require(\"./init.js\");\nObject.defineProperty(exports, \"cmdInitExecutePhase\", { enumerable: true, get: function () { return init_js_1.cmdInitExecutePhase; } });\nObject.defineProperty(exports, \"cmdInitPlanPhase\", { enumerable: true, get: function () { return init_js_1.cmdInitPlanPhase; } });\nObject.defineProperty(exports, \"cmdInitNewProject\", { enumerable: true, get: function () { return init_js_1.cmdInitNewProject; } });\nObject.defineProperty(exports, \"cmdInitNewMilestone\", { enumerable: true, get: function () { return init_js_1.cmdInitNewMilestone; } });\nObject.defineProperty(exports, \"cmdInitQuick\", { enumerable: true, get: function () { return init_js_1.cmdInitQuick; } });\nObject.defineProperty(exports, \"cmdInitResume\", { enumerable: true, get: function () { return init_js_1.cmdInitResume; } });\nObject.defineProperty(exports, \"cmdInitVerifyWork\", { enumerable: true, get: function () { return init_js_1.cmdInitVerifyWork; } });\nObject.defineProperty(exports, \"cmdInitPhaseOp\", { enumerable: true, get: function () { return init_js_1.cmdInitPhaseOp; } });\nObject.defineProperty(exports, \"cmdInitTodos\", { enumerable: true, get: function () { return init_js_1.cmdInitTodos; } });\nObject.defineProperty(exports, \"cmdInitMilestoneOp\", { enumerable: true, get: function () { return init_js_1.cmdInitMilestoneOp; } });\nObject.defineProperty(exports, \"cmdInitMapCodebase\", { enumerable: true, get: function () { return init_js_1.cmdInitMapCodebase; } });\nObject.defineProperty(exports, \"cmdInitProgress\", { enumerable: true, get: function () { return init_js_1.cmdInitProgress; } });\n//# sourceMappingURL=index.js.map","/**\n * MAXSIM Tools — CLI utility for MAXSIM workflow operations\n *\n * Replaces repetitive inline bash patterns across ~50 MAXSIM command/workflow/agent files.\n * Centralizes: config parsing, model resolution, phase lookup, git commits, summary verification.\n *\n * Usage: node maxsim-tools.cjs <command> [args] [--raw]\n *\n * This is a direct TypeScript port of maxsim/bin/maxsim-tools.cjs.\n * All imports resolve through @maxsim/core barrel export.\n */\n\nimport * as fs from 'node:fs';\nimport * as path from 'node:path';\nimport * as os from 'node:os';\nimport { spawn, execSync } from 'node:child_process';\nimport { createRequire } from 'node:module';\n\nimport type { TimestampFormat } from '@maxsim/core';\n\nimport {\n  // Core\n  error,\n  // Frontmatter\n  extractFrontmatter,\n  reconstructFrontmatter,\n  spliceFrontmatter,\n  parseMustHavesBlock,\n  FRONTMATTER_SCHEMAS,\n  cmdFrontmatterGet,\n  cmdFrontmatterSet,\n  cmdFrontmatterMerge,\n  cmdFrontmatterValidate,\n  // Config\n  cmdConfigEnsureSection,\n  cmdConfigSet,\n  cmdConfigGet,\n  // Commands\n  cmdGenerateSlug,\n  cmdCurrentTimestamp,\n  cmdListTodos,\n  cmdVerifyPathExists,\n  cmdHistoryDigest,\n  cmdResolveModel,\n  cmdCommit,\n  cmdSummaryExtract,\n  cmdWebsearch,\n  cmdProgressRender,\n  cmdTodoComplete,\n  cmdScaffold,\n  // State\n  cmdStateLoad,\n  cmdStateGet,\n  cmdStatePatch,\n  cmdStateUpdate,\n  cmdStateAdvancePlan,\n  cmdStateRecordMetric,\n  cmdStateUpdateProgress,\n  cmdStateAddDecision,\n  cmdStateAddBlocker,\n  cmdStateResolveBlocker,\n  cmdStateRecordSession,\n  cmdStateSnapshot,\n  stateExtractField,\n  stateReplaceField,\n  // Roadmap\n  cmdRoadmapGetPhase,\n  cmdRoadmapAnalyze,\n  cmdRoadmapUpdatePlanProgress,\n  // Milestone\n  cmdRequirementsMarkComplete,\n  cmdMilestoneComplete,\n  // Verify\n  cmdVerifySummary,\n  cmdVerifyPlanStructure,\n  cmdVerifyPhaseCompleteness,\n  cmdVerifyReferences,\n  cmdVerifyCommits,\n  cmdVerifyArtifacts,\n  cmdVerifyKeyLinks,\n  cmdValidateConsistency,\n  cmdValidateHealth,\n  // Phase\n  cmdPhasesList,\n  cmdPhaseNextDecimal,\n  cmdFindPhase,\n  cmdPhasePlanIndex,\n  cmdPhaseAdd,\n  cmdPhaseInsert,\n  cmdPhaseRemove,\n  cmdPhaseComplete,\n  // Template\n  cmdTemplateSelect,\n  cmdTemplateFill,\n  // Init\n  cmdInitExecutePhase,\n  cmdInitPlanPhase,\n  cmdInitNewProject,\n  cmdInitNewMilestone,\n  cmdInitQuick,\n  cmdInitResume,\n  cmdInitVerifyWork,\n  cmdInitPhaseOp,\n  cmdInitTodos,\n  cmdInitMilestoneOp,\n  cmdInitMapCodebase,\n  cmdInitProgress,\n} from '@maxsim/core';\n\n/** Helper: extract a named flag's value from args, returning null if absent */\nfunction getFlag(args: string[], flag: string): string | null {\n  const idx = args.indexOf(flag);\n  return idx !== -1 ? args[idx + 1] : null;\n}\n\n// Namespace groupings for readability (mirrors original CJS structure)\nconst state = { cmdStateLoad, cmdStateGet, cmdStatePatch, cmdStateUpdate, cmdStateAdvancePlan, cmdStateRecordMetric, cmdStateUpdateProgress, cmdStateAddDecision, cmdStateAddBlocker, cmdStateResolveBlocker, cmdStateRecordSession, cmdStateSnapshot, stateExtractField, stateReplaceField };\nconst phase = { cmdPhasesList, cmdPhaseNextDecimal, cmdFindPhase, cmdPhasePlanIndex, cmdPhaseAdd, cmdPhaseInsert, cmdPhaseRemove, cmdPhaseComplete };\nconst roadmap = { cmdRoadmapGetPhase, cmdRoadmapAnalyze, cmdRoadmapUpdatePlanProgress };\nconst verify = { cmdVerifySummary, cmdVerifyPlanStructure, cmdVerifyPhaseCompleteness, cmdVerifyReferences, cmdVerifyCommits, cmdVerifyArtifacts, cmdVerifyKeyLinks, cmdValidateConsistency, cmdValidateHealth };\nconst config = { cmdConfigEnsureSection, cmdConfigSet, cmdConfigGet };\nconst template = { cmdTemplateSelect, cmdTemplateFill };\nconst milestone = { cmdRequirementsMarkComplete, cmdMilestoneComplete };\nconst commands = { cmdGenerateSlug, cmdCurrentTimestamp, cmdListTodos, cmdVerifyPathExists, cmdHistoryDigest, cmdResolveModel, cmdCommit, cmdSummaryExtract, cmdWebsearch, cmdProgressRender, cmdTodoComplete, cmdScaffold };\nconst init = { cmdInitExecutePhase, cmdInitPlanPhase, cmdInitNewProject, cmdInitNewMilestone, cmdInitQuick, cmdInitResume, cmdInitVerifyWork, cmdInitPhaseOp, cmdInitTodos, cmdInitMilestoneOp, cmdInitMapCodebase, cmdInitProgress };\nconst frontmatter = { cmdFrontmatterGet, cmdFrontmatterSet, cmdFrontmatterMerge, cmdFrontmatterValidate, extractFrontmatter, reconstructFrontmatter, spliceFrontmatter, parseMustHavesBlock, FRONTMATTER_SCHEMAS };\n\n// ─── CLI Router ───────────────────────────────────────────────────────────────\n\nasync function main(): Promise<void> {\n  const args: string[] = process.argv.slice(2);\n\n  // Optional cwd override for sandboxed subagents running outside project root.\n  let cwd: string = process.cwd();\n  const cwdEqArg = args.find(arg => arg.startsWith('--cwd='));\n  const cwdIdx = args.indexOf('--cwd');\n  if (cwdEqArg) {\n    const value = cwdEqArg.slice('--cwd='.length).trim();\n    if (!value) error('Missing value for --cwd');\n    args.splice(args.indexOf(cwdEqArg), 1);\n    cwd = path.resolve(value);\n  } else if (cwdIdx !== -1) {\n    const value = args[cwdIdx + 1];\n    if (!value || value.startsWith('--')) error('Missing value for --cwd');\n    args.splice(cwdIdx, 2);\n    cwd = path.resolve(value);\n  }\n\n  if (!fs.existsSync(cwd) || !fs.statSync(cwd).isDirectory()) {\n    error(`Invalid --cwd: ${cwd}`);\n  }\n\n  const rawIndex = args.indexOf('--raw');\n  const raw: boolean = rawIndex !== -1;\n  if (rawIndex !== -1) args.splice(rawIndex, 1);\n\n  const command: string | undefined = args[0];\n\n  if (!command) {\n    error('Usage: maxsim-tools <command> [args] [--raw] [--cwd <path>]\\nCommands: state, resolve-model, find-phase, commit, verify-summary, verify, frontmatter, template, generate-slug, current-timestamp, list-todos, verify-path-exists, config-ensure-section, init');\n  }\n\n  switch (command) {\n    case 'state': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'update') {\n        state.cmdStateUpdate(cwd, args[2], args[3]);\n      } else if (subcommand === 'get') {\n        state.cmdStateGet(cwd, args[2], raw);\n      } else if (subcommand === 'patch') {\n        const patches: Record<string, string> = {};\n        for (let i = 2; i < args.length; i += 2) {\n          const key = args[i].replace(/^--/, '');\n          const value = args[i + 1];\n          if (key && value !== undefined) {\n            patches[key] = value;\n          }\n        }\n        state.cmdStatePatch(cwd, patches, raw);\n      } else if (subcommand === 'advance-plan') {\n        state.cmdStateAdvancePlan(cwd, raw);\n      } else if (subcommand === 'record-metric') {\n        const phaseIdx = args.indexOf('--phase');\n        const planIdx = args.indexOf('--plan');\n        const durationIdx = args.indexOf('--duration');\n        const tasksIdx = args.indexOf('--tasks');\n        const filesIdx = args.indexOf('--files');\n        state.cmdStateRecordMetric(cwd, {\n          phase: phaseIdx !== -1 ? args[phaseIdx + 1] : '',\n          plan: planIdx !== -1 ? args[planIdx + 1] : '',\n          duration: durationIdx !== -1 ? args[durationIdx + 1] : '',\n          tasks: tasksIdx !== -1 ? args[tasksIdx + 1] : undefined,\n          files: filesIdx !== -1 ? args[filesIdx + 1] : undefined,\n        }, raw);\n      } else if (subcommand === 'update-progress') {\n        state.cmdStateUpdateProgress(cwd, raw);\n      } else if (subcommand === 'add-decision') {\n        const phaseIdx = args.indexOf('--phase');\n        const summaryIdx = args.indexOf('--summary');\n        const summaryFileIdx = args.indexOf('--summary-file');\n        const rationaleIdx = args.indexOf('--rationale');\n        const rationaleFileIdx = args.indexOf('--rationale-file');\n        state.cmdStateAddDecision(cwd, {\n          phase: phaseIdx !== -1 ? args[phaseIdx + 1] : undefined,\n          summary: summaryIdx !== -1 ? args[summaryIdx + 1] : undefined,\n          summary_file: summaryFileIdx !== -1 ? args[summaryFileIdx + 1] : undefined,\n          rationale: rationaleIdx !== -1 ? args[rationaleIdx + 1] : '',\n          rationale_file: rationaleFileIdx !== -1 ? args[rationaleFileIdx + 1] : undefined,\n        }, raw);\n      } else if (subcommand === 'add-blocker') {\n        const textIdx = args.indexOf('--text');\n        const textFileIdx = args.indexOf('--text-file');\n        state.cmdStateAddBlocker(cwd, {\n          text: textIdx !== -1 ? args[textIdx + 1] : undefined,\n          text_file: textFileIdx !== -1 ? args[textFileIdx + 1] : undefined,\n        }, raw);\n      } else if (subcommand === 'resolve-blocker') {\n        const textIdx = args.indexOf('--text');\n        state.cmdStateResolveBlocker(cwd, textIdx !== -1 ? args[textIdx + 1] : null, raw);\n      } else if (subcommand === 'record-session') {\n        const stoppedIdx = args.indexOf('--stopped-at');\n        const resumeIdx = args.indexOf('--resume-file');\n        state.cmdStateRecordSession(cwd, {\n          stopped_at: stoppedIdx !== -1 ? args[stoppedIdx + 1] : undefined,\n          resume_file: resumeIdx !== -1 ? args[resumeIdx + 1] : 'None',\n        }, raw);\n      } else {\n        state.cmdStateLoad(cwd, raw);\n      }\n      break;\n    }\n\n    case 'resolve-model': {\n      commands.cmdResolveModel(cwd, args[1], raw);\n      break;\n    }\n\n    case 'find-phase': {\n      phase.cmdFindPhase(cwd, args[1], raw);\n      break;\n    }\n\n    case 'commit': {\n      const amend: boolean = args.includes('--amend');\n      const message: string = args[1];\n      // Parse --files flag (collect args after --files, stopping at other flags)\n      const filesIndex = args.indexOf('--files');\n      const files: string[] = filesIndex !== -1 ? args.slice(filesIndex + 1).filter(a => !a.startsWith('--')) : [];\n      commands.cmdCommit(cwd, message, files, raw, amend);\n      break;\n    }\n\n    case 'verify-summary': {\n      const summaryPath: string = args[1];\n      const countIndex = args.indexOf('--check-count');\n      const checkCount: number = countIndex !== -1 ? parseInt(args[countIndex + 1], 10) : 2;\n      verify.cmdVerifySummary(cwd, summaryPath, checkCount, raw);\n      break;\n    }\n\n    case 'template': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'select') {\n        template.cmdTemplateSelect(cwd, args[2], raw);\n      } else if (subcommand === 'fill') {\n        const templateType: string = args[2];\n        const phaseIdx = args.indexOf('--phase');\n        const planIdx = args.indexOf('--plan');\n        const nameIdx = args.indexOf('--name');\n        const typeIdx = args.indexOf('--type');\n        const waveIdx = args.indexOf('--wave');\n        const fieldsIdx = args.indexOf('--fields');\n        template.cmdTemplateFill(cwd, templateType, {\n          phase: phaseIdx !== -1 ? args[phaseIdx + 1] : '',\n          plan: planIdx !== -1 ? args[planIdx + 1] : undefined,\n          name: nameIdx !== -1 ? args[nameIdx + 1] : undefined,\n          type: typeIdx !== -1 ? args[typeIdx + 1] : 'execute',\n          wave: waveIdx !== -1 ? args[waveIdx + 1] : '1',\n          fields: fieldsIdx !== -1 ? JSON.parse(args[fieldsIdx + 1]) : {},\n        }, raw);\n      } else {\n        error('Unknown template subcommand. Available: select, fill');\n      }\n      break;\n    }\n\n    case 'frontmatter': {\n      const subcommand: string | undefined = args[1];\n      const file: string = args[2];\n      if (subcommand === 'get') {\n        const fieldIdx = args.indexOf('--field');\n        frontmatter.cmdFrontmatterGet(cwd, file, getFlag(args, '--field'), raw);\n      } else if (subcommand === 'set') {\n        frontmatter.cmdFrontmatterSet(cwd, file, getFlag(args, '--field'), getFlag(args, '--value') ?? undefined, raw);\n      } else if (subcommand === 'merge') {\n        frontmatter.cmdFrontmatterMerge(cwd, file, getFlag(args, '--data'), raw);\n      } else if (subcommand === 'validate') {\n        frontmatter.cmdFrontmatterValidate(cwd, file, getFlag(args, '--schema'), raw);\n      } else {\n        error('Unknown frontmatter subcommand. Available: get, set, merge, validate');\n      }\n      break;\n    }\n\n    case 'verify': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'plan-structure') {\n        verify.cmdVerifyPlanStructure(cwd, args[2], raw);\n      } else if (subcommand === 'phase-completeness') {\n        verify.cmdVerifyPhaseCompleteness(cwd, args[2], raw);\n      } else if (subcommand === 'references') {\n        verify.cmdVerifyReferences(cwd, args[2], raw);\n      } else if (subcommand === 'commits') {\n        verify.cmdVerifyCommits(cwd, args.slice(2), raw);\n      } else if (subcommand === 'artifacts') {\n        verify.cmdVerifyArtifacts(cwd, args[2], raw);\n      } else if (subcommand === 'key-links') {\n        verify.cmdVerifyKeyLinks(cwd, args[2], raw);\n      } else {\n        error('Unknown verify subcommand. Available: plan-structure, phase-completeness, references, commits, artifacts, key-links');\n      }\n      break;\n    }\n\n    case 'generate-slug': {\n      commands.cmdGenerateSlug(args[1], raw);\n      break;\n    }\n\n    case 'current-timestamp': {\n      commands.cmdCurrentTimestamp((args[1] || 'full') as TimestampFormat, raw);\n      break;\n    }\n\n    case 'list-todos': {\n      commands.cmdListTodos(cwd, args[1], raw);\n      break;\n    }\n\n    case 'verify-path-exists': {\n      commands.cmdVerifyPathExists(cwd, args[1], raw);\n      break;\n    }\n\n    case 'config-ensure-section': {\n      config.cmdConfigEnsureSection(cwd, raw);\n      break;\n    }\n\n    case 'config-set': {\n      config.cmdConfigSet(cwd, args[1], args[2], raw);\n      break;\n    }\n\n    case 'config-get': {\n      config.cmdConfigGet(cwd, args[1], raw);\n      break;\n    }\n\n    case 'history-digest': {\n      commands.cmdHistoryDigest(cwd, raw);\n      break;\n    }\n\n    case 'phases': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'list') {\n        const typeIndex = args.indexOf('--type');\n        const phaseIndex = args.indexOf('--phase');\n        const options = {\n          type: typeIndex !== -1 ? args[typeIndex + 1] : null,\n          phase: phaseIndex !== -1 ? args[phaseIndex + 1] : null,\n          includeArchived: args.includes('--include-archived'),\n        };\n        phase.cmdPhasesList(cwd, options, raw);\n      } else {\n        error('Unknown phases subcommand. Available: list');\n      }\n      break;\n    }\n\n    case 'roadmap': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'get-phase') {\n        roadmap.cmdRoadmapGetPhase(cwd, args[2], raw);\n      } else if (subcommand === 'analyze') {\n        roadmap.cmdRoadmapAnalyze(cwd, raw);\n      } else if (subcommand === 'update-plan-progress') {\n        roadmap.cmdRoadmapUpdatePlanProgress(cwd, args[2], raw);\n      } else {\n        error('Unknown roadmap subcommand. Available: get-phase, analyze, update-plan-progress');\n      }\n      break;\n    }\n\n    case 'requirements': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'mark-complete') {\n        milestone.cmdRequirementsMarkComplete(cwd, args.slice(2), raw);\n      } else {\n        error('Unknown requirements subcommand. Available: mark-complete');\n      }\n      break;\n    }\n\n    case 'phase': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'next-decimal') {\n        phase.cmdPhaseNextDecimal(cwd, args[2], raw);\n      } else if (subcommand === 'add') {\n        phase.cmdPhaseAdd(cwd, args.slice(2).join(' '), raw);\n      } else if (subcommand === 'insert') {\n        phase.cmdPhaseInsert(cwd, args[2], args.slice(3).join(' '), raw);\n      } else if (subcommand === 'remove') {\n        const forceFlag: boolean = args.includes('--force');\n        phase.cmdPhaseRemove(cwd, args[2], { force: forceFlag }, raw);\n      } else if (subcommand === 'complete') {\n        phase.cmdPhaseComplete(cwd, args[2], raw);\n      } else {\n        error('Unknown phase subcommand. Available: next-decimal, add, insert, remove, complete');\n      }\n      break;\n    }\n\n    case 'milestone': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'complete') {\n        const nameIndex = args.indexOf('--name');\n        const archivePhases: boolean = args.includes('--archive-phases');\n        // Collect --name value (everything after --name until next flag or end)\n        let milestoneName: string | null = null;\n        if (nameIndex !== -1) {\n          const nameArgs: string[] = [];\n          for (let i = nameIndex + 1; i < args.length; i++) {\n            if (args[i].startsWith('--')) break;\n            nameArgs.push(args[i]);\n          }\n          milestoneName = nameArgs.join(' ') || null;\n        }\n        milestone.cmdMilestoneComplete(cwd, args[2], { name: milestoneName ?? undefined, archivePhases }, raw);\n      } else {\n        error('Unknown milestone subcommand. Available: complete');\n      }\n      break;\n    }\n\n    case 'validate': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'consistency') {\n        verify.cmdValidateConsistency(cwd, raw);\n      } else if (subcommand === 'health') {\n        const repairFlag: boolean = args.includes('--repair');\n        verify.cmdValidateHealth(cwd, { repair: repairFlag }, raw);\n      } else {\n        error('Unknown validate subcommand. Available: consistency, health');\n      }\n      break;\n    }\n\n    case 'progress': {\n      const subcommand: string = args[1] || 'json';\n      commands.cmdProgressRender(cwd, subcommand, raw);\n      break;\n    }\n\n    case 'todo': {\n      const subcommand: string | undefined = args[1];\n      if (subcommand === 'complete') {\n        commands.cmdTodoComplete(cwd, args[2], raw);\n      } else {\n        error('Unknown todo subcommand. Available: complete');\n      }\n      break;\n    }\n\n    case 'scaffold': {\n      const scaffoldType: string = args[1];\n      const phaseIndex = args.indexOf('--phase');\n      const nameIndex = args.indexOf('--name');\n      const scaffoldOptions = {\n        phase: phaseIndex !== -1 ? args[phaseIndex + 1] : null,\n        name: nameIndex !== -1 ? args.slice(nameIndex + 1).join(' ') : null,\n      };\n      commands.cmdScaffold(cwd, scaffoldType, scaffoldOptions, raw);\n      break;\n    }\n\n    case 'init': {\n      const workflow: string | undefined = args[1];\n      switch (workflow) {\n        case 'execute-phase':\n          init.cmdInitExecutePhase(cwd, args[2], raw);\n          break;\n        case 'plan-phase':\n          init.cmdInitPlanPhase(cwd, args[2], raw);\n          break;\n        case 'new-project':\n          init.cmdInitNewProject(cwd, raw);\n          break;\n        case 'new-milestone':\n          init.cmdInitNewMilestone(cwd, raw);\n          break;\n        case 'quick':\n          init.cmdInitQuick(cwd, args.slice(2).join(' '), raw);\n          break;\n        case 'resume':\n          init.cmdInitResume(cwd, raw);\n          break;\n        case 'verify-work':\n          init.cmdInitVerifyWork(cwd, args[2], raw);\n          break;\n        case 'phase-op':\n          init.cmdInitPhaseOp(cwd, args[2], raw);\n          break;\n        case 'todos':\n          init.cmdInitTodos(cwd, args[2], raw);\n          break;\n        case 'milestone-op':\n          init.cmdInitMilestoneOp(cwd, raw);\n          break;\n        case 'map-codebase':\n          init.cmdInitMapCodebase(cwd, raw);\n          break;\n        case 'progress':\n          init.cmdInitProgress(cwd, raw);\n          break;\n        default:\n          error(`Unknown init workflow: ${workflow}\\nAvailable: execute-phase, plan-phase, new-project, new-milestone, quick, resume, verify-work, phase-op, todos, milestone-op, map-codebase, progress`);\n      }\n      break;\n    }\n\n    case 'phase-plan-index': {\n      phase.cmdPhasePlanIndex(cwd, args[1], raw);\n      break;\n    }\n\n    case 'state-snapshot': {\n      state.cmdStateSnapshot(cwd, raw);\n      break;\n    }\n\n    case 'summary-extract': {\n      const summaryPath: string = args[1];\n      const fieldsIndex = args.indexOf('--fields');\n      const fields: string[] | null = fieldsIndex !== -1 ? args[fieldsIndex + 1].split(',') : null;\n      commands.cmdSummaryExtract(cwd, summaryPath, fields, raw);\n      break;\n    }\n\n    case 'websearch': {\n      const query: string = args[1];\n      const limitIdx = args.indexOf('--limit');\n      const freshnessIdx = args.indexOf('--freshness');\n      await commands.cmdWebsearch(query, {\n        limit: limitIdx !== -1 ? parseInt(args[limitIdx + 1], 10) : 10,\n        freshness: freshnessIdx !== -1 ? args[freshnessIdx + 1] : undefined,\n      }, raw);\n      break;\n    }\n\n    case 'dashboard': {\n      await handleDashboard(args.slice(1));\n      break;\n    }\n\n    default:\n      error(`Unknown command: ${command}`);\n  }\n}\n\n/**\n * Dashboard launch command.\n *\n * Spawns the dashboard as a detached subprocess with MAXSIM_PROJECT_CWD set.\n * If the dashboard is already running (detected via /api/health), prints the URL.\n * Supports --stop to kill a running instance.\n */\nasync function handleDashboard(args: string[]): Promise<void> {\n  const DEFAULT_PORT = 3333;\n  const PORT_RANGE_END = 3343;\n  const HEALTH_TIMEOUT_MS = 1500;\n\n  // Handle --stop flag\n  if (args.includes('--stop')) {\n    for (let port = DEFAULT_PORT; port <= PORT_RANGE_END; port++) {\n      const running = await checkHealth(port, HEALTH_TIMEOUT_MS);\n      if (running) {\n        console.log(`Dashboard found on port ${port} — sending shutdown...`);\n        // Try to reach a shutdown endpoint, or just inform user\n        console.log(`Dashboard at http://localhost:${port} is running.`);\n        console.log(`To stop it, close the browser tab or kill the process on port ${port}.`);\n        // On Windows: netstat -ano | findstr :PORT, then taskkill /PID\n        // On Unix: lsof -i :PORT | awk 'NR>1 {print $2}' | xargs kill\n        try {\n          if (process.platform === 'win32') {\n            const result = execSync(`netstat -ano | findstr :${port} | findstr LISTENING`, { encoding: 'utf-8' }).trim();\n            const lines = result.split('\\n');\n            const pids = new Set<string>();\n            for (const line of lines) {\n              const parts = line.trim().split(/\\s+/);\n              const pid = parts[parts.length - 1];\n              if (pid && pid !== '0') pids.add(pid);\n            }\n            for (const pid of pids) {\n              try {\n                execSync(`taskkill /PID ${pid} /F`, { stdio: 'ignore' });\n                console.log(`Killed process ${pid}`);\n              } catch {\n                // Process may have already exited\n              }\n            }\n          } else {\n            execSync(`lsof -i :${port} -t | xargs kill -SIGTERM 2>/dev/null`, { stdio: 'ignore' });\n          }\n          console.log('Dashboard stopped.');\n        } catch {\n          console.log('Could not automatically stop the dashboard. Kill the process manually.');\n        }\n        return;\n      }\n    }\n    console.log('No running dashboard found.');\n    return;\n  }\n\n  // Check if dashboard is already running\n  for (let port = DEFAULT_PORT; port <= PORT_RANGE_END; port++) {\n    const running = await checkHealth(port, HEALTH_TIMEOUT_MS);\n    if (running) {\n      console.log(`Dashboard already running at http://localhost:${port}`);\n      return;\n    }\n  }\n\n  // Resolve the dashboard server entry point\n  const serverPath = resolveDashboardServer();\n  if (!serverPath) {\n    console.error('Could not find @maxsim/dashboard server entry point.');\n    console.error('Ensure @maxsim/dashboard is installed and built.');\n    process.exit(1);\n  }\n\n  // Determine runner: if .ts file, use tsx; if .js file, use node\n  const isTsFile = serverPath.endsWith('.ts');\n  const runner = isTsFile ? 'node' : 'node';\n  const runnerArgs: string[] = isTsFile ? ['--import', 'tsx', serverPath] : [serverPath];\n\n  // Standalone server must run from its own directory to find .next/\n  const serverDir = path.dirname(serverPath);\n\n  // Read dashboard.json for projectCwd (one level up from dashboard/ dir)\n  let projectCwd = process.cwd();\n  const dashboardConfigPath = path.join(path.dirname(serverDir), 'dashboard.json');\n  if (fs.existsSync(dashboardConfigPath)) {\n    try {\n      const config = JSON.parse(fs.readFileSync(dashboardConfigPath, 'utf8')) as { projectCwd?: string };\n      if (config.projectCwd) {\n        projectCwd = config.projectCwd;\n      }\n    } catch {\n      // Use default cwd\n    }\n  }\n\n  // node-pty is a native addon that must be installed in the dashboard directory.\n  // Auto-install it if missing so the terminal works out of the box.\n  const ptyModulePath = path.join(serverDir, 'node_modules', 'node-pty');\n  if (!fs.existsSync(ptyModulePath)) {\n    console.log('Installing node-pty for terminal support...');\n    try {\n      execSync('npm install node-pty --save-optional --no-audit --no-fund --loglevel=error', {\n        cwd: serverDir,\n        stdio: 'inherit',\n        timeout: 120_000,\n      });\n    } catch {\n      console.warn('node-pty installation failed — terminal will be unavailable.');\n    }\n  }\n\n  console.log('Dashboard starting...');\n\n  const child = spawn(runner, runnerArgs, {\n    cwd: serverDir,\n    detached: true,\n    stdio: 'ignore',\n    env: {\n      ...process.env,\n      MAXSIM_PROJECT_CWD: projectCwd,\n      NODE_ENV: isTsFile ? 'development' : 'production',\n    },\n    // On Windows, use shell to ensure detached works correctly\n    ...(process.platform === 'win32' ? { shell: true } : {}),\n  });\n\n  child.unref();\n\n  // Wait briefly for the server to start, then check health\n  await new Promise((resolve) => setTimeout(resolve, 3000));\n\n  for (let port = DEFAULT_PORT; port <= PORT_RANGE_END; port++) {\n    const running = await checkHealth(port, HEALTH_TIMEOUT_MS);\n    if (running) {\n      console.log(`Dashboard ready at http://localhost:${port}`);\n      return;\n    }\n  }\n\n  console.log(`Dashboard spawned (PID ${child.pid}). It may take a moment to start.`);\n  console.log(`Check http://localhost:${DEFAULT_PORT} once ready.`);\n}\n\n/**\n * Check if a dashboard health endpoint is responding on the given port.\n */\nasync function checkHealth(port: number, timeoutMs: number): Promise<boolean> {\n  try {\n    const controller = new AbortController();\n    const timer = setTimeout(() => controller.abort(), timeoutMs);\n    const res = await fetch(`http://localhost:${port}/api/health`, {\n      signal: controller.signal,\n    });\n    clearTimeout(timer);\n    if (res.ok) {\n      const data = await res.json() as { status?: string };\n      return data.status === 'ok';\n    }\n    return false;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Resolve the dashboard server entry point path.\n * Tries: built server.js first, then source server.ts for dev mode.\n */\nfunction resolveDashboardServer(): string | null {\n  // Strategy 0: Installed standalone build (production path)\n  const localDashboard = path.join(process.cwd(), '.claude', 'dashboard', 'server.js');\n  if (fs.existsSync(localDashboard)) return localDashboard;\n  const globalDashboard = path.join(os.homedir(), '.claude', 'dashboard', 'server.js');\n  if (fs.existsSync(globalDashboard)) return globalDashboard;\n\n  // Strategy 1: Resolve from @maxsim/dashboard package\n  try {\n    const require_ = createRequire(import.meta.url);\n    const pkgPath = require_.resolve('@maxsim/dashboard/package.json');\n    const pkgDir = path.dirname(pkgPath);\n\n    // Prefer built server.js for production\n    const serverJs = path.join(pkgDir, 'server.js');\n    if (fs.existsSync(serverJs)) return serverJs;\n\n    // Fall back to source server.ts for dev (requires tsx)\n    const serverTs = path.join(pkgDir, 'server.ts');\n    if (fs.existsSync(serverTs)) return serverTs;\n  } catch {\n    // @maxsim/dashboard not resolvable\n  }\n\n  // Strategy 2: Walk up from this file to find the monorepo root\n  try {\n    let dir = path.dirname(new URL(import.meta.url).pathname);\n    // On Windows, remove leading / from /C:/...\n    if (process.platform === 'win32' && dir.startsWith('/')) {\n      dir = dir.slice(1);\n    }\n    for (let i = 0; i < 5; i++) {\n      const candidate = path.join(dir, 'packages', 'dashboard', 'server.ts');\n      if (fs.existsSync(candidate)) return candidate;\n      const candidateJs = path.join(dir, 'packages', 'dashboard', 'server.js');\n      if (fs.existsSync(candidateJs)) return candidateJs;\n      dir = path.dirname(dir);\n    }\n  } catch {\n    // Fallback walk failed\n  }\n\n  return null;\n}\n\nmain();\n"],"x_google_ignoreList":[7,8,9,10],"mappings":"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"}