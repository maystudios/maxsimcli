{"version":3,"file":"codex.cjs","names":["expandTilde","path","os","replacePathReferences","convertClaudeCommandToCodexSkill"],"sources":["../src/codex.ts"],"sourcesContent":["/**\n * @maxsim/adapters â€” Codex adapter\n *\n * Ports the Codex-specific logic from bin/install.js:\n *   - getGlobalDir('codex', ...)         (lines 124-133)\n *   - getDirName('codex')                (line 48)\n *   - getConfigDirFromHome('codex', isGlobal) (line 70)\n *   - convertClaudeCommandToCodexSkill + convertClaudeToCodexMarkdown\n */\n\nimport * as path from 'node:path';\nimport * as os from 'node:os';\nimport type { AdapterConfig } from '@maxsim/core';\nimport { expandTilde } from './base.js';\nimport { convertClaudeCommandToCodexSkill } from './transforms/frontmatter.js';\nimport {\n  convertClaudeToCodexMarkdown,\n  replacePathReferences,\n} from './transforms/content.js';\n\n/**\n * Get the global config directory for Codex.\n * Priority: explicitDir > CODEX_HOME env > ~/.codex\n */\nfunction getGlobalDir(explicitDir?: string | null): string {\n  if (explicitDir) {\n    return expandTilde(explicitDir);\n  }\n  if (process.env.CODEX_HOME) {\n    return expandTilde(process.env.CODEX_HOME);\n  }\n  return path.join(os.homedir(), '.codex');\n}\n\n/**\n * Get the config directory path relative to home for hook templating.\n */\nfunction getConfigDirFromHome(_isGlobal: boolean): string {\n  return \"'.codex'\";\n}\n\n/**\n * Transform markdown content for Codex installation.\n * Applies Codex markdown conversion and path replacement.\n */\nfunction transformContent(content: string, pathPrefix: string): string {\n  let result = replacePathReferences(content, pathPrefix, '.codex');\n  result = result.replace(/~\\/\\.codex\\//g, pathPrefix);\n  result = convertClaudeCommandToCodexSkill(result);\n  return result;\n}\n\n/**\n * Codex adapter configuration.\n * Codex uses skill-based command structure (skills/maxsim-star/SKILL.md).\n */\nexport const codexAdapter: AdapterConfig = {\n  runtime: 'codex',\n  dirName: '.codex',\n  getGlobalDir,\n  getConfigDirFromHome,\n  transformContent,\n  commandStructure: 'skills',\n};\n\n// Re-export Codex-specific transforms for use by install orchestration\nexport { convertClaudeCommandToCodexSkill, convertClaudeToCodexMarkdown };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAwBA,SAAS,aAAa,aAAqC;AACzD,KAAI,YACF,QAAOA,yBAAY,YAAY;AAEjC,KAAI,QAAQ,IAAI,WACd,QAAOA,yBAAY,QAAQ,IAAI,WAAW;AAE5C,QAAOC,UAAK,KAAKC,QAAG,SAAS,EAAE,SAAS;;;;;AAM1C,SAAS,qBAAqB,WAA4B;AACxD,QAAO;;;;;;AAOT,SAAS,iBAAiB,SAAiB,YAA4B;CACrE,IAAI,SAASC,0CAAsB,SAAS,YAAY,SAAS;AACjE,UAAS,OAAO,QAAQ,iBAAiB,WAAW;AACpD,UAASC,qDAAiC,OAAO;AACjD,QAAO;;;;;;AAOT,MAAa,eAA8B;CACzC,SAAS;CACT,SAAS;CACT;CACA;CACA;CACA,kBAAkB;CACnB"}