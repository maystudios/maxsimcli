{"version":3,"file":"gemini.cjs","names":["expandTilde","path","os","replacePathReferences","stripSubTags","convertClaudeToGeminiToml"],"sources":["../src/gemini.ts"],"sourcesContent":["/**\n * @maxsim/adapters â€” Gemini adapter\n *\n * Ports the Gemini-specific logic from bin/install.js:\n *   - getGlobalDir('gemini', ...)         (lines 113-122)\n *   - getDirName('gemini')                (line 47)\n *   - getConfigDirFromHome('gemini', isGlobal) (line 69)\n *   - convertClaudeToGeminiToml + convertClaudeToGeminiAgent + stripSubTags\n */\n\nimport * as path from 'node:path';\nimport * as os from 'node:os';\nimport type { AdapterConfig } from '@maxsim/core';\nimport { expandTilde } from './base.js';\nimport { convertClaudeToGeminiToml } from './transforms/frontmatter.js';\nimport {\n  convertClaudeToGeminiAgent,\n  stripSubTags,\n  replacePathReferences,\n} from './transforms/content.js';\n\n/**\n * Get the global config directory for Gemini.\n * Priority: explicitDir > GEMINI_CONFIG_DIR env > ~/.gemini\n */\nfunction getGlobalDir(explicitDir?: string | null): string {\n  if (explicitDir) {\n    return expandTilde(explicitDir);\n  }\n  if (process.env.GEMINI_CONFIG_DIR) {\n    return expandTilde(process.env.GEMINI_CONFIG_DIR);\n  }\n  return path.join(os.homedir(), '.gemini');\n}\n\n/**\n * Get the config directory path relative to home for hook templating.\n */\nfunction getConfigDirFromHome(_isGlobal: boolean): string {\n  return \"'.gemini'\";\n}\n\n/**\n * Transform markdown content for Gemini installation.\n * Applies TOML conversion for commands, agent conversion for agents,\n * stripSubTags, and path replacement.\n */\nfunction transformContent(content: string, pathPrefix: string): string {\n  let result = replacePathReferences(content, pathPrefix, '.gemini');\n  result = stripSubTags(result);\n  result = convertClaudeToGeminiToml(result);\n  return result;\n}\n\n/**\n * Gemini adapter configuration.\n * Gemini uses nested command structure (commands/maxsim/*.toml).\n */\nexport const geminiAdapter: AdapterConfig = {\n  runtime: 'gemini',\n  dirName: '.gemini',\n  getGlobalDir,\n  getConfigDirFromHome,\n  transformContent,\n  commandStructure: 'nested',\n};\n\n// Re-export Gemini-specific transforms for use by install orchestration\nexport { convertClaudeToGeminiToml, convertClaudeToGeminiAgent, stripSubTags };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAS,aAAa,aAAqC;AACzD,KAAI,YACF,QAAOA,yBAAY,YAAY;AAEjC,KAAI,QAAQ,IAAI,kBACd,QAAOA,yBAAY,QAAQ,IAAI,kBAAkB;AAEnD,QAAOC,UAAK,KAAKC,QAAG,SAAS,EAAE,UAAU;;;;;AAM3C,SAAS,qBAAqB,WAA4B;AACxD,QAAO;;;;;;;AAQT,SAAS,iBAAiB,SAAiB,YAA4B;CACrE,IAAI,SAASC,0CAAsB,SAAS,YAAY,UAAU;AAClE,UAASC,iCAAa,OAAO;AAC7B,UAASC,8CAA0B,OAAO;AAC1C,QAAO;;;;;;AAOT,MAAa,gBAA+B;CAC1C,SAAS;CACT,SAAS;CACT;CACA;CACA;CACA,kBAAkB;CACnB"}