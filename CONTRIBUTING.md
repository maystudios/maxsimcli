# Contributing to MAXSIM

Thank you for your interest in contributing! This guide covers everything you need to get started.

## Development Setup

```bash
# 1. Fork and clone the repo
git clone https://github.com/<your-username>/maxsimcli.git
cd maxsimcli

# 2. Install dependencies
npm install

# 3. Build all packages
npm run build

# 4. Run unit tests
npm test

# 5. Run e2e tests (requires build)
cd packages/cli && npx vitest run --config vitest.e2e.config.ts
```

**Requirements:** Node >= 22.0.0

## Branch Naming

Use descriptive, lowercase, hyphen-separated names:

```
feat/add-new-command-name
fix/install-path-resolution
docs/update-contributing-guide
refactor/cli-router-cleanup
```

## Commit Messages — Conventional Commits

All commits **must** follow [Conventional Commits](https://www.conventionalcommits.org/). This is not optional — `semantic-release` reads commit prefixes to determine version bumps and changelog entries automatically.

### Format

```
<type>(<scope>): <short description>

[optional body]
```

### Allowed Types

| Type | When to use | Version bump |
|------|-------------|--------------|
| `fix:` | Bug fix | patch (`1.0.8 → 1.0.9`) |
| `feat:` | New feature | minor (`1.0.8 → 1.1.0`) |
| `fix!:` / `feat!:` | Breaking change | major (`1.0.8 → 2.0.0`) |
| `chore:` | Maintenance, build changes, version bumps | none |
| `docs:` | Documentation only | none |
| `test:` | Adding or fixing tests | none |
| `refactor:` | Code change that's neither fix nor feature | none |

### Examples

```bash
git commit -m "fix(install): copy maxsim-tools.cjs to bin/ during install"
git commit -m "feat(cli): add new phase:insert command"
git commit -m "docs: update README with new model profiles"
git commit -m "feat!: rename STATE.md fields — breaks existing projects"
```

> **Note:** `chore:`, `docs:`, and `test:` commits do **not** trigger a publish to npm. `fix:` and `feat:` do.

## Code Style

This project uses **[Biome](https://biomejs.dev/)** for linting and formatting.

```bash
npm run lint        # Check
npm run lint --fix  # Auto-fix
```

Biome runs automatically on CI. PRs with lint failures will not be merged.

## Project Structure

Key locations for common tasks:

| Task | Location |
|------|----------|
| Add a new CLI tool command | `packages/cli/src/cli.ts` (switch dispatch) + relevant module in `src/core/` |
| Add a new workflow | `templates/workflows/` |
| Add a new agent | `templates/agents/` |
| Change model assignments | `MODEL_PROFILES` in `packages/cli/src/core/core.ts` |
| Change install behavior | `packages/cli/src/install.ts` |
| Modify hooks | `packages/cli/src/hooks/` |
| Dashboard development | `packages/dashboard/src/` |

Static assets (commands, agents, workflows) live in `templates/` at the repo root. See [CLAUDE.md](./CLAUDE.md) for the full architecture overview.

## Before Submitting a PR

- [ ] `npm run build` passes with no errors
- [ ] `npm test` passes
- [ ] Commits follow Conventional Commits format
- [ ] No direct edits to `packages/cli/README.md` — it is auto-generated by the build from the root `README.md`

## Bug Reports & Feature Requests

Use the [GitHub issue templates](https://github.com/maystudios/maxsimcli/issues/new/choose) — they guide you through providing the information needed to act on your report quickly.
