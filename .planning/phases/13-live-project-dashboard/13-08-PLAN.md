---
phase: 13-live-project-dashboard
plan: 08
type: execute
wave: 5
depends_on: ["13-04", "13-05", "13-06", "13-07"]
files_modified:
  - packages/dashboard/app/page.tsx
  - packages/dashboard/app/components/dashboard/phase-progress.tsx
  - packages/dashboard/app/components/dashboard/stats-header.tsx
autonomous: false
requirements: []

must_haves:
  truths:
    - "nx build dashboard completes with zero errors"
    - "Dashboard renders correctly with real .planning/ data when launched"
    - "WebSocket connection establishes and file changes trigger UI refresh"
    - "Checkbox toggling in plan tasks writes back to file and refreshes"
    - "CodeMirror editor opens, edits, and saves plan content"
    - "Sidebar navigation between views works correctly"
    - "Swiss Style Design is visually consistent: dark theme, mono+sans fonts, accent colors"
  artifacts:
    - path: "packages/dashboard/app/page.tsx"
      provides: "Final integrated dashboard page with all views wired"
  key_links:
    - from: "packages/dashboard/server.ts"
      to: "packages/dashboard/lib/watcher.ts"
      via: "setupWatcher + WebSocket integration"
      pattern: "setupWatcher"
    - from: "packages/dashboard/app/hooks/use-dashboard-data.ts"
      to: "packages/dashboard/app/components/providers/websocket-provider.tsx"
      via: "useWebSocket() for real-time refresh"
      pattern: "useWebSocket"
---

<objective>
Integration validation and visual polish: verify the full dashboard works end-to-end with real data, fix any integration issues, and ensure Swiss Style Design consistency.

Purpose: Ensure all dashboard components work together correctly and the visual design is consistent before declaring the phase complete.
Output: A fully integrated, visually polished dashboard that passes build, renders real data, and handles all interactive flows.
</objective>

<execution_context>
@./workflows/execute-plan.md
@./templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/13-live-project-dashboard/13-CONTEXT.md
@.planning/phases/13-live-project-dashboard/13-04-SUMMARY.md
@.planning/phases/13-live-project-dashboard/13-05-SUMMARY.md
@.planning/phases/13-live-project-dashboard/13-06-SUMMARY.md
@.planning/phases/13-live-project-dashboard/13-07-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build verification and integration fixes</name>
  <files>
    packages/dashboard/app/page.tsx
    packages/dashboard/app/components/dashboard/phase-progress.tsx
    packages/dashboard/app/components/dashboard/stats-header.tsx
  </files>
  <action>
  Run full build and fix any TypeScript/build-verifiable integration issues:

  1. Run `nx build dashboard` -- fix any TypeScript errors, import resolution issues, or Next.js build warnings
  2. Verify all API routes are correctly registered by Next.js App Router (check build output for route listing)
  3. Test that `lib/parsers.ts` correctly imports from `@maxsim/core` in the build context (transpilePackages config must be correct)
  4. Fix any component import/export mismatches between plans
  5. Verify motion animations compile correctly (motion/react imports)
  6. Ensure CodeMirror dynamic import works with Next.js (may need `dynamic()` with `ssr: false` if server-side import fails)
  7. Add any missing "use client" directives on components that use hooks
  8. Add a loading spinner component for initial data fetch states
  9. Verify `pnpm install && nx build dashboard` passes from a clean state

  Note: Visual consistency checks (theme variables, font usage, spacing grid, accent-glow effects) are deferred to the Task 2 human verification checklist since they cannot be verified by build commands alone.
  </action>
  <verify>
    <automated>cd C:/Development/cli/maxsim && pnpm install && npx nx build dashboard 2>&1 | tail -10</automated>
  </verify>
  <done>nx build dashboard passes with zero errors; all imports resolve; motion animations compile; CodeMirror loads correctly; visual consistency verified</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual and functional verification</name>
  <what-built>
  Complete MAXSIM live project dashboard with:
  - Real-time file watching via WebSocket
  - Phase overview with animated progress bars
  - Phase drill-down with plan tasks and CodeMirror editor
  - Sidebar navigation with todos and blockers
  - Swiss Style Design dark theme
  </what-built>
  <how-to-verify>
  **Functional verification:**
  1. From the project root, start the dashboard: `cd packages/dashboard && pnpm run dev`
  2. Open the URL shown in the terminal (should auto-open)
  3. Verify main view:
     - Stats header shows milestone progress, current phase, blockers/todos counts
     - Phase list shows all phases with progress bars
     - Current phase is highlighted
  4. Click a phase to drill down:
     - Plan cards show with task lists
     - Toggle a task checkbox -- verify the file updates on disk
     - Click "Edit" on a plan -- verify CodeMirror opens with Markdown highlighting
     - Make an edit and click Save -- verify file updates on disk
  5. Use sidebar to navigate to "Todos":
     - Add a new todo -- verify file is created in .planning/todos/pending/
     - Mark a todo complete -- verify it moves to completed
  6. Navigate to "Blockers":
     - Verify blockers from STATE.md are displayed
  7. Open a second terminal and edit a .planning/ file manually
     - Verify dashboard updates in real-time (sub-second)

  **Visual consistency verification (Swiss Style Design):**
  8. Verify dark theme: no bright white areas, all text readable on dark background
  9. Verify all components use theme CSS variables (not hardcoded colors) -- no stray white or off-brand colors
  10. Verify font usage: phase numbers and code in mono font (`JetBrains Mono`), labels and text in sans font (`Inter`)
  11. Verify spacing grid is consistent: cards use p-4, main content uses p-6, list gaps are consistent (gap-3 or gap-4)
  12. Verify accent-glow effects on current phase highlight and interactive hover elements
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `nx build dashboard` passes with zero errors
2. Dashboard launches and renders real .planning/ data
3. WebSocket connection indicator shows green
4. File edits from outside the dashboard trigger real-time UI refresh
5. All interactive flows work: checkbox toggle, editor save, todo create/complete, blocker resolve
6. Swiss Style Design is consistent across all views
</verification>

<success_criteria>
- Full build passes cleanly
- All dashboard features work end-to-end with real project data
- Real-time file watching and WebSocket updates work
- Visual design matches Swiss Style Design principles
- User approves the visual and functional experience
</success_criteria>

<output>
After completion, create `.planning/phases/13-live-project-dashboard/13-08-SUMMARY.md`
</output>
